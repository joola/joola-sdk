function f(){return function(){}}function ga(a){return function(){return a}}var A;
(function(){function a(){}function b(){}function c(){this.C.apply(this,arguments)}function d(a){var b=[],c,Xa;(function(a){a&&a.Zb?Xa=Ya(a.Zb,function(a){return d(a[1])}):(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a))?b=[l(c[1]),l(c[2]),l(c[3]),parseFloat(c[4],10)]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?b=[l(c[1],16),l(c[2],16),l(c[3],16),1]:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))&&
(b=[l(c[1]),l(c[2]),l(c[3]),1])})(a);return{get:function(c){var la;Xa?(la=k(a),la.Zb=[].concat(la.Zb),B(Xa,function(a,I){la.Zb[I]=[la.Zb[I][0],a.get(c)]})):la=b&&!isNaN(b[0])?"rgb"===c?"rgb("+b[0]+","+b[1]+","+b[2]+")":"a"===c?b[3]:"rgba("+b.join(",")+")":a;return la},yj:function(a){if(Xa)B(Xa,function(I){I.yj(a)});else if(p(a)&&0!==a){var I;for(I=0;3>I;I++)b[I]+=l(255*a),0>b[I]&&(b[I]=0),255<b[I]&&(b[I]=255)}return this},KA:b,Lu:function(a){b[3]=a;return this}}}function e(){}function g(a,b){var c;
a||(a={});for(c in b)a[c]=b[c];return a}function k(){function a(b,c){var pa,la;for(la in c)c.hasOwnProperty(la)&&(pa=c[la],"object"!==typeof b&&(b={}),b[la]=pa&&"object"===typeof pa&&"[object Array]"!==Object.prototype.toString.call(pa)&&"number"!==typeof pa.nodeType?a(b[la]||{},pa):c[la]);return b}var b,c=arguments.length,d={};for(b=0;b<c;b++)d=a(d,arguments[b]);return d}function l(a,b){return parseInt(a,b||10)}function n(a){return"string"===typeof a}function h(a){return"object"===typeof a}function m(a){return"[object Array]"===
Object.prototype.toString.call(a)}function p(a){return"number"===typeof a}function s(a){return ba.log(a)/ba.LN10}function q(a){return ba.pow(10,a)}function u(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function v(a){return a!==K&&null!==a}function r(a,b,c){var d,e;if(n(b))v(c)?a.setAttribute(b,c):a&&a.getAttribute&&(e=a.getAttribute(b));else if(v(b)&&h(b))for(d in b)a.setAttribute(d,b[d]);return e}function z(a){return m(a)?a:[a]}function w(){var a=arguments,b,c,d=a.length;for(b=
0;b<d;b++)if(c=a[b],"undefined"!==typeof c&&null!==c)return c}function t(a,b){Oa&&(b&&b.opacity!==K)&&(b.filter="alpha(opacity="+100*b.opacity+")");g(a.style,b)}function F(a,b,c,d,e){a=T.createElement(a);b&&g(a,b);e&&t(a,{padding:0,border:ja,margin:0});c&&t(a,c);d&&d.appendChild(a);return a}function L(a,b){function c(){}c.prototype=new a;g(c.prototype,b);return c}function R(a,b,c,d){var e=ha.lang,g=-1===b?((a||0).toString().split(".")[1]||"").length:isNaN(b=ma(b))?2:b;b=void 0===c?e.Im:c;d=void 0===
d?e.up:d;e=0>a?"-":"";c=String(l(a=ma(+a||0).toFixed(g)));var h=3<c.length?c.length%3:0;return e+(h?c.substr(0,h)+d:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+d)+(g?b+ma(a-c).toFixed(g).slice(2):"")}function J(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function M(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);a.unshift(d);return c.apply(this,a)}}function Q(a,b){for(var c="{",d=!1,e,g,h,k,m,l=[];-1!==(c=a.indexOf(c));){e=a.slice(0,c);if(d){g=e.split(":");
h=g.shift().split(".");m=h.length;e=b;for(k=0;k<m;k++)e=e[h[k]];g.length&&(g=g.join(":"),h=/\.([0-9])/,k=ha.lang,m=void 0,/f$/.test(g)?(m=(m=g.match(h))?m[1]:-1,e=R(e,m,k.Im,-1<g.indexOf(",")?k.up:"")):e=lb(g,e))}l.push(e);a=a.slice(c+1);c=(d=!d)?"}":"{"}l.push(a);return l.join("")}function C(a,b,c,d){var e;c=w(c,1);e=a/c;b||(b=[1,2,2.5,5,10],d&&!1===d.bx&&(1===c?b=[1,2,5,10]:0.1>=c&&(b=[1/c])));for(d=0;d<b.length&&!(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2);d++);return a*c}function N(a,b){var c=b||[[Yb,
[1,2,5,10,20,25,50,100,200,500]],[Ab,[1,2,5,10,15,30]],[mb,[1,2,5,10,15,30]],[Za,[1,2,3,4,6,8,12]],[Da,[1,2]],[nb,[1,2]],[$a,[1,2,3,4,6]],[Ha,null]],d=c[c.length-1],e=V[d[0]],g=d[1],h;for(h=0;h<c.length&&!(d=c[h],e=V[d[0]],g=d[1],c[h+1]&&a<=(e*g[g.length-1]+V[c[h+1][0]])/2);h++);e===V[Ha]&&a<5*e&&(g=[1,2,5]);e===V[Ha]&&a<5*e&&(g=[1,2,5]);c=C(a/e,g);return{zv:e,count:c,yv:d[0]}}function S(a,b,c,d){var e=[],h={},k=ha.global.Ep,m,l=new Date(b),n=a.zv,p=a.count;if(v(b)){n>=V[Ab]&&(l.setMilliseconds(0),
l.setSeconds(n>=V[mb]?0:p*ka(l.getSeconds()/p)));if(n>=V[mb])l[Zb](n>=V[Za]?0:p*ka(l[Bb]()/p));if(n>=V[Za])l[$b](n>=V[Da]?0:p*ka(l[Cb]()/p));if(n>=V[Da])l[Db](n>=V[$a]?1:p*ka(l[ab]()/p));n>=V[$a]&&(l[ac](n>=V[Ha]?0:p*ka(l[ob]()/p)),m=l[pb]());n>=V[Ha]&&(m-=m%p,l[bc](m));if(n===V[nb])l[Db](l[ab]()-l[Eb]()+w(d,1));b=1;m=l[pb]();d=l.getTime();for(var s=l[ob](),q=l[ab](),r=k?0:(864E5+6E4*l.getTimezoneOffset())%864E5;d<c;)e.push(d),n===V[Ha]?d=qb(m+b*p,0):n===V[$a]?d=qb(m,s+b*p):k||n!==V[Da]&&n!==V[nb]?
d+=n*p:d=qb(m,s,q+b*p*(n===V[Da]?1:7)),b++;e.push(d);B(cc(e,function(a){return n<=V[Za]&&a%V[Da]===r}),function(a){h[a]=Da})}e.info=g(a,{ss:h,xB:n*p});return e}function Z(){this.eb=this.color=0}function Ea(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].hl=e;a.sort(function(a,I){d=b(a,I);return 0===d?a.hl-I.hl:d});for(e=0;e<c;e++)delete a[e].hl}function ia(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function ca(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function Fa(a,
b){for(var c in a)a[c]&&a[c]!==b&&a[c].ea&&a[c].ea(),delete a[c]}function y(a){rb||(rb=F(Ia));a&&rb.appendChild(a);rb.innerHTML=""}function O(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;fa.console&&console.log(c)}function P(a){return parseFloat(a.toPrecision(14))}function G(a,b){Ja=w(a,b.ab)}function U(){var a=ha.global.Ep,b=a?"getUTC":"get",c=a?"setUTC":"set";qb=a?Date.UTC:function(a,I,b,c,pa,d){return(new Date(a,I,w(b,1),w(c,0),w(pa,0),w(d,0))).getTime()};Bb=
b+"Minutes";Cb=b+"Hours";Eb=b+"Day";ab=b+"Date";ob=b+"Month";pb=b+"FullYear";Zb=c+"Minutes";$b=c+"Hours";Db=c+"Date";ac=c+"Month";bc=c+"FullYear"}function X(){}function Pa(a,b,c,d){this.axis=a;this.Tc=b;this.type=c||"";this.jd=!0;c||d||this.Wl()}function Fb(a,b){this.axis=a;b&&(this.options=b,this.id=b.id)}function dc(a,b,c,d,e,g){var h=a.F.jb;this.axis=a;this.Ts=c;this.options=b;this.x=d;this.stack=e;this.St="percent"===g;this.oj={align:b.align||(h?c?"left":"right":"center"),verticalAlign:b.verticalAlign||
(h?"middle":c?"bottom":"top"),y:w(b.y,h?4:c?14:-6),x:w(b.x,h?c?-6:6:0)};this.textAlign=b.textAlign||(h?c?"right":"left":"center")}function Gb(){this.C.apply(this,arguments)}function Hb(){this.C.apply(this,arguments)}function Ib(a,b){this.C(a,b)}function Jb(a,b){this.C(a,b)}function Kb(){this.C.apply(this,arguments)}var K,T=document,fa=window,ba=Math,H=ba.round,ka=ba.floor,ya=ba.ceil,E=ba.max,aa=ba.min,ma=ba.abs,qa=ba.cos,va=ba.sin,Qa=ba.PI,sb=2*Qa/360,Ka=navigator.userAgent,ec=fa.opera,Oa=/msie/i.test(Ka)&&
!ec,tb=8===T.documentMode,Lb=/AppleWebKit/.test(Ka),ub=/Firefox/.test(Ka),fc=/(Mobile|Android|Windows Phone)/.test(Ka),Ga="http://www.w3.org/2000/svg",ra=!!T.createElementNS&&!!T.createElementNS(Ga,"svg").Mx,tc=ub&&4>parseInt(Ka.split("Firefox/")[1],10),sa=!ra&&!Oa&&!!T.createElement("canvas").getContext,bb,vb=T.documentElement.ontouchstart!==K,gc={},Mb=0,rb,ha,lb,Ja,Nb,V,La=[],Ia="div",ja="none",hc="rgba(192,192,192,"+(ra?1E-4:0.002)+")",Yb="millisecond",Ab="second",mb="minute",Za="hour",Da="day",
nb="week",$a="month",Ha="year",ic="stroke-width",qb,Bb,Cb,Eb,ab,ob,pb,Zb,$b,Db,ac,bc,ta={};fa.aq=fa.aq?O(16,!0):{};lb=function(a,b,c){if(!v(b)||isNaN(b))return"Invalid date";a=w(a,"%Y-%m-%d %H:%M:%S");var d=new Date(b),e,h=d[Cb](),k=d[Eb](),m=d[ab](),l=d[ob](),n=d[pb](),p=ha.lang,s=p.Iv,d=g({Sw:s[k].substr(0,3),Sv:s[k],ib:J(m),dy:m,vj:p.Qu[l],Vv:p.At[l],Bz:J(l+1),y:n.toString().substr(2,2),Qw:n,iw:J(h),jw:J(h%12||12),wz:h%12||12,sw:J(d[Bb]()),hA:12>h?"AM":"PM",uw:12>h?"am":"pm",Dw:J(d.getSeconds()),
kw:J(H(b%1E3),3)},Highcharts.Px);for(e in d)for(;-1!==a.indexOf("%"+e);)a=a.replace("%"+e,"function"===typeof d[e]?d[e](b):d[e]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a};Z.prototype={Lv:function(a){this.color>=a&&(this.color=0)},Mv:function(a){this.eb>=a&&(this.eb=0)}};V=function(){for(var a=0,b=arguments,c=b.length,d={};a<c;a++)d[b[a++]]=b[a];return d}(Yb,1,Ab,1E3,mb,6E4,Za,36E5,Da,864E5,nb,6048E5,$a,26784E5,Ha,31556952E3);Nb={C:function(a,b,c){function d(a){for(k=a.length;k--;)"M"===
a[k]&&a.splice(k+1,0,a[k+1],a[k+2],a[k+1],a[k+2])}b=b||"";var e=a.shift,g=-1<b.indexOf("C"),h=g?7:3,k;b=b.split(" ");c=[].concat(c);var m,l;g&&(d(b),d(c));a.Ls&&(m=b.splice(b.length-6,6),l=c.splice(c.length-6,6));if(e<=c.length/h)for(;e--;)c=[].concat(c).splice(0,h).concat(c);a.shift=0;if(b.length)for(a=c.length;b.length<a;)e=[].concat(b).splice(b.length-h,h),g&&(e[h-6]=e[h-2],e[h-5]=e[h-1]),b=b.concat(e);m&&(b=b.concat(m),c=c.concat(l));return[b,c]},step:function(a,b,c,d){var e=[],g=a.length;if(1===
c)e=d;else if(g===b.length&&1>c)for(;g--;)d=parseFloat(a[g]),e[g]=isNaN(d)?a[g]:c*parseFloat(b[g]-d)+d;else e=b;return e}};(function(a){fa.El=fa.El||a&&{C:function(b){var c=a.Rh,d=c.step,e,g=a.Lw,h=g&&g.xA;e=a.Ox.opacity;a.extend(a.ur,{ey:function(a,b,c,I,pa){return-I*(b/=pa)*(b-2)+c}});a.b(["cur","_default","width","height","opacity"],function(a,b){var I=d,pa,e;"cur"===b?I=c.prototype:"_default"===b&&g&&(I=h[b],b="set");(pa=I[b])&&(I[b]=function(c){c=a?c:this;e=c.Cg;return e.d?e.d(c.Rk,"cur"===b?
K:c.now):pa.apply(this,arguments)})});M(e,"get",function(a,b,c){return b.d?b.opacity||0:a.call(this,b,c)});e=function(a){var c=a.Cg,I;a.fv||(I=b.C(c,c.ib,c.xp),a.start=I[0],a.end=I[1],a.fv=!0);c.d("d",b.step(a.start,a.end,a.Tc,c.xp))};g?h.ib={set:e}:d.ib=e;this.b=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){for(var c=0,I=a.length;c<I;c++)if(!1===b.call(a[c],a[c],c,a))return c};a.ub.Wy=function(){var a="Chart",b=arguments,c,I;n(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,
1));c=b[0];c!==K&&(c.F=c.F||{},c.F.Tb=this[0],new Highcharts[a](c,b[1]),I=this);c===K&&(I=La[r(this[0],"data-highcharts-chart")]);return I}},fn:a.fn,pk:a.pk,uq:function(b,c){return a(b)[c]()},kn:a.kn,map:function(a,b){for(var c=[],I=0,d=a.length;I<d;I++)c[I]=b.call(a[I],a[I],I,a);return c},offset:function(b){return a(b).offset()},Vl:function(b,c,d){a(b).bind(c,d)},Ho:function(b,c,d){var e=T.removeEventListener?"removeEventListener":"detachEvent";T[e]&&b&&!b[e]&&(b[e]=f());a(b).Fa(c,d)},fireEvent:function(b,
c,d,e){var h=a.dw(c),k="detached"+c,m;!Oa&&d&&(delete d.layerX,delete d.layerY);g(h,d);b[c]&&(b[k]=b[c],b[c]=null);a.b(["preventDefault","stopPropagation"],function(a,b){var c=h[b];h[b]=function(){try{c.call(h)}catch(a){"preventDefault"===b&&(m=!0)}}});a(b).I(h);b[k]&&(b[c]=b[k],b[k]=null);e&&!h.iz()&&!m&&e(h)},Gv:function(a){var b=a.so||a;b.pageX===K&&(b.pageX=a.pageX,b.pageY=a.pageY);return b},T:function(b,c,d){var e=a(b);b.style||(b.style={});c.ib&&(b.xp=c.ib,c.ib=1);e.stop();e.T(c,d)},stop:function(b){a(b).stop()}}})(fa.vk);
var na=fa.El,Y=na||{};na&&na.C.call(na,Nb);var wb=Y.uq,uc=Y.fn,Aa=Y.pk,B=Y.b,cc=Y.kn,vc=Y.offset,Ya=Y.map,da=Y.Vl,ua=Y.Ho,W=Y.fireEvent,wc=Y.Gv,Ob=Y.T,cb=Y.stop,Y={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};ha={oa:"#2f7ed8 #0d233a #8bbc21 #910000 #1aadce #492970 #f28f43 #77a1e5 #c42525 #a6c96a".split(" "),df:["circle","diamond","square","triangle","triangle-down"],lang:{ii:"Loading...",At:"January February March April May June July August September October November December".split(" "),
Qu:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Iv:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Im:".",Gt:"kMGTPE".split(""),wu:"Reset zoom",xu:"Reset zoom level 1:1",up:","},global:{Ep:!0,Oq:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",mq:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},F:{borderColor:"#4572A7",ce:5,Jm:"line",un:!0,Zc:10,Yc:10,Wc:15,Xc:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',
fontSize:"12px"},backgroundColor:"#FFFFFF",$t:"#C0C0C0",xi:{kv:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},jh:{text:"",align:"center",y:30,style:{color:"#4d759e"}},md:{gi:{of:!1,Su:!1,ab:{duration:1E3},Eb:{},lineWidth:2,mb:{enabled:!0,lineWidth:0,$e:4,hi:"#FFFFFF",$c:{uc:{enabled:!0},select:{fillColor:"#FFFFFF",hi:"#000000",lineWidth:2}}},v:{Eb:{}},lc:k(Y,{enabled:!1,Ra:function(){return R(this.y,-1)},verticalAlign:"bottom",
y:0}),Am:300,Bd:0,$f:!0,$c:{uc:{mb:{}},select:{mb:{}}},ih:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},pb:{enabled:!0,align:"center",Jn:"horizontal",wk:function(){return this.name},borderWidth:1,borderColor:"#909090",ce:5,navigation:{tq:"#274b6d",As:"#CCC"},Na:!1,di:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},bt:{color:"#000"},ci:{color:"#CCC"},$s:{position:"absolute",width:"13px",height:"13px"},il:16,rp:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},ii:{jt:{fontWeight:"bold",
position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},lb:{enabled:!0,ab:ra,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,ce:3,Ag:{vt:"%A, %b %e, %H:%M:%S.%L",Eu:"%A, %b %e, %H:%M:%S",xt:"%A, %b %e, %H:%M",ts:"%A, %b %e, %H:%M",Jh:"%A, %b %e, %Y",Hv:"Week from %A, %b %e, %Y",zt:"%B %Y",Qv:"%Y"},rn:'<span style="font-size: 10px">{point.key}</span><br/>',yo:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
Na:!0,Yu:fc?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},Oc:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var oa=ha.md,na=oa.gi;U();X.prototype={C:function(a,b){this.element="span"===b?F(b):T.createElementNS(Ga,b);this.qa=a;this.pf={}},opacity:1,T:function(a,b,c){b=w(b,Ja,!0);cb(this);b?(b=k(b),c&&(b.complete=
c),Ob(this,a,b)):(this.d(a),c&&c())},d:function(a,b){var c,d,e,g,h=this.element,k=h.nodeName.toLowerCase(),m=this.qa,p,s=this.pf,q=this.gh,u,y,w=this;n(a)&&v(b)&&(c=a,a={},a[c]=b);if(n(a))c=a,"circle"===k?c={x:"cx",y:"cy"}[c]||c:"strokeWidth"===c&&(c="stroke-width"),w=r(h,c)||this[c]||0,"d"!==c&&"visibility"!==c&&(w=parseFloat(w));else{for(c in a)if(p=!1,d=a[c],e=s[c]&&s[c].call(this,d,c),!1!==e){e!==K&&(d=e);if("d"===c)d&&d.join&&(d=d.join(" ")),/(NaN| {2}|^$)/.test(d)&&(d="M 0 0");else if("x"===
c&&"text"===k)for(e=0;e<h.childNodes.length;e++)g=h.childNodes[e],r(g,"x")===r(h,"x")&&r(g,"x",d);else if(!this.rotation||"x"!==c&&"y"!==c)if("fill"===c)d=m.color(d,h,c);else if("circle"!==k||"x"!==c&&"y"!==c)if("rect"===k&&"r"===c)r(h,{Au:d,Bu:d}),p=!0;else if("translateX"===c||"translateY"===c||"rotation"===c||"verticalAlign"===c||"scaleX"===c||"scaleY"===c)p=y=!0;else if("stroke"===c)d=m.color(d,h,c);else if("dashstyle"===c)if(c="stroke-dasharray",d=d&&d.toLowerCase(),"solid"===d)d=ja;else{if(d){d=
d.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(e=d.length;e--;)d[e]=l(d[e])*a["stroke-width"];d=d.join(",")}}else"width"===c?d=l(d):"align"===c?(c="text-anchor",d={left:"start",Ac:"middle",right:"end"}[d]):"title"===c&&((e=h.getElementsByTagName("title")[0])||(e=T.createElementNS(Ga,"title"),h.appendChild(e)),
e.textContent=d);else c={x:"cx",y:"cy"}[c]||c;else y=!0;"strokeWidth"===c&&(c="stroke-width");if("stroke-width"===c||"stroke"===c)this[c]=d,this.stroke&&this["stroke-width"]?(r(h,"stroke",this.stroke),r(h,"stroke-width",this["stroke-width"]),this.on=!0):"stroke-width"===c&&(0===d&&this.on)&&(h.removeAttribute("stroke"),this.on=!1),p=!0;this.kh&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(u||(this.qp(a),u=!0),p=!0);if(q&&/^(width|height|visibility|x|y|d|transform)$/.test(c))for(e=
q.length;e--;)r(q[e],c,"height"===c?E(d-(q[e].$q||0),0):d);("width"===c||"height"===c)&&("rect"===k&&0>d)&&(d=0);this[c]=d;"text"===c?(d!==this.nl&&delete this.De,this.nl=d,this.Be&&m.zj(this)):p||r(h,c,d)}y&&this.dg()}return w},p:function(a){r(this.element,"class",r(this.element,"class")+" "+a);return this},qp:function(a){var b=this;B("x y r start end width height innerR anchorX anchorY".split(" "),function(c){b[c]=w(a[c],b[c])});b.d({ib:b.qa.df[b.kh](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.d("clip-path",
a?"url("+this.qa.url+"#"+a.id+")":ja)},uf:function(a,b,c,d,e){var g,h={},k={},m;a=a||this.lp||this.d&&this.d("stroke-width")||0;m=H(a)%2/2;k.x=ka(b||this.x||0)+m;k.y=ka(c||this.y||0)+m;k.width=ka((d||this.width||0)-2*m);k.height=ka((e||this.height||0)-2*m);k.lp=a;for(g in k)this[g]!==k[g]&&(this[g]=h[g]=k[g]);return h},O:function(a){function b(a,c){return"-"+c.toLowerCase()}var c=this.element,d=a&&a.width&&"text"===c.nodeName.toLowerCase(),e,h="";a&&a.color&&(a.fill=a.color);this.re=a=g(this.re,a);
sa&&d&&delete a.width;if(Oa&&!ra)d&&delete a.width,t(this.element,a);else{for(e in a)h+=e.replace(/([A-Z])/g,b)+":"+a[e]+";";r(c,"style",h)}d&&this.Be&&this.qa.zj(this);return this},s:function(a,b){vb&&"click"===a&&(this.element.ontouchstart=function(a){a.preventDefault();b()});this.element["on"+a]=b;return this},Mu:function(a){this.element.Co=a;return this},translate:function(a,b){return this.d({Ic:a,hc:b})},qk:function(){this.jb=!0;this.dg();return this},sn:function(a){var b=this.element;if(b=a&&
"SPAN"===b.tagName&&a.width)delete a.width,this.tp=b,this.dg();this.re=g(this.re,a);t(this.element,a);return this},us:function(){var a=this.element,b=this.De;b||("text"===a.nodeName&&(a.style.position="absolute"),b=this.De={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight});return b},nk:function(){if(this.Be){var a=this.qa,b=this.element,c=this.Ic||0,d=this.hc||0,e=this.x||0,g=this.y||0,h=this.textAlign||"left",k={left:0,Ac:0.5,right:1}[h],m=h&&"left"!==h,n=this.gh;t(b,{marginLeft:c,
marginTop:d});n&&B(n,function(a){t(a,{marginLeft:c+1,marginTop:d+1})});this.jb&&B(b.childNodes,function(c){a.yn(c,b)});if("SPAN"===b.tagName){var p,s,n=this.rotation,q,r=0,u=1,r=0,y;q=l(this.tp);var C=this.Nv||0;y=this.Ov||0;var G=[n,h,b.innerHTML,this.tp].join();p={};G!==this.Nq&&(v(n)&&(a.Og?(C=Oa?"-ms-transform":Lb?"-webkit-transform":ub?"MozTransform":ec?"-o-transform":"",p[C]=p.transform="rotate("+n+"deg)"):(r=n*sb,u=qa(r),r=va(r),p.filter=n?["progid:DXImageTransform.Microsoft.Matrix(M11=",u,
", M12=",-r,", M21=",r,", M22=",u,", sizingMethod='auto expand')"].join(""):ja),t(b,p)),p=w(this.hy,b.offsetWidth),s=w(this.gy,b.offsetHeight),p>q&&/[ \-]/.test(b.textContent||b.innerText)&&(t(b,{width:q+"px",display:"block",whiteSpace:"normal"}),p=q),q=a.Sj(b.style.fontSize).vj,y=0>u*r,C=(0>u&&-p)+r*q*(y?1-k:k),y=(0>r&&-s)-u*q*(n?y?k:1-k:1),m&&(C-=p*k*(0>u?-1:1),n&&(y-=s*k*(0>r?-1:1)),t(b,{textAlign:h})),this.Nv=C,this.Ov=y);t(b,{left:e+C+"px",top:g+y+"px"});Lb&&(s=b.offsetHeight);this.Nq=G}}else this.am=
!0},dg:function(){var a=this.Ic||0,b=this.hc||0,c=this.Mo,d=this.zi,e=this.jb,g=this.rotation;e&&(a+=this.d("width"),b+=this.d("height"));a=["translate("+a+","+b+")"];e?a.push("rotate(90) scale(-1,1)"):g&&a.push("rotate("+g+" "+(this.x||0)+" "+(this.y||0)+")");(v(c)||v(d))&&a.push("scale("+w(c,1)+" "+w(d,1)+")");a.length&&r(this.element,"transform",a.join(" "))},align:function(a,b,c){var d,e,g,h,k={};e=this.qa;g=e.ng;if(a){if(this.oj=a,this.$l=b,!c||n(c))this.bm=d=c||"renderer",u(g,this),g.push(this),
c=null}else a=this.oj,b=this.$l,d=this.bm;c=w(c,e[d],e);d=a.align;e=a.verticalAlign;g=(c.x||0)+(a.x||0);h=(c.y||0)+(a.y||0);if("right"===d||"center"===d)g+=(c.width-(a.width||0))/{right:1,Ac:2}[d];k[b?"translateX":"x"]=H(g);if("bottom"===e||"middle"===e)h+=(c.height-(a.height||0))/({bottom:1,Xn:2}[e]||1);k[b?"translateY":"y"]=H(h);this[this.Wt?"animate":"attr"](k);this.Wt=!0;this.Zl=k;return this},nc:function(){var a=this.De,b=this.qa,c,d=this.rotation;c=this.element;var e=this.re,h=d*sb;if(!a){if(c.namespaceURI===
Ga||b.Fg){try{a=c.nc?g({},c.nc()):{width:c.offsetWidth,height:c.offsetHeight}}catch(k){}if(!a||0>a.width)a={width:0,height:0}}else a=this.us();b.Og&&(b=a.width,c=a.height,Oa&&(e&&"11px"===e.fontSize&&"22.7"===c.toPrecision(3))&&(a.height=c=14),d&&(a.width=ma(c*va(h))+ma(b*qa(h)),a.height=ma(c*qa(h))+ma(b*va(h))));this.De=a}return a},show:function(){return this.d({visibility:"visible"})},P:function(){return this.d({visibility:"hidden"})},Um:function(a){var b=this;b.T({opacity:0},{duration:a||150,complete:function(){b.P()}})},
add:function(a){var b=this.qa,c=a||b,d=c.element||b.Mc,e=d.childNodes,g=this.element,h=r(g,"zIndex"),k;a&&(this.Qt=a);this.Rt=a&&a.jb;void 0!==this.nl&&b.zj(this);h&&(c.ms=!0,h=l(h));if(c.ms)for(c=0;c<e.length;c++)if(a=e[c],b=r(a,"zIndex"),a!==g&&(l(b)>h||!v(h)&&v(b))){d.insertBefore(g,a);k=!0;break}k||d.appendChild(g);this.Be=!0;W(this,"add");return this},Xk:function(a){var b=a.parentNode;b&&b.removeChild(a)},ea:function(){var a=this,b=a.element||{},c=a.gh,d,e;b.onclick=b.onmouseout=b.onmouseover=
b.onmousemove=b.v=null;cb(a);a.Ej&&(a.Ej=a.Ej.ea());if(a.Zb){for(e=0;e<a.Zb.length;e++)a.Zb[e]=a.Zb[e].ea();a.Zb=null}a.Xk(b);c&&B(c,function(b){a.Xk(b)});a.bm&&u(a.qa.ng,a);for(d in a)delete a[d];return null},Na:function(a,b,c){var d=[],e,g,h=this.element,k,m,l,n;if(a){m=w(a.width,3);l=(a.opacity||0.15)/m;n=this.Rt?"(-1,-1)":"("+w(a.offsetX,1)+", "+w(a.offsetY,1)+")";for(e=1;e<=m;e++)g=h.cloneNode(0),k=2*m+1-2*e,r(g,{nz:"true",stroke:a.color||"black","stroke-opacity":l*e,"stroke-width":k,transform:"translate"+
n,fill:ja}),c&&(r(g,"height",E(r(g,"height")-k,0)),g.$q=k),b?b.element.appendChild(g):h.parentNode.insertBefore(g,h),d.push(g);this.gh=d}return this}};c.prototype={Si:X,C:function(a,b,c,d){var e=location,g;g=this.createElement("svg").d({PB:Ga,version:"1.1"});a.appendChild(g.element);this.Og=!0;this.Mc=g.element;this.rg=g;this.ng=[];this.url=(ub||Lb)&&T.getElementsByTagName("base").length?e.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(T.createTextNode("Created with Highcharts 3.0.2"));
this.Kh=this.createElement("defs").add();this.Fg=d;this.ck={};this.Wd(b,c,!1);var h;ub&&a.getBoundingClientRect&&(this.mp=b=function(){t(a,{left:0,top:0});h=a.getBoundingClientRect();t(a,{left:ya(h.left)-h.left+"px",top:ya(h.top)-h.top+"px"})},b(),da(fa,"resize",b))},je:function(){return!this.rg.nc().width},ea:function(){var a=this.Kh;this.Mc=null;this.rg=this.rg.ea();Fa(this.ck||{});this.ck=null;a&&(this.Kh=a.ea());this.mp&&ua(fa,"resize",this.mp);return this.ng=null},createElement:function(a){var b=
new this.Si;b.C(this,a);return b},Oa:f(),zj:function(a){for(var b=a.element,c=this,d=c.Fg,e=w(a.nl,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),g=b.childNodes,h=/style="([^"]+)"/,k=/href="([^"]+)"/,m=r(b,"x"),n=a.re,p=n&&n.width&&l(n.width),s=n&&n.lineHeight,q=g.length;q--;)b.removeChild(g[q]);p&&!a.Be&&this.Mc.appendChild(b);""===
e[e.length-1]&&e.pop();B(e,function(e,g){var l,zb=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");l=e.split("|||");B(l,function(e){if(""!==e||1===l.length){var kb={},q=T.createElementNS(Ga,"tspan"),u;h.test(e)&&(u=e.match(h)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),r(q,"style",u));k.test(e)&&!d&&(r(q,"onclick",'location.href="'+e.match(k)[1]+'"'),t(q,{cursor:"pointer"}));e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");q.appendChild(T.createTextNode(e));
zb?kb.by=0:kb.x=m;r(q,kb);!zb&&g&&(!ra&&d&&t(q,{display:"block"}),r(q,"dy",s||c.Sj(/px$/.test(q.style.fontSize)?q.style.fontSize:n.fontSize).Ne));b.appendChild(q);zb++;if(p){e=e.replace(/([^\^])-/g,"$1- ").split(" ");for(var y,v=[];e.length||v.length;)delete a.De,y=a.nc().width,(kb=y>p)&&1!==e.length?(q.removeChild(q.firstChild),v.unshift(e.pop())):(e=v,v=[],e.length&&(q=T.createElementNS(Ga,"tspan"),r(q,{cy:s||16,x:m}),u&&r(q,"style",u),b.appendChild(q),y>p&&(p=y))),e.length&&q.appendChild(T.createTextNode(e.join(" ").replace(/- /g,
"-")))}}})})},button:function(a,b,c,d,e,h,m){var l=this.label(a,b,c,null,null,null,null,null,"button"),n=0,p,s,q,r,u;a={Gp:0,Jp:0,Hp:0,Kp:1};e=k({"stroke-width":1,stroke:"#CCCCCC",fill:{Pg:a,Zb:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},sb:2,padding:5,style:{color:"black"}},e);q=e.style;delete e.style;h=k(e,{stroke:"#68A",fill:{Pg:a,Zb:[[0,"#FFF"],[1,"#ACF"]]}},h);r=h.style;delete h.style;m=k(e,{stroke:"#68A",fill:{Pg:a,Zb:[[0,"#9BD"],[1,"#CDF"]]}},m);u=m.style;delete m.style;da(l.element,"mouseenter",function(){l.d(h).O(r)});
da(l.element,"mouseleave",function(){p=[e,h,m][n];s=[q,r,u][n];l.d(p).O(s)});l.cb=function(a){(n=a)?2===a&&l.d(m).O(u):l.d(e).O(q)};return l.s("click",function(){d.call(l)}).d(e).O(g({cursor:"default"},q))},Mj:function(a,b){a[1]===a[4]&&(a[1]=a[4]=H(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=H(a[2])+b%2/2);return a},path:function(a){var b={fill:ja};m(a)?b.ib=a:h(a)&&g(b,a);return this.createElement("path").d(b)},Bj:function(a,b,c){a=h(a)?a:{x:a,y:b,sb:c};return this.createElement("circle").d(a)},arc:function(a,
b,c,d,e,g){h(a)&&(b=a.y,c=a.sb,d=a.Zh,e=a.start,g=a.end,a=a.x);return this.eb("arc",a||0,b||0,c||0,c||0,{Zh:d||0,start:e||0,end:g||0})},rect:function(a,b,c,d,e,g){e=h(a)?a.sb:e;e=this.createElement("rect").d({Au:e,Bu:e,fill:ja});return e.d(h(a)?a:e.uf(g,a,b,E(c,0),E(d,0)))},Wd:function(a,b,c){var d=this.ng,e=d.length;this.width=a;this.height=b;for(this.rg[w(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},mc:function(a){var b=this.createElement("g");return v(a)?b.d({"class":"highcharts-"+
a}):b},ok:function(a,b,c,d,e){var h={tA:ja};1<arguments.length&&g(h,{x:b,y:c,width:d,height:e});h=this.createElement("image").d(h);h.element.setAttributeNS?h.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):h.element.setAttribute("hc-svg-href",a);return h},eb:function(a,b,c,d,e,h){var k,m=this.df[a],m=m&&m(H(b),H(c),d,e,h),l=/^url\((.*?)\)$/,n,p;m?(k=this.path(m),g(k,{kh:a,x:b,y:c,width:d,height:e}),h&&g(k,h)):l.test(a)&&(p=function(a,b){a.element&&(a.d({width:b[0],height:b[1]}),a.$l||
a.translate(H((d-b[0])/2),H((e-b[1])/2)))},n=a.match(l)[1],a=gc[n],k=this.ok(n).d({x:b,y:c}),k.Rs=!0,a?p(k,a):(k.d({width:0,height:0}),F("img",{onload:function(){p(k,gc[n]=[this.width,this.height])},src:n})));return k},df:{Bj:function(a,b,c,d){var e=0.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},av:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},BB:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,
d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},Xx:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var g=e.start;c=e.sb||c||d;var h=e.end-0.001;d=e.Zh;var k=e.open,m=qa(g),l=va(g),n=qa(h),h=va(h);e=e.end-g<Qa?0:1;return["M",a+c*m,b+c*l,"A",c,c,0,e,1,a+c*n,b+c*h,k?"M":"L",a+d*n,b+d*h,"A",d,d,0,e,0,a+d*m,b+d*l,k?"":"Z"]}},kc:function(a,b,c,d){var e="highcharts-"+Mb++,g=this.createElement("clipPath").d({id:e}).add(this.Kh);a=this.rect(a,b,c,d,0).add(g);
a.id=e;a.Ej=g;return a},color:function(a,b,c){var e=this,g,h=/^rgba/,l,n,p,s,q,u,y,w=[];a&&a.Pg?l="linearGradient":a&&a.Bo&&(l="radialGradient");if(l){c=a[l];n=e.ck;s=a.Zb;b=b.Co;m(c)&&(a[l]=c={Gp:c[0],Jp:c[1],Hp:c[2],Kp:c[3],hn:"userSpaceOnUse"});"radialGradient"===l&&b&&!v(c.hn)&&(c=k(c,{Em:b[0]-b[2]/2+c.Em*b[2],Fm:b[1]-b[2]/2+c.Fm*b[2],sb:c.sb*b[2],hn:"userSpaceOnUse"}));for(y in c)"id"!==y&&w.push(y,c[y]);for(y in s)w.push(s[y]);w=w.join(",");n[w]?a=n[w].id:(c.id=a="highcharts-"+Mb++,n[w]=p=e.createElement(l).d(c).add(e.Kh),
p.Zb=[],B(s,function(a){h.test(a[1])?(g=d(a[1]),q=g.get("rgb"),u=g.get("a")):(q=a[1],u=1);a=e.createElement("stop").d({offset:a[0],"stop-color":q,"stop-opacity":u}).add(p);p.Zb.push(a)}));return"url("+e.url+"#"+a+")"}return h.test(a)?(g=d(a),r(b,c+"-opacity",g.get("a")),g.get("rgb")):(b.removeAttribute(c+"-opacity"),a)},text:function(a,b,c,d){var e=ha.F.style,g=sa||!ra&&this.Fg;if(d&&!this.Fg)return this.u(a,b,c);b=H(w(b,0));c=H(w(c,0));a=this.createElement("text").d({x:b,y:c,text:a}).O({fontFamily:e.fontFamily,
fontSize:e.fontSize});g&&a.O({position:"absolute"});a.x=b;a.y=c;return a},u:function(a,b,c){var d=ha.F.style,e=this.createElement("span"),h=e.pf,k=e.element,m=e.qa;h.text=function(a){a!==k.innerHTML&&delete this.De;k.innerHTML=a;return!1};h.x=h.y=h.align=function(a,b){"align"===b&&(b="textAlign");e[b]=a;e.nk();return!1};e.d({text:a,x:H(b),y:H(c)}).O({position:"absolute",whiteSpace:"nowrap",fontFamily:d.fontFamily,fontSize:d.fontSize});e.O=e.sn;m.Og&&(e.add=function(a){var b,c=m.Mc.parentNode,d=[];
if(a){if(b=a.Nm,!b){for(;a;)d.push(a),a=a.Qt;B(d.reverse(),function(a){var d;b=a.Nm=a.Nm||F(Ia,{className:r(a.element,"class")},{position:"absolute",left:(a.Ic||0)+"px",top:(a.hc||0)+"px"},b||c);d=b.style;g(a.pf,{Ic:function(a){d.left=a+"px"},hc:function(a){d.top=a+"px"},visibility:function(a,b){d[b]=a}})})}}else b=c;b.appendChild(k);e.Be=!0;e.am&&e.nk();return e});return e},Sj:function(a){a=l(a||11);a=24>a?a+4:H(1.2*a);var b=H(0.8*a);return{Ne:a,vj:b}},label:function(a,b,c,d,e,h,m,l,n){function p(){var a,
b;a=w.element.style;C=(void 0===M||void 0===P||y.re.textAlign)&&w.nc();y.width=(M||C.width||0)+2*z+O;y.height=(P||C.height||0)+2*z;S=z+u.Sj(a&&a.fontSize).vj;ia&&(t||(a=H(-G*z),b=l?-S:0,y.Mc=t=d?u.eb(d,a,b,y.width,y.height):u.rect(a,b,y.width,y.height,0,J[ic]),t.add(y)),t.Rs||t.d(k({width:y.width,height:y.height},J)),J=null)}function s(){var a=y.re,a=a&&a.textAlign,b=O+z*(1-G),c;c=l?0:S;!v(M)||"center"!==a&&"right"!==a||(b+={Ac:0.5,right:1}[a]*(M-C.width));b===w.x&&c===w.y||w.d({x:b,y:c});w.x=b;w.y=
c}function q(a,b){t?t.d(a,b):J[a]=b}function r(){w.add(y);y.d({text:a,x:b,y:c});t&&v(e)&&y.d({qj:e,rj:h})}var u=this,y=u.mc(n),w=u.text("",0,0,m).d({zIndex:1}),t,C,G=0,z=3,O=0,M,P,N,Q,U=0,J={},S;m=y.pf;var ia;da(y,"add",r);m.width=function(a){M=a;return!1};m.height=function(a){P=a;return!1};m.padding=function(a){v(a)&&a!==z&&(z=a,s());return!1};m.paddingLeft=function(a){v(a)&&a!==O&&(O=a,s());return!1};m.align=function(a){G={left:0,Ac:0.5,right:1}[a];return!1};m.text=function(a,b){w.d(b,a);p();s();
return!1};m[ic]=function(a,b){ia=!0;U=a%2/2;q(b,a);return!1};m.stroke=m.fill=m.sb=function(a,b){"fill"===b&&(ia=!0);q(b,a);return!1};m.qj=function(a,b){e=a;q(b,a+U-N);return!1};m.rj=function(a,b){h=a;q(b,a-Q);return!1};m.x=function(a){y.x=a;a-=G*((M||C.width)+z);N=H(a);y.d("translateX",N);return!1};m.y=function(a){Q=y.y=H(a);y.d("translateY",Q);return!1};var F=y.O;return g(y,{O:function(a){if(a){var b={};a=k(a);B("fontSize fontWeight fontFamily color lineHeight width textDecoration".split(" "),function(c){a[c]!==
K&&(b[c]=a[c],delete a[c])});w.O(b)}return F.call(y,a)},nc:function(){return{width:C.width+2*z,height:C.height+2*z,x:C.x-z,y:C.y-z}},Na:function(a){t&&t.Na(a);return y},ea:function(){ua(y,"add",r);ua(y.element,"mouseenter");ua(y.element,"mouseleave");w&&(w=w.ea());t&&(t=t.ea());X.prototype.ea.call(y);y=u=p=s=q=r=null}})}};bb=c;var ea;if(!ra&&!sa){Highcharts.Nw=ea={C:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Ia;("shape"===b||e)&&d.push("left:0;top:0;width:1px;height:1px;");
d.push("visibility: ",e?"hidden":"visible");c.push(' style="',d.join(""),'"/>');b&&(c=e||"span"===b||"img"===b?c.join(""):a.Tf(c),this.element=F(c));this.qa=a;this.pf={}},add:function(a){var b=this.qa,c=this.element,d=b.Mc,d=a?a.element||a:d;a&&a.jb&&b.yn(c,d);d.appendChild(c);this.Be=!0;this.am&&!this.Ux&&this.dg();W(this,"add");return this},dg:X.prototype.nk,d:function(a,b){var c,d,e,g=this.element||{},h=g.style,k=g.nodeName,m=this.qa,l=this.kh,s,q=this.gh,y,u=this.pf,w=this;n(a)&&v(b)&&(c=a,a=
{},a[c]=b);if(n(a))c=a,w="strokeWidth"===c||"stroke-width"===c?this.strokeweight:this[c];else for(c in a)if(d=a[c],y=!1,e=u[c]&&u[c].call(this,d,c),!1!==e&&null!==d){e!==K&&(d=e);if(l&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c))s||(this.qp(a),s=!0),y=!0;else if("d"===c){d=d||[];this.ib=d.join(" ");e=d.length;y=[];for(var t;e--;)p(d[e])?y[e]=H(10*d[e])-5:"Z"===d[e]?y[e]="x":(y[e]=d[e],!d.Ks||"wa"!==d[e]&&"at"!==d[e])||(t="wa"===d[e]?1:-1,y[e+5]===y[e+7]&&(y[e+7]-=t),y[e+6]===
y[e+8]&&(y[e+8]-=t));d=y.join(" ")||"x";g.path=d;if(q)for(e=q.length;e--;)q[e].path=q[e].Cm?this.Dm(d,q[e].Cm):d;y=!0}else if("visibility"===c){if(q)for(e=q.length;e--;)q[e].style[c]=d;"DIV"===k&&(d="hidden"===d?"-999em":0,tb||(h[c]=d?"visible":"hidden"),c="top");h[c]=d;y=!0}else"zIndex"===c?(d&&(h[c]=d),y=!0):-1!==Aa(c,["x","y","width","height"])?(this[c]=d,"x"===c||"y"===c?c={x:"left",y:"top"}[c]:d=E(0,d),this.Cp?(this[c]=d,this.Cp()):h[c]=d,y=!0):"class"===c&&"DIV"===k?g.className=d:"stroke"===
c?(d=m.color(d,g,c),c="strokecolor"):"stroke-width"===c||"strokeWidth"===c?(g.stroked=d?!0:!1,c="strokeweight",this[c]=d,p(d)&&(d+="px")):"dashstyle"===c?((g.getElementsByTagName("stroke")[0]||F(m.Tf(["<stroke/>"]),null,null,g))[c]=d||"solid",this.wf=d,y=!0):"fill"===c?"SPAN"===k?h.color=d:"IMG"!==k&&(g.filled=d!==ja?!0:!1,d=m.color(d,g,c,this),c="fillcolor"):"opacity"===c?y=!0:"shape"===k&&"rotation"===c?(this[c]=d,g.style.left=-H(va(d*sb)+1)+"px",g.style.top=H(qa(d*sb))+"px"):"translateX"===c||
"translateY"===c||"rotation"===c?(this[c]=d,this.dg(),y=!0):"text"===c&&(this.De=null,g.innerHTML=d,y=!0);y||(tb?g[c]=d:r(g,c,d))}return w},clip:function(a){var b=this,c;a?(c=a.Vn,u(c,b),c.push(b),b.Lh=function(){u(c,b)},a=a.Zm(b)):(b.Lh&&b.Lh(),a={clip:tb?"inherit":"rect(auto)"});return b.O(a)},O:X.prototype.sn,Xk:function(a){a.parentNode&&y(a)},ea:function(){this.Lh&&this.Lh();return X.prototype.ea.apply(this)},s:function(a,b){this.element["on"+a]=function(){var a=fa.event;a.target=a.srcElement;
b(a)};return this},Dm:function(a,b){var c;a=a.split(/[ ,]/);c=a.length;if(9===c||11===c)a[c-4]=a[c-2]=l(a[c-2])-10*b;return a.join(" ")},Na:function(a,b,c){var d=[],e,g=this.element,h=this.qa,k,m=g.style,n,p=g.path,s,q,y,r;p&&"string"!==typeof p.value&&(p="x");q=p;if(a){y=w(a.width,3);r=(a.opacity||0.15)/y;for(e=1;3>=e;e++)s=2*y+1-2*e,c&&(q=this.Dm(p.value,s+0.5)),n=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',q,'" coordsize="10 10" style="',g.style.cssText,'" />'],k=F(h.Tf(n),
null,{left:l(m.left)+w(a.offsetX,1),top:l(m.top)+w(a.offsetY,1)}),c&&(k.Cm=s+1),n=['<stroke color="',a.color||"black",'" opacity="',r*e,'"/>'],F(h.Tf(n),null,null,k),b?b.element.appendChild(k):g.parentNode.insertBefore(k,g),d.push(k);this.gh=d}return this}};ea=L(X,ea);var Ba={Si:ea,Qs:-1<Ka.indexOf("MSIE 8.0"),C:function(a,b,c){var d,e;this.ng=[];d=this.createElement(Ia);e=d.element;e.style.position="relative";a.appendChild(d.element);this.Ys=!0;this.Mc=e;this.rg=d;this.Wd(b,c,!1);T.namespaces.Ty||
(T.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),T.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},je:function(){return!this.Mc.offsetWidth},kc:function(a,b,c,d){var e=this.createElement(),k=h(a);return g(e,{Vn:[],left:k?a.x:a,top:k?a.y:b,width:k?a.width:c,height:k?a.height:d,Zm:function(a){var b=a.element,c=b.nodeName;a=a.jb;var d=this.top-("shape"===c?b.offsetTop:0),e=this.left,b=e+this.width,I=d+this.height,
d={clip:"rect("+H(a?e:d)+"px,"+H(a?I:b)+"px,"+H(a?b:I)+"px,"+H(a?d:e)+"px)"};!a&&tb&&"DIV"===c&&g(d,{width:b+"px",height:I+"px"});return d},Cp:function(){B(e.Vn,function(a){a.O(e.Zm(a))})}})},color:function(a,b,c,e){var g=this,h,k=/^rgba/,m,l,n=ja;a&&a.Pg?l="gradient":a&&a.Bo&&(l="pattern");if(l){var p,s,q=a.Pg||a.Bo,y,r,u,v,w,t="";a=a.Zb;var C,G=[],z=function(){m=['<fill colors="'+G.join(",")+'" opacity="',u,'" o:opacity2="',r,'" type="',l,'" ',t,'focus="100%" method="any" />'];F(g.Tf(m),null,null,
b)};y=a[0];C=a[a.length-1];0<y[0]&&a.unshift([0,y[1]]);1>C[0]&&a.push([1,C[1]]);B(a,function(a,b){k.test(a[1])?(h=d(a[1]),p=h.get("rgb"),s=h.get("a")):(p=a[1],s=1);G.push(100*a[0]+"% "+p);b?(u=s,v=p):(r=s,w=p)});if("fill"===c)if("gradient"===l)c=q.Gp||q[0]||0,a=q.Jp||q[1]||0,y=q.Hp||q[2]||0,q=q.Kp||q[3]||0,t='angle="'+(90-180*ba.atan((q-a)/(y-c))/Qa)+'"',z();else{var n=q.sb,O=2*n,M=2*n,P=q.Em,N=q.Fm,Q=b.Co,U,n=function(){Q&&(U=e.nc(),P+=(Q[0]-U.x)/U.width-0.5,N+=(Q[1]-U.y)/U.height-0.5,O*=Q[2]/U.width,
M*=Q[2]/U.height);t='src="'+ha.global.mq+'" size="'+O+","+M+'" origin="0.5,0.5" position="'+P+","+N+'" color2="'+w+'" ';z()};e.Be?n():da(e,"add",n);n=v}else n=p}else k.test(a)&&"IMG"!==b.tagName?(h=d(a),m=["<",c,' opacity="',h.get("a"),'"/>'],F(this.Tf(m),null,null,b),n=h.get("rgb")):(n=b.getElementsByTagName(c),n.length&&(n[0].opacity=1,n[0].type="solid"),n=a);return n},Tf:function(a){var b=this.Qs;a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?
a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:c.prototype.u,path:function(a){var b={coordsize:"10 10"};m(a)?b.ib=a:h(a)&&g(b,a);return this.createElement("shape").d(b)},Bj:function(a,b,c){var d=this.eb("circle");h(a)&&(c=a.sb,b=a.y,a=a.x);d.Os=!0;return d.d({x:a,y:b,width:2*c,height:2*c})},mc:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+
a});return this.createElement(Ia).d(b)},ok:function(a,b,c,d,e){var g=this.createElement("img").d({src:a});1<arguments.length&&g.d({x:b,y:c,width:d,height:e});return g},rect:function(a,b,c,d,e,g){h(a)&&(b=a.y,c=a.width,d=a.height,g=a.lp,a=a.x);var k=this.eb("rect");k.sb=e;return k.d(k.uf(g,a,b,E(c,0),E(d,0)))},yn:function(a,b){var c=b.style;t(a,{vy:"x",left:l(c.width)-1,top:l(c.height)-1,rotation:-90})},df:{arc:function(a,b,c,d,e){var g=e.start,h=e.end,k=e.sb||c||d;c=e.Zh;d=qa(g);var m=va(g),l=qa(h),
n=va(h);if(0===h-g)return["x"];g=["wa",a-k,b-k,a+k,b+k,a+k*d,b+k*m,a+k*l,b+k*n];e.open&&!c&&g.push("e","M",a,b);g.push("at",a-c,b-c,a+c,b+c,a+c*l,b+c*n,a+c*d,b+c*m,"x","e");g.Ks=!0;return g},Bj:function(a,b,c,d,e){e&&e.Os&&(a-=c/2,b-=d/2);return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,d,e,g){var h=a+d,k=b+e,m;v(g)&&g.sb?(m=aa(g.sb,d,e),h=["M",a+m,b,"L",h-m,b,"wa",h-2*m,b,h,b+2*m,h-m,b,h,b+m,"L",h,k-m,"wa",h-2*m,k-2*m,h,k,h,k-m,h-m,k,"L",a+m,k,"wa",a,k-2*m,a+2*m,k,a+m,k,a,k-m,
"L",a,b+m,"wa",a,b,a+2*m,b+2*m,a,b+m,a+m,b,"x","e"]):h=c.prototype.df.av.apply(0,arguments);return h}}};Highcharts.Ow=ea=function(){this.C.apply(this,arguments)};ea.prototype=k(c.prototype,Ba);bb=ea}var jc;sa&&(Highcharts.Xv=ea=function(){Ga="http://www.w3.org/1999/xhtml"},ea.prototype.df={},jc=function(){function a(){var c=b.length,d;for(d=0;d<c;d++)b[d]();b=[]}var b=[];return{push:function(c,d){0===b.length&&uc(d,a);b.push(c)}}}(),bb=ea);Pa.prototype={Wl:function(){var a=this.axis,b=a.options,c=
a.F,d=a.oc,e=a.Nc,h=a.j[0]&&a.j[0].fo,k=this.Tc,m=b.labels,l=a.pd,d=d&&e&&!m.step&&!m.bg&&!m.rotation&&c.wc/l.length||!d&&(c.Fk||c.wc/2),n=k===l[0],s=k===l[l.length-1],h=e?w(e[k],h&&h[k],k):k,e=this.label,l=l.info,y;a.Mg&&l&&(y=b.Ag[l.ss[k]||l.yv]);this.sk=n;this.tk=s;b=a.wk.call({axis:a,F:c,sk:n,tk:s,cr:y,value:a.ec?P(q(h)):h});k=d&&{width:E(1,H(d-2*(m.padding||10)))+"px"};k=g(k,m.style);v(e)?e&&e.d({text:b}).O(k):(d={align:m.align},p(m.rotation)&&(d.rotation=m.rotation),this.label=v(b)&&m.enabled?
c.qa.text(b,0,0,m.cd).d(d).O(k).add(a.it):null)},Ur:function(){var a=this.label,b=this.axis;return a?(this.gt=a.nc())[b.oc?"height":"width"]:0},bn:function(){var a=this.axis.options.labels,b=this.gt.width,a=b*{left:0,Ac:0.5,right:1}[a.align]-a.x;return[-a,b-a]},ek:function(a,b){var c=!0,d=this.axis,e=d.F,g=this.sk,h=this.tk,k=b.x,m=d.Cd,l=d.pd;if(g||h){var n=this.bn(),p=n[0],n=n[1],e=e.qb,s=e+d.Lb,l=(d=d.Ki[l[a+(g?1:-1)]])&&d.label.Ip&&d.label.Ip.x+d.bn()[g?0:1];g&&!m||h&&m?k+p<e&&(k=e-p,d&&k+n>l&&
(c=!1)):k+n>s&&(k=s-n,d&&k+p<l&&(c=!1));b.x=k}return c},Cf:function(a,b,c,d){var e=this.axis,g=e.F,h=d&&g.Ek||g.Bc;return{x:a?e.translate(b+c,null,null,d)+e.ul:e.left+e.offset+(e.Ad?(d&&g.ko||g.Cc)-e.right-e.left:0),y:a?h-e.bottom+e.offset-(e.Ad?e.height:0):h-e.translate(b+c,null,null,d)-e.ul}},Tr:function(a,b,c,d,e,g,h,k){var m=this.axis,n=m.ef,p=m.Cd,m=m.bg;a=a+e.x-(g&&d?g*n*(p?-1:1):0);b=b+e.y-(g&&!d?g*n*(p?1:-1):0);v(e.y)||(b+=0.9*l(c.re.lineHeight)-c.nc().height/2);m&&(b+=16*(h/(k||1)%m));return{x:a,
y:b}},Xr:function(a,b,c,d,e,g){return g.Mj(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},tb:function(a,b,c){var d=this.axis,e=d.options,g=d.F.qa,h=d.oc,k=this.type,m=this.label,l=this.Tc,n=e.labels,p=this.ks,s=k?k+"Grid":"grid",q=k?k+"Tick":"tick",y=e[s+"LineWidth"],r=e[s+"LineColor"],u=e[s+"LineDashStyle"],v=e[q+"Length"],s=e[q+"Width"]||0,t=e[q+"Color"],C=e[q+"Position"],q=this.st,G=n.step,z=!0,O=d.vp,M=this.Cf(h,l,O,b),P=M.x,M=M.y,N=h&&P===d.Tc||!h&&M===d.Tc+d.Lb?-1:1,Q=d.bg;this.Lg=!0;if(y&&(l=d.Gg(l+
O,y*N,b,!0),p===K&&(p={stroke:r,"stroke-width":y},u&&(p.wf=u),k||(p.zIndex=1),b&&(p.opacity=0),this.ks=p=y?g.path(l).d(p).add(d.js):null),!b&&p&&l))p[this.jd?"attr":"animate"]({ib:l,opacity:c});s&&v&&("inside"===C&&(v=-v),d.Ad&&(v=-v),b=this.Xr(P,M,v,s*N,h,g),q?q.T({ib:b,opacity:c}):this.st=g.path(b).d({stroke:t,"stroke-width":s,opacity:c}).add(d.yh));m&&!isNaN(P)&&(m.Ip=M=this.Tr(P,M,m,h,n,O,a,G),this.sk&&!w(e.Yd,1)||this.tk&&!w(e.Fd,1)?z=!1:!Q&&h&&"justify"===n.overflow&&!this.ek(a,M)&&(z=!1),G&&
a%G&&(z=!1),z&&!isNaN(M.y)?(M.opacity=c,m[this.jd?"attr":"animate"](M),this.jd=!1):m.d("y",-9999))},ea:function(){Fa(this,this.axis)}};Fb.prototype={tb:function(){var a=this,b=a.axis,c=b.oc,d=(b.Bd||0)/2,e=a.options,g=e.label,h=a.label,m=e.width,l=e.ov,n=e.Hr,p=v(n)&&v(l),q=e.value,y=e.xg,r=a.iv,u=[],t,C=e.color,G=e.zIndex,z=e.Eb,O=b.F.qa;b.ec&&(n=s(n),l=s(l),q=s(q));if(m){if(u=b.Gg(q,m),d={stroke:C,"stroke-width":m},y)d.wf=y}else if(p){if(n=E(n,b.min-d),l=aa(l,b.max+d),u=b.$r(n,l,e),d={fill:C},e.borderWidth)d.stroke=
e.borderColor,d["stroke-width"]=e.borderWidth}else return;v(G)&&(d.zIndex=G);if(r)u?r.T({ib:u},null,r.Lt):(r.P(),r.Lt=function(){r.show()});else if(u&&u.length&&(a.iv=r=O.path(u).d(d).add(),z))for(t in e=function(b){r.s(b,function(c){z[b].apply(a,[c])})},z)e(t);g&&v(g.text)&&u&&u.length&&0<b.width&&0<b.height?(g=k({align:c&&p&&"center",x:c?!p&&4:10,verticalAlign:!c&&p&&"middle",y:c?p?16:10:p?6:-4,rotation:c&&!p&&90},g),h||(a.label=h=O.text(g.text,0,0).d({align:g.textAlign||g.align,rotation:g.rotation,
zIndex:G}).O(g.style).add()),b=[u[1],u[4],w(u[6],u[1])],u=[u[2],u[5],w(u[7],u[2])],c=ia(b),p=ia(u),h.align(g,!1,{x:c,y:p,width:ca(b)-c,height:ca(u)-p}),h.show()):h&&h.P();return a},ea:function(){u(this.axis.Xg,this);Fa(this,this.axis)}};dc.prototype={ea:function(){Fa(this,this.axis)},Ou:function(a){this.Fh=this.total=a},tb:function(a){var b=this.options,c=b.Ph,c=c?Q(c,this):b.Ra.call(this);this.label?this.label.d({text:c,visibility:"hidden"}):this.label=this.axis.F.qa.text(c,0,0,b.cd).O(b.style).d({align:this.textAlign,
rotation:b.rotation,visibility:"hidden"}).add(a)},Ku:function(a,b){var c=this.axis,d=c.F,e=d.jb,g=this.Ts,h=c.translate(this.St?100:this.total,0,0,0,1),c=c.translate(0),c=ma(h-c),k=d.Ta[0].translate(this.x)+a,m=d.Sc,g={x:e?g?h:h-c:k,y:e?m-k-b:g?m-h-c:m-h,width:e?c:b,height:e?b:c};if(e=this.label)e.align(this.oj,null,g),g=e.Zl,e.d({visibility:!1===this.options.Xq||d.Ng(g.x,g.y)?ra?"inherit":"visible":"hidden"})}};Gb.prototype={ir:{Ag:{vt:"%H:%M:%S.%L",Eu:"%H:%M:%S",xt:"%H:%M",ts:"%H:%M",Jh:"%e. %b",
Hv:"%e. %b",zt:"%b '%y",Qv:"%Y"},Rc:!1,Ig:"#C0C0C0",labels:Y,hi:"#C0D0E0",lineWidth:1,Yn:0.01,Sn:0.01,Mz:"#E0E0E0",Nz:1,Oz:"#A0A0A0",Pz:2,Qz:"outside",ip:1,Hi:!1,qB:"#C0D0E0",mh:5,nv:"between",Ji:100,rB:"outside",mv:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},lr:{Rc:!0,Ny:1,Ji:72,Fd:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,Sn:0.05,Yn:0.05,Hi:!0,mv:0,title:{rotation:270,text:"Values"},hp:{enabled:!1,Ra:function(){return R(this.total,-1)},style:Y.style}},
hr:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},jr:{labels:{align:"left",x:8,y:null},title:{rotation:90}},er:{labels:{align:"center",x:0,y:14},title:{rotation:0}},kr:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},C:function(a,b){var c=b.Zs;this.oc=a.jb?!c:c;this.Pi=(this.ke=c)?"x":"y";this.Ad=b.Ad;this.el=this.oc?this.Ad?0:2:this.Ad?1:3;this.fh(b);var d=this.options,e=d.type;this.wk=d.labels.Ra||this.gr;this.bg=this.oc&&d.labels.bg;this.hf=b;this.Zn=0;this.F=a;this.Cd=d.Cd;this.yl=
!1!==d.yl;this.Nc=d.Nc||"category"===e;this.ec="logarithmic"===e;this.Mg="datetime"===e;this.Ff=v(d.Ck);this.vp=this.Nc&&"between"===d.nv?0.5:0;this.Ki={};this.bo={};this.Xg=[];this.cm={};this.Lb=0;this.ne=this.Cv=d.ne||d.Gz;this.ah=d.ah;this.offset=d.offset||0;this.cf={};this.Tl=0;this.min=this.max=null;var g,d=this.options.Eb;-1===Aa(this,a.yc)&&(a.yc.push(this),a[c?"xAxis":"yAxis"].push(this));this.j=this.j||[];a.jb&&(c&&this.Cd===K)&&(this.Cd=!0);this.EA=this.DA=this.ru;for(g in d)da(this,g,d[g]);
this.ec&&(this.Dv=s,this.Ln=q)},fh:function(a){this.options=k(this.ir,this.ke?{}:this.lr,[this.kr,this.jr,this.er,this.hr][this.el],k(ha[this.ke?"xAxis":"yAxis"],a))},update:function(a,b){var c=this.F;a=c.options[this.Pi+"Axis"][this.options.index]=k(this.hf,a);this.ea();this.Ll=!1;this.C(c,a);c.Se=!0;w(b,!0)&&c.Pa()},remove:function(a){var b=this.F,c=this.Pi+"Axis";B(this.j,function(a){a.remove(!1)});u(b.yc,this);u(b[c],this);b.options[c].splice(this.options.index,1);B(b[c],function(a,b){a.options.index=
b});this.ea();b.Se=!0;w(a,!0)&&b.Pa()},gr:function(){var a=this.axis,b=this.value,c=a.Nc,d=this.cr,e=ha.lang.Gt,g=e&&e.length,h,k=a.options.labels.Ph,a=a.ec?b:a.ac;if(k)h=Q(k,this);else if(c)h=b;else if(d)h=lb(d,b);else if(g&&1E3<=a)for(;g--&&h===K;)c=Math.pow(1E3,g+1),a>=c&&null!==e[g]&&(h=R(b/c,-1)+e[g]);h===K&&(h=1E3<=b?R(b,0):R(b,-1));return h},bs:function(){var a=this,b=a.F,c=a.cf,d=[],e=[],g=a.Tl+=1,h,k;a.qn=!1;a.Pb=a.Ub=null;B(a.j,function(h){if(h.visible||!b.options.F.un){var m=h.options,
l,n,p,s,q,y,u,r,t,Ca=m.te,C,G=[],z=0;a.qn=!0;a.ec&&0>=Ca&&(Ca=m.te=null);if(a.ke){if(m=h.X,m.length)a.Pb=aa(w(a.Pb,m[0]),ia(m)),a.Ub=E(w(a.Ub,m[0]),ca(m))}else{var O,M,N,Q=h.Bm,U=h.Ta.Th(),J=!!h.Dk;l=m.od;a.vl="percent"===l;l&&(q=m.stack,s=h.type+w(q,""),y="-"+s,h.Gi=s,n=d[s]||[],d[s]=n,p=e[y]||[],e[y]=p);a.vl&&(a.Pb=0,a.Ub=99);m=h.Qk;u=h.Ao;C=u.length;for(k=0;k<C;k++)if(r=m[k],t=u[k],l&&(M=(O=t<Ca)?p:n,N=O?y:s,v(M[r])?(M[r]=P(M[r]+t),t=[t,M[r]]):M[r]=t,c[N]||(c[N]={}),c[N][r]||(c[N][r]=new dc(a,
a.options.hp,O,r,q,l)),c[N][r].Ou(M[r]),c[N][r].tv=g),null!==t&&(t!==K&&(!a.ec||t.length||0<t))&&(J&&(t=h.Dk(t)),h.Cy||Q||(m[k+1]||r)>=U.min&&(m[k-1]||r)<=U.max))if(r=t.length)for(;r--;)null!==t[r]&&(G[z++]=t[r]);else G[z++]=t;!a.vl&&G.length&&(h.Pb=l=ia(G),h.Ub=h=ca(G),a.Pb=aa(w(a.Pb,l),l),a.Ub=E(w(a.Ub,h),h));v(Ca)&&(a.Pb>=Ca?(a.Pb=Ca,a.xs=!0):a.Ub<Ca&&(a.Ub=Ca,a.ws=!0))}}});for(h in c)for(k in c[h])c[h][k].tv<g&&(c[h][k].ea(),delete c[h][k])},translate:function(a,b,c,d,e,h){var g=this.Lb,k=1,m=
0,l=d?this.It:this.ef;d=d?this.Ug:this.min;var n=this.Zn;e=(this.options.ha||this.ec&&e)&&this.Ln;l||(l=this.ef);c&&(k*=-1,m=g);this.Cd&&(k*=-1,m-=k*g);b?(a=a*k+m,a-=n,a=a/l+d,e&&(a=this.Ln(a))):(e&&(a=this.Dv(a)),a=k*(a-d)*l+m+k*n+(h?l*this.Bd/2:0));return a},yp:function(a,b){return this.translate(a,!1,!this.oc,null,!0)+(b?0:this.Tc)},zp:function(a,b){return this.translate(a-(b?0:this.Tc),!0,!this.oc,null,!0)},Gg:function(a,b,c,d){var e=this.F,h=this.left,g=this.top,k,m,l;a=this.translate(a,null,
null,c);var n=c&&e.Ek||e.Bc,p=c&&e.ko||e.Cc,s;k=this.ul;c=m=H(a+k);k=l=H(n-a-k);if(isNaN(a))s=!0;else if(this.oc){if(k=g,l=n-this.bottom,c<h||c>h+this.width)s=!0}else if(c=h,m=p-this.right,k<g||k>g+this.height)s=!0;return s&&!d?null:e.qa.Mj(["M",c,k,"L",m,l],b||0)},$r:function(a,b){var c=this.Gg(b),d=this.Gg(a);d&&c?d.push(c[4],c[5],c[1],c[2]):d=null;return d},Zj:function(a,b,c){var d;b=P(ka(b/a)*a);c=P(ya(c/a)*a);for(var e=[];b<=c;){e.push(b);b=P(b+a);if(b===d)break;d=b}return e},cn:function(a,b,
c,d){var e=this.options,h=this.Lb,g=[];d||(this.Rl=null);if(0.5<=a)a=H(a),g=this.Zj(a,b,c);else if(0.08<=a)for(var h=ka(b),k,m,l,n,p,e=0.3<a?[1,2,4]:0.15<a?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];h<c+1&&!p;h++)for(m=e.length,k=0;k<m&&!p;k++)l=s(q(h)*e[k]),l>b&&(!d||n<=c)&&g.push(n),n>c&&(p=!0),n=l;else(b=q(b),c=q(c),a=e[d?"minorTickInterval":"tickInterval"],a=w("auto"===a?null:a,this.Rl,(c-b)*(e.Ji/(d?5:1))/((d?h/this.pd.length:h)||1)),a=C(a,null,ba.pow(10,ka(ba.log(a)/ba.LN10))),g=Ya(this.Zj(a,b,c),s),d)||
(this.Rl=a/5);d||(this.ac=a);return g},Yr:function(){var a=this.options,b=this.pd,c=this.Rg,d=[],e;if(this.ec)for(e=b.length,a=1;a<e;a++)d=d.concat(this.cn(c,b[a-1],b[a],!0));else if(this.Mg&&"auto"===a.Rg)d=d.concat(S(N(c),this.min,this.max,a.ip)),d[0]<this.min&&d.shift();else for(b=this.min+(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},xq:function(){var a=this.options,b=this.min,c=this.max,d,e=this.Ub-this.Pb>=this.ne,h,g,k,m;this.ke&&(this.ne===K&&!this.ec)&&(v(a.min)||v(a.max)?this.ne=
null:(B(this.j,function(a){m=a.X;for(g=a.Oi?1:m.length-1;0<g;g--)if(k=m[g]-m[g-1],h===K||k<h)h=k}),this.ne=aa(5*h,this.Ub-this.Pb)));if(c-b<this.ne){var l=this.ne;d=(l-c+b)/2;d=[b-d,w(a.min,b-d)];e&&(d[2]=this.Pb);b=ca(d);c=[b+l,w(a.max,b+l)];e&&(c[2]=this.Ub);c=ia(c);c-b<l&&(d[0]=c-l,d[1]=w(a.min,c-l),b=ca(d))}this.min=b;this.max=c},Qo:function(a){var b=this.max-this.min,c=0,d,e=0,h=0,g=this.Mf,k=this.ef;this.ke&&(g?(e=g.$n,h=g.cu):B(this.j,function(a){var g=a.Bd,k=a.options.bu,I=a.vg;g>b&&(g=0);
c=E(c,g);e=E(e,k?0:g/2);h=E(h,"on"===k?0:g);!a.Sg&&v(I)&&(d=v(d)?aa(d,I):I)}),g=this.ro&&d?this.ro/d:1,this.$n=e*=g,this.cu=h*=g,this.Bd=aa(c,b),this.vg=d);a&&(this.It=k);this.AB=this.ef=k=this.Lb/(b+h||1);this.ul=this.oc?this.left:this.bottom;this.Zn=k*e},Uo:function(a){var b=this,c=b.F,d=b.options,e=b.ec,g=b.Mg,h=b.ke,k=b.Ff,m=b.options.sB,l=d.Sn,n=d.Yn,p=d.ac,q=d.Lz,y=d.Ji,r=b.Nc;k?(b.Mf=c[h?"xAxis":"yAxis"][d.Ck],c=b.Mf.Th(),b.min=w(c.min,c.Pb),b.max=w(c.max,c.Ub),d.type!==b.Mf.options.type&&
O(11,1)):(b.min=w(b.gf,d.min,b.Pb),b.max=w(b.ff,d.max,b.Ub));e&&(!a&&0>=aa(b.min,w(b.Pb,b.min))&&O(10,1),b.min=P(s(b.min)),b.max=P(s(b.max)));b.ah&&(b.gf=b.min=E(b.min,b.max-b.ah),b.ff=b.max,a)&&(b.ah=null);b.Jq&&b.Jq();b.xq();!r&&(!b.vl&&!k&&v(b.min)&&v(b.max)&&(c=b.max-b.min))&&(v(d.min)||(v(b.gf)||!n||!(0>b.Pb)&&b.xs)||(b.min-=c*n),v(d.max)||(v(b.ff)||!l||!(0<b.Ub)&&b.ws)||(b.max+=c*l));b.ac=b.min===b.max||void 0===b.min||void 0===b.max?1:k&&!p&&y===b.Mf.options.Ji?b.Mf.ac:w(p,r?1:(b.max-b.min)*
y/(b.Lb||1));h&&!a&&B(b.j,function(a){a.Pk(b.min!==b.Ug||b.max!==b.lo)});b.Qo(!0);b.Lq&&b.Lq();b.gu&&(b.ac=b.gu(b.ac));!p&&b.ac<q&&(b.ac=q);g||(e||(a=ba.pow(10,ka(ba.log(b.ac)/ba.LN10)),p))||(b.ac=C(b.ac,null,a,d));b.Rg="auto"===d.Rg&&b.ac?b.ac/5:d.Rg;b.pd=m=d.pd?[].concat(d.pd):m&&m.apply(b,[b.min,b.max]);m||(m=g?(b.Gy||S)(N(b.ac,d.EB),b.min,b.max,d.ip,b.gA,b.vg,!0):e?b.cn(b.ac,b.min,b.max):b.Zj(b.ac,b.min,b.max),b.pd=m);k||(e=m[0],g=m[m.length-1],k=b.$n||0,d.Hi?b.min=e:b.min-k>e&&m.shift(),d.Rc?
b.max=g:b.max+k<g&&m.pop(),1===m.length&&(b.min-=0.001,b.max+=0.001))},To:function(){var a=this.F,b=a.Of||{},c=this.pd,d=this.sq=[this.Pi,this.Tc,this.Lb].join("-");!this.Ff&&(!this.Mg&&c&&c.length>(b[d]||0)&&!1!==this.options.pj)&&(b[d]=c.length);a.Of=b},yq:function(){var a=this.sq,b=this.pd,c=this.F.Of;if(c&&c[a]&&!this.Mg&&!this.Nc&&!this.Ff&&!1!==this.options.pj){var d=this.lv,e=b.length;this.lv=a=c[a];if(e<a){for(;b.length<a;)b.push(P(b[b.length-1]+this.ac));this.ef*=(e-1)/(a-1);this.max=b[b.length-
1]}v(d)&&a!==d&&(this.Za=!0)}},Bi:function(){var a=this.cf,b,c,d,e;this.Ug=this.min;this.lo=this.max;this.Ht=this.Lb;this.Po();e=this.Lb!==this.Ht;B(this.j,function(a){if(a.Ef||a.Za||a.Ta.Za)d=!0});if(e||d||this.Ff||this.Wm||this.gf!==this.Kt||this.ff!==this.Jt)(this.Wm=!1,this.bs(),this.Uo(),this.Kt=this.gf,this.Jt=this.ff,this.Za)||(this.Za=e||this.min!==this.Ug||this.max!==this.lo);if(!this.ke)for(b in a)for(c in a[b])a[b][c].Fh=a[b][c].total;this.To()},cl:function(a,b,c,d,e){var h=this,k=h.F;
c=w(c,!0);e=g(e,{min:a,max:b});W(h,"setExtremes",e,function(){h.gf=a;h.ff=b;h.Bn=!0;c&&k.Pa(d)})},zoom:function(a,b){this.cx||(a<=this.Pb&&(a=K),b>=this.Ub&&(b=K));this.nr=a!==K||b!==K;this.cl(a,b,!1,K,{I:"zoom"});return!0},Po:function(){var a=this.F,b=this.options,c=b.offsetLeft||0,d=b.bA||0,e=this.oc,g,h;this.left=h=w(b.left,a.qb+c);this.top=g=w(b.top,a.rb);this.width=c=w(b.width,a.wc-c+d);this.height=b=w(b.height,a.Sc);this.bottom=a.Bc-b-g;this.right=a.Cc-c-h;this.Lb=E(e?c:b,0);this.Tc=e?h:g},
Th:function(){var a=this.ec;return{min:a?P(q(this.min)):this.min,max:a?P(q(this.max)):this.max,Pb:this.Pb,Ub:this.Ub,gf:this.gf,ff:this.ff}},gn:function(a){var b=this.ec,c=b?q(this.min):this.min,b=b?q(this.max):this.max;c>a||null===a?a=c:b<a&&(a=b);return this.translate(a,0,1,0,1)},vq:function(a,b){var c=(new Fb(this,a)).tb(),d=this.hf;b&&(d[b]=d[b]||[],d[b].push(a));this.Xg.push(c);return c},Zr:function(){var a=this,b=a.F,c=b.qa,d=a.options,e=a.pd,g=a.Ki,h=a.oc,k=a.el,m=b.jb?[1,0,3,2][k]:k,l,n=0,
p,s=0,q=d.title,y=d.labels,r=0,u=b.dm,t=b.vm,C=[-1,1,1,-1][k],G;a.ns=b=a.qn||v(a.min)&&v(a.max)&&!!e;a.Ru=l=b||w(d.dB,!0);a.yh||(a.js=c.mc("grid").d({zIndex:d.Oy||1}).add(),a.yh=c.mc("axis").d({zIndex:d.zIndex||2}).add(),a.it=c.mc("axis-labels").d({zIndex:y.zIndex||7}).add());if(b||a.Ff)B(e,function(b){g[b]?g[b].Wl():g[b]=new Pa(a,b)}),B(e,function(a){if(0===k||2===k||{1:"left",3:"right"}[k]===y.align)r=E(g[a].Ur(),r)}),a.bg&&(r+=16*(a.bg-1));else for(G in g)g[G].ea(),delete g[G];q&&(q.text&&!1!==
q.enabled)&&(a.qg||(a.qg=c.text(q.text,0,0,q.cd).d({zIndex:7,rotation:q.rotation||0,align:q.textAlign||{Qn:"left",Xn:"center",rs:"right"}[q.align]}).O(q.style).add(a.yh),a.qg.jd=!0),l&&(n=a.qg.nc()[h?"height":"width"],s=w(q.margin,h?5:10),p=q.offset),a.qg[l?"show":"hide"]());a.offset=C*w(d.offset,u[k]);a.em=w(p,r+s+(2!==k&&r&&C*d.labels[h?"y":"x"]));u[k]=E(u[k],a.em+n+C*a.offset);t[m]=E(t[m],d.lineWidth)},Wr:function(a){var b=this.F,c=this.Ad,d=this.offset,e=this.oc,g=this.left+(c?this.width:0)+d;
this.Az=d=b.Bc-this.bottom-(c?this.height:0)+d;c||(a*=-1);return b.qa.Mj(["M",e?this.left:g,e?d:this.top,"L",e?b.Cc-this.right:g,e?d:b.Bc-this.bottom],a)},ds:function(){var a=this.oc,b=this.left,c=this.top,d=this.Lb,e=this.options.title,g=a?b:c,h=this.Ad,k=this.offset,m=l(e.style.fontSize||12),d={Qn:g+(a?0:d),Xn:g+d/2,rs:g+(a?d:0)}[e.align],b=(a?c+this.height:b)+(a?1:-1)*(h?-1:1)*this.em+(2===this.el?m:0);return{x:a?d:b+(h?this.width:0)+k+(e.x||0),y:a?b-(h?this.height:0)+k:d+(e.y||0)}},tb:function(){var a=
this,b=a.F,c=b.qa,d=a.options,e=a.ec,g=a.Ff,h=a.pd,k=a.qg,m=a.cf,l=a.Ki,n=a.bo,p=a.cm,s=d.hp,y=d.dx,r=a.vp,u=d.lineWidth,w,t=b.Df&&v(a.Ug)&&!isNaN(a.Ug);w=a.ns;var C=a.Ru,G,z;B([l,n,p],function(a){for(var b in a)a[b].Lg=!1});if(w||g)(a.Rg&&!a.Nc&&B(a.Yr(),function(b){n[b]||(n[b]=new Pa(a,b,"minor"));t&&n[b].jd&&n[b].tb(null,!0);n[b].tb(null,!1,1)}),h.length&&(B(h.slice(1).concat([h[0]]),function(b,c){c=c===h.length-1?0:c+1;if(!g||b>=a.min&&b<=a.max)l[b]||(l[b]=new Pa(a,b)),t&&l[b].jd&&l[b].tb(c,!0),
l[b].tb(c,!1,1)}),r&&0===a.min&&(l[-1]||(l[-1]=new Pa(a,-1,null,!0)),l[-1].tb(-1))),y&&B(h,function(b,c){0===c%2&&b<a.max&&(p[b]||(p[b]=new Fb(a)),G=b+r,z=h[c+1]!==K?h[c+1]+r:a.max,p[b].options={Hr:e?q(G):G,ov:e?q(z):z,color:y},p[b].tb(),p[b].Lg=!0)}),a.Ll)||(B((d.Wg||[]).concat(d.pA||[]),function(b){a.vq(b)}),a.Ll=!0);B([l,n,p],function(a){function c(){for(e=g.length;e--;)a[g[e]]&&!a[g[e]].Lg&&(a[g[e]].ea(),delete a[g[e]])}var d,e,g=[],h=Ja?Ja.duration||500:0;for(d in a)a[d].Lg||(a[d].tb(d,!1,0),
a[d].Lg=!1,g.push(d));a!==p&&b.Df&&h?h&&setTimeout(c,h):c()});u&&(w=a.Wr(u),a.uj?a.uj.T({ib:w}):a.uj=c.path(w).d({stroke:d.hi,"stroke-width":u,zIndex:7}).add(a.yh),a.uj[C?"show":"hide"]());k&&C&&(k[k.jd?"attr":"animate"](a.ds()),k.jd=!1);if(s&&s.enabled){var O,M,d=a.cv;d||(a.cv=d=c.mc("stack-labels").d({visibility:"visible",zIndex:6}).add());d.translate(b.qb,b.rb);for(O in m)for(M in c=m[O],c)c[M].tb(d)}a.Za=!1},ru:function(a){for(var b=this.Xg,c=b.length;c--;)b[c].id===a&&b[c].ea()},Vo:function(a,
b){this.update({title:a},b)},Pa:function(){var a=this.F.Rf;a.reset&&a.reset(!0);this.tb();B(this.Xg,function(a){a.tb()});B(this.j,function(a){a.Za=!0})},ea:function(){var a=this,b=a.cf,c;ua(a);for(c in b)Fa(b[c]),b[c]=null;B([a.Ki,a.bo,a.cm,a.Xg],function(a){Fa(a)});B("stackTotalGroup axisLine axisGroup gridGroup labelGroup axisTitle".split(" "),function(b){a[b]&&(a[b]=a[b].ea())})}};Hb.prototype={C:function(a,b){var c=b.borderWidth,d=b.style,e=l(d.padding);this.F=a;this.options=b;this.vf=[];this.now=
{x:0,y:0};this.je=!0;this.label=a.qa.label("",0,0,b.shape,null,null,b.cd,null,"tooltip").d({padding:e,fill:b.backgroundColor,"stroke-width":c,sb:b.ce,zIndex:8}).O(d).O({padding:0}).P().add();sa||this.label.Na(b.Na);this.Xd=b.Xd},ea:function(){B(this.vf,function(a){a&&a.ea()});this.label&&(this.label=this.label.ea());clearTimeout(this.jk);clearTimeout(this.rl)},move:function(a,b,c,d){var e=this,h=e.now,k=!1!==e.options.ab&&!e.je;g(h,{x:k?(2*h.x+a)/3:a,y:k?(h.y+b)/2:b,qj:k?(2*h.qj+c)/3:c,rj:k?(h.rj+
d)/2:d});e.label.d(h);k&&(1<ma(a-h.x)||1<ma(b-h.y))&&(clearTimeout(this.rl),this.rl=setTimeout(function(){e&&e.move(a,b,c,d)},32))},P:function(){var a=this,b;clearTimeout(this.jk);this.je||(b=this.F.Oe,this.jk=setTimeout(function(){a.label.Um();a.je=!0},w(this.options.Uy,500)),b&&B(b,function(a){a.cb()}),this.F.Oe=null)},qs:function(){B(this.vf,function(a){a&&a.P()})},Jr:function(a,b){var c,d=this.F,e=d.jb,h=d.rb,g=0,k=0,m;a=z(a);c=a[0].sv;this.Oh&&b&&(b.im===K&&(b=d.Rf.normalize(b)),c=[b.im-d.qb,
b.jm-h]);c||(B(a,function(a){m=a.j.$a;g+=a.bb;k+=(a.au?(a.au+a.qA)/2:a.yb)+(!e&&m?m.top-h:0)}),g/=a.length,k/=a.length,c=[e?d.wc-k:g,this.Xd&&!e&&1<a.length&&b?b.jm-h:e?d.Sc-g:k]);return Ya(c,H)},Cf:function(a,b,c){var d=this.F,e=d.qb,h=d.rb,g=d.wc,k=d.Sc,m=w(this.options.Rd,12),l=c.bb;c=c.yb;var d=l+e+(d.jb?m:-a-m),n=c-b+h+15,p;7>d&&(d=e+E(l,0)+m);d+a>e+g&&(d-=d+a-(e+g),n=c-b+h-m,p=!0);n<h+5&&(n=h+5,p&&c>=n&&c<=n+b&&(n=c+h+m));n+b>h+k&&(n=E(h,h+k-b-m));return{x:d,y:n}},fr:function(a){var b=this.aa||
z(this),c=b[0].j,d;d=[c.pv(b[0])];B(b,function(a){c=a.j;d.push(c.ql&&c.ql(a)||a.v.ql(c.Li.yo))});d.push(a.options.yy||"");return d.join("")},refresh:function(a,b){var c=this.F,d=this.label,e=this.options,h,g,k,m={},l,n=[];l=e.Ra||this.fr;var m=c.Oe,p,q=e.vf;k=this.Xd;clearTimeout(this.jk);this.Oh=z(a)[0].j.Li.Oh;g=this.Jr(a,b);h=g[0];g=g[1];!k||a.j&&a.j.Sg?m=a.Yj():(c.Oe=a,m&&B(m,function(a){a.cb()}),B(a,function(a){a.cb("hover");n.push(a.Yj())}),m={x:a[0].Aj,y:a[0].y},m.aa=n,a=a[0]);l=l.call(m,this);
m=a.j;k=k||!m.Re||m.qv||c.Ng(h,g);!1!==l&&k?(this.je&&(cb(d),d.d("opacity",1).show()),d.d({text:l}),p=e.borderColor||a.color||m.color||"#606060",d.d({stroke:p}),this.Bv({bb:h,yb:g}),this.je=!1):this.P();if(q)for(q=z(q),d=q.length;d--;)if(e=a.j[d?"yAxis":"xAxis"],q[d]&&e)(k=d?w(a.dv,a.y):a.x,e.ec&&(k=s(k)),e=e.Gg(k,1),this.vf[d])?this.vf[d].d({ib:e,visibility:"visible"}):(k={"stroke-width":q[d].width||1,stroke:q[d].color||"#C0C0C0",zIndex:q[d].zIndex||2},q[d].xg&&(k.wf=q[d].xg),this.vf[d]=c.qa.path(e).d(k).add());
W(c,"tooltipRefresh",{text:l,x:h+c.qb,y:g+c.rb,borderColor:p})},Bv:function(a){var b=this.F,c=this.label,c=(this.options.sA||this.Cf).call(this,c.width,c.height,a);this.move(H(c.x),H(c.y),a.bb+b.qb,a.yb+b.rb)}};Ib.prototype={C:function(a,b){var c=sa?"":b.F.SB,d=a.jb,e;this.options=b;this.F=a;this.UB=e=/x/.test(c);this.VB=c=/y/.test(c);this.RB=e&&!d||c&&d;this.TB=c&&!d||e&&d;this.Ut=[];this.yz={};b.lb.enabled&&(a.lb=new Hb(a,b.lb));this.Iu()},normalize:function(a){var b,c,d;a=a||fa.event;a.target||
(a.target=a.srcElement);a=wc(a);d=a.touches?a.touches.item(0):a;this.vx=b=vc(this.F.h);d.pageX===K?(c=a.x,b=a.y):(c=d.pageX-b.left,b=d.pageY-b.top);return g(a,{im:H(c),jm:H(b)})},reset:function(a){var b=this.F,c=b.he,d=b.Kg,e=b.lb,b=e&&e.Xd?b.Oe:d;(a=a&&e&&b)&&z(b)[0].bb===K&&(a=!1);a?e.refresh(b):(d&&d.Ud(),c&&c.Ud(),e&&(e.P(),e.qs()),this.Xy=null)},Cu:function(a,b){var c=this.F;B(c.j,function(d){d.Ta&&d.Ta.yl&&(d.group.d(a),d.me&&(d.me.d(a),d.me.clip(b?c.kc:null)),d.ar&&d.ar.d(a))});c.kc.d(b||c.Cj)},
sr:function(a){var b=this.F,c=this.ps;if(this.$k){var d={Ta:[],$a:[],so:a.so||a},e=this.$k,h=e.x,k=e.y,m;if(this.mn||c)B(b.yc,function(a){if(a.yl){var b=a.oc,c=a.zp(b?h:k),b=a.zp(b?h+e.width:k+e.height);!isNaN(c)&&!isNaN(b)&&(d[a.Pi+"Axis"].push({axis:a,min:aa(c,b),max:E(c,b)}),m=!0)}}),m&&W(b,"selection",d,function(a){b.zoom(g(a,c?{ab:!1}:null))});this.$k=this.$k.ea();c&&this.Cu({Ic:b.qb,hc:b.rb,Mo:1,zi:1})}b&&(t(b.h,{cursor:b.oq}),b.sx=10<this.mn,b.Sz=this.mn=this.ps=!1,this.Ut=[])},zs:function(a,
b){for(var c;a;){if(c=r(a,"class")){if(-1!==c.indexOf(b))return!0;if(-1!==c.indexOf("highcharts-container"))return!1}a=a.parentNode}},oo:function(a){var b=this.F.he;!b||(b.options.ih||this.zs(a.toElement||a.relatedTarget,"highcharts-tooltip"))||b.Ud()},Iu:function(){var a=this,b=a.F.h,c;this.Ol=c=[[b,"onmousedown","onContainerMouseDown"],[b,"onmousemove","onContainerMouseMove"],[b,"onclick","onContainerClick"],[b,"mouseleave","onContainerMouseLeave"],[T,"mousemove","onDocumentMouseMove"],[T,"mouseup",
"onDocumentMouseUp"]];vb&&c.push([b,"ontouchstart","onContainerTouchStart"],[b,"ontouchmove","onContainerTouchMove"],[T,"touchend","onDocumentTouchEnd"]);B(c,function(b){a["_"+b[2]]=function(c){a[b[2]](c)};0===b[1].indexOf("on")?b[0][b[1]]=a["_"+b[2]]:da(b[0],b[1],a["_"+b[2]])})},ea:function(){var a=this;B(a.Ol,function(b){0===b[1].indexOf("on")?b[0][b[1]]=null:ua(b[0],b[1],a["_"+b[2]])});delete a.Ol;clearInterval(a.rl)}};Jb.prototype={C:function(a,b){var c=this,d=b.di,e=w(b.padding,8),h=b.En||0;
this.options=b;b.enabled&&(c.xj=l(d.fontSize)+3+h,c.di=d,c.ci=k(d,b.ci),c.En=h,c.padding=e,c.xn=e,c.Hs=e-5,c.Rn=0,c.F=a,c.at=0,c.Jf=0,c.tb(),da(c.F,"endResize",function(){c.Ok()}))},Hj:function(a,b){var c=this.options,d=a.Lf,e=a.nt,h=a.Kn,g=this.ci.color,c=b?c.di.color:g,k=b?a.color:g,g=a.options&&a.options.mb,m={stroke:k,fill:k},l;d&&d.O({fill:c,color:c});e&&e.d({stroke:k});if(h){if(g)for(l in g=a.Fe(g),g)d=g[l],d!==K&&(m[l]=d);h.d(m)}},fu:function(a){var b=this.options,c=b.rp,b=!b.zu,d=a.rq,e=d[0],
d=d[1],h=a.Ee;a.Kf&&a.Kf.translate(b?e:this.Bk-e-2*c-4,d);h&&(h.x=e,h.y=d)},Lm:function(a){var b=a.Ee;B(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&a[b].ea()});b&&y(a.Ee)},ea:function(){var a=this.group,b=this.Mc;b&&(this.Mc=b.ea());a&&(this.group=a.ea())},Ok:function(a){var b=this.group.Zl,c,d=this.Dj||this.zk;b&&(c=b.hc,B(this.zq,function(e){var h=e.Ee,g;h&&(g=c+h.y+(a||0)+3,t(h,{left:b.Ic+e.mt+h.x-20+"px",top:g+"px",display:g>c-6&&g<c+d-6?"":ja}))}))},tu:function(){var a=
this.padding,b=this.options.title,c=0;b.text&&(this.title||(this.title=this.F.qa.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").d({zIndex:1}).O(b.style).add(this.group)),c=this.title.nc().height,this.Lj.d({hc:c}));this.pl=c},su:function(a){var b=this,c=b.F,d=c.qa,e=b.options,h="horizontal"===e.Jn,g=e.il,m=e.rp,l=b.di,n=b.ci,p=b.padding,s=!e.zu,q=e.width,y=e.qz||0,r=b.En,u=b.xn,v=a.Lf,w=a.j||a,t=w.options,C=t.Su,G=e.cd;!v&&(a.Kf=d.mc("legend-item").d({zIndex:1}).add(b.Yk),w.yf(b,a),
a.Lf=v=d.text(e.ht?Q(e.ht,a):e.wk.call(a),s?g+m:-m,b.xj,G).O(k(a.visible?l:n)).d({align:s?"left":"right",zIndex:2}).add(a.Kf),(G?v:a.Kf).s("mouseover",function(){a.cb("hover");v.O(b.options.bt)}).s("mouseout",function(){v.O(a.visible?l:n);a.cb()}).s("click",function(b){function c(){a.Yf()}b={rx:b};a.ge?a.ge("legendItemClick",b,c):W(a,"legendItemClick",b,c)}),b.Hj(a,a.visible),t&&C)&&(a.Ee=F("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},e.$s,c.h),da(a.Ee,"click",function(b){W(a,
"checkboxClick",{checked:b.target.checked},function(){a.select()})}));d=v.nc();e=a.mt=e.rz||g+m+d.width+p+(C?20:0);b.at=g=d.height;h&&b.Hf-u+e>(q||c.Cc-2*p-u)&&(b.Hf=u,b.If+=r+b.Jf+y,b.Jf=0);b.Rn=E(b.Rn,e);b.In=r+b.If+y;b.Jf=E(g,b.Jf);a.rq=[b.Hf,b.If];h?b.Hf+=e:(b.If+=r+g+y,b.Jf=g);b.offsetWidth=q||E(h?b.Hf-u:e,b.offsetWidth)},tb:function(){var a=this,b=a.F,c=b.qa,d=a.group,e,h,k,m,l=a.Mc,n=a.options,p=a.padding,s=n.borderWidth,q=n.backgroundColor;a.Hf=a.xn;a.If=a.Hs;a.offsetWidth=0;a.In=0;d||(a.group=
d=c.mc("legend").d({zIndex:7}).add(),a.Lj=c.mc().d({zIndex:1}).add(d),a.Yk=c.mc().add(a.Lj));a.tu();e=[];B(b.j,function(a){var b=a.options;b.$f&&!v(b.Ck)&&(e=e.concat(a.zz||("point"===b.Ak?a.data:a)))});Ea(e,function(a,b){return(a.options&&a.options.lt||0)-(b.options&&b.options.lt||0)});n.Cd&&e.reverse();a.zq=e;a.display=h=!!e.length;B(e,function(b){a.su(b)});k=n.width||a.offsetWidth;m=a.In+a.Jf+a.pl;m=a.ek(m);if(s||q)k+=p,m+=p,l?0<k&&0<m&&(l[l.jd?"attr":"animate"](l.uf(null,null,null,k,m)),l.jd=
!1):(a.Mc=l=c.rect(0,0,k,m,n.ce,s||0).d({stroke:n.borderColor,"stroke-width":s||0,fill:q||ja}).add(d).Na(n.Na),l.jd=!0),l[h?"show":"hide"]();a.Bk=k;a.zk=m;B(e,function(b){a.fu(b)});h&&d.align(g({width:k,height:m},n),!0,"spacingBox");b.Gf||this.Ok()},ek:function(a){var b=this,c=this.F,d=c.qa,e=this.options,h=e.y,h=c.fp.height+("top"===e.verticalAlign?-h:h)-this.padding,g=e.maxHeight,k=this.kc,m=e.navigation,l=w(m.ab,!0),n=m.kx||12,p=this.ho;"horizontal"===e.Jn&&(h/=2);g&&(h=aa(h,g));a>h&&!e.cd?(this.Dj=
c=h-20-this.pl,this.to=ya(a/c),this.La=w(this.La,1),this.Ir=a,k||(k=b.kc=d.kc(0,0,9999,0),b.Lj.clip(k)),k.d({height:c}),p||(this.ho=p=d.mc().d({zIndex:1}).add(this.group),this.Av=d.eb("triangle",0,0,n,n).s("click",function(){b.scroll(-1,l)}).add(p),this.uo=d.text("",15,10).O(m.style).add(p),this.qr=d.eb("triangle-down",0,0,n,n).s("click",function(){b.scroll(1,l)}).add(p)),b.scroll(0),a=h):p&&(k.d({height:c.Bc}),p.P(),this.Yk.d({hc:1}),this.Dj=0);return a},scroll:function(a,b){var c=this.to,d=this.La+
a,e=this.Dj,h=this.options.navigation,g=h.tq,k=h.As,h=this.uo,m=this.padding;d>c&&(d=c);0<d&&(b!==K&&G(b,this.F),this.ho.d({Ic:m,hc:e+7+this.pl,visibility:"visible"}),this.Av.d({fill:1===d?k:g}).O({cursor:1===d?"default":"pointer"}),h.d({text:d+"/"+this.to}),this.qr.d({x:18+this.uo.nc().width,fill:d===c?k:g}).O({cursor:d===c?"default":"pointer"}),e=-aa(e*(d-1),this.Ir-e+m)+1,this.Yk.T({hc:e}),h.d({text:d+"/"+c}),this.La=d,this.Ok(e))}};Kb.prototype={C:function(a,b){var c,d=a.j;a.j=null;c=k(ha,a);
c.j=a.j=d;var d=c.F,e=d.margin,e=h(e)?e:[e,e,e,e];this.Gk=w(d.marginTop,e[0]);this.qo=w(d.marginRight,e[1]);this.po=w(d.marginBottom,e[2]);this.Fk=w(d.marginLeft,e[3]);this.LA=(e=d.Eb)&&!!e.click;this.px={Ne:{},HB:{}};this.ed=b;this.Gf=0;this.options=c;this.yc=[];this.j=[];this.Wh=d.bB;var g=this,m;g.index=La.length;La.push(g);!1!==d.zA&&da(g,"load",function(){g.Bs()});if(e)for(m in e)da(g,m,e[m]);g.Ta=[];g.$a=[];g.ab=sa?!1:w(d.ab,!0);g.Nk=0;g.ym=new Z;g.Nh()},vn:function(a){var b=this.options.F;
(b=ta[a.type||b.type||b.Jm])||O(17,!0);b=new b;b.C(this,a);return b},Od:function(a,b,c){var d,e=this;a&&(b=w(b,!0),W(e,"addSeries",{options:a},function(){d=e.vn(a);e.bi=!0;b&&e.Pa(c)}));return d},Ng:function(a,b,c){var d=c?b:a;a=c?a:b;return 0<=d&&d<=this.wc&&0<=a&&a<=this.Sc},mj:function(){!1!==this.options.F.pj&&B(this.yc,function(a){a.yq()});this.Of=null},Pa:function(a){var b=this.yc,c=this.j,d=this.Rf,e=this.pb,h=this.bi,g,k=this.Se,m=c.length,l=m,n=this.qa,p=n.je(),s=[];G(a,this);for(p&&this.Bh();l--;)if(a=
c[l],a.Za&&a.options.od){g=!0;break}if(g)for(l=m;l--;)if(a=c[l],a.options.od)a.Za=!0;B(c,function(a){a.Za&&"point"===a.options.Ak&&(h=!0)});h&&e.options.enabled&&(e.tb(),this.bi=!1);this.Wh&&(this.Gf||(this.Of=null,B(b,function(a){a.Bi()})),this.mj(),this.Uh(),B(b,function(a){a.Bn&&(a.Bn=!1,s.push(function(){W(a,"afterSetExtremes",a.Th())}));if(a.Za||k||g)a.Pa(),k=!0}));k&&this.Pm();B(c,function(a){a.Za&&a.visible&&(!a.Re||a.Ta)&&a.Pa()});d&&d.reset&&d.reset(!0);n.Oa();W(this,"redraw");p&&this.Bh(!0);
B(s,function(a){a.call()})},Fi:function(a){var b=this.options,c=this.Nn,d=b.ii;c||(this.Nn=c=F(Ia,{className:"highcharts-loading"},g(d.style,{zIndex:10,display:ja}),this.h),this.rt=F("span",null,d.jt,c));this.rt.innerHTML=a||b.lang.ii;this.Pn||(t(c,{opacity:0,display:"",left:this.qb+"px",top:this.rb+"px",width:this.wc+"px",height:this.Sc+"px"}),Ob(c,{opacity:d.style.opacity},{duration:d.cB||0}),this.Pn=!0)},ik:function(){var a=this.options,b=this.Nn;b&&Ob(b,{opacity:0},{duration:a.ii.Vy||100,complete:function(){t(b,
{display:ja})}});this.Pn=!1},get:function(a){var b=this.yc,c=this.j,d,e;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++)for(e=c[d].aa||[],b=0;b<e.length;b++)if(e[b].id===a)return e[b];return null},Kr:function(){var a=this,b=this.options,c=b.Ta=z(b.Ta||{}),b=b.$a=z(b.$a||{});B(c,function(a,b){a.index=b;a.Zs=!0});B(b,function(a,b){a.index=b});c=c.concat(b);B(c,function(b){new Gb(a,b)});a.mj()},as:function(){var a=
[];B(this.j,function(b){a=a.concat(cc(b.aa||[],function(a){return a.selected}))});return a},Wu:function(){var a=this,b=ha.lang,c=a.options.F.xi,d=c.kv,e=d.$c,h="chart"===c.CA?null:"plotBox";this.xi=a.qa.button(b.wu,null,null,function(){a.Rv()},d,e&&e.uc).d({align:c.position.align,title:b.xu}).add().align(c.position,!1,h)},Rv:function(){var a=this;W(a,"selection",{vu:!0},function(){a.zoom()})},zoom:function(a){var b,c=this.Rf,d=!1,e;!a||a.vu?B(this.yc,function(a){b=a.zoom()}):B(a.Ta.concat(a.$a),function(a){var e=
a.axis,h=e.ke;if(c[h?"zoomX":"zoomY"]||c[h?"pinchX":"pinchY"])b=e.zoom(a.min,a.max),e.nr&&(d=!0)});e=this.xi;d&&!e?this.Wu():!d&&h(e)&&(this.xi=e.ea());b&&this.Pa(w(this.options.F.ab,a&&a.ab,100>this.Nk))},Vo:function(a,b){var c=this,d=c.options,e;e=d.title=k(d.title,a);d=d.jh=k(d.jh,b);B([["title",a,e],["subtitle",b,d]],function(a){var b=a[0],d=c[b],e=a[1];a=a[2];d&&e&&(c[b]=d=d.ea());a&&a.text&&!d&&(c[b]=c.qa.text(a.text,0,0,a.cd).d({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).O(a.style).add().align(a,
!1,"spacingBox"))})},Mr:function(){var a=this.options.F,b=this.vi||this.Tb;this.Kj=wb(b,"width");this.Eh=wb(b,"height");this.Cc=E(0,a.width||this.Kj||600);this.Bc=E(0,w(a.height,19<this.Eh?this.Eh:400))},Bh:function(a){var b=this.vi,c=this.h;a?b&&(this.Tb.appendChild(c),y(b),delete this.vi):(c&&this.Tb.removeChild(c),this.vi=b=this.Tb.cloneNode(0),t(b,{position:"absolute",top:"-9999px",display:"block"}),T.body.appendChild(b),c&&b.appendChild(c))},Or:function(){var a,b=this.options.F,d,e,h;this.Tb=
a=b.Tb;h="highcharts-"+Mb++;n(a)&&(this.Tb=a=T.getElementById(a));a||O(13,!0);d=l(r(a,"data-highcharts-chart"));!isNaN(d)&&La[d]&&La[d].ea();r(a,"data-highcharts-chart",this.index);a.innerHTML="";a.offsetWidth||this.Bh();this.Mr();d=this.Cc;e=this.Bc;this.h=a=F(Ia,{className:"highcharts-container"+(b.className?" "+b.className:""),id:h},g({position:"relative",overflow:"hidden",width:d+"px",height:e+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b.style),
this.vi||a);this.oq=a.style.cursor;this.qa=b.Fg?new c(a,d,e,!0):new bb(a,d,e);sa&&this.qa.create(this,a,d,e)},Uh:function(){var a=this.options.F,b=a.Zc,c=a.Yc,d=a.Wc,a=a.Xc,e,h=this.pb,g=this.Gk,k=this.Fk,m=this.qo,l=this.po,n=this.options.title,p=this.options.jh,s=this.options.pb,q=w(s.margin,10),y=s.x,r=s.y,u=s.align,t=s.verticalAlign;this.Jo();e=this.dm;(this.title||this.jh)&&!v(this.Gk)&&(p=E(this.title&&!n.Vm&&!n.verticalAlign&&n.y||0,this.jh&&!p.Vm&&!p.verticalAlign&&p.y||0))&&(this.rb=E(this.rb,
p+w(n.margin,15)+b));h.display&&!s.Vm&&("right"===u?v(m)||(this.marginRight=E(this.marginRight,h.Bk-y+q+c)):"left"===u?v(k)||(this.qb=E(this.qb,h.Bk+y+q+a)):"top"===t?v(g)||(this.rb=E(this.rb,h.zk+r+q+b)):"bottom"!==t||v(l)||(this.marginBottom=E(this.marginBottom,h.zk-r+q+d)));this.Dr&&(this.marginBottom+=this.Dr);this.Er&&(this.rb+=this.Er);this.Wh&&B(this.yc,function(a){a.Zr()});v(k)||(this.qb+=e[3]);v(g)||(this.rb+=e[0]);v(l)||(this.marginBottom+=e[2]);v(m)||(this.marginRight+=e[1]);this.bl()},
Bs:function(){function a(h){var g=c.width||wb(d,"width"),k=c.height||wb(d,"height");h=h?h.target:fa;if(!b.pn&&g&&k&&(h===fa||h===T)){if(g!==b.Kj||k!==b.Eh)clearTimeout(e),b.AA=e=setTimeout(function(){b.h&&(b.Wd(g,k,!1),b.pn=null)},100);b.Kj=g;b.Eh=k}}var b=this,c=b.options.F,d=b.Tb,e;da(fa,"resize",a);da(b,"destroy",function(){ua(fa,"resize",a)})},Wd:function(a,b,c){var d=this,e,h,g;d.Gf+=1;g=function(){d&&W(d,"endResize",null,function(){d.Gf-=1})};G(c,d);d.Ek=d.Bc;d.ko=d.Cc;v(a)&&(d.Cc=e=E(0,H(a)),
d.pn=!!e);v(b)&&(d.Bc=h=E(0,H(b)));t(d.h,{width:e+"px",height:h+"px"});d.bl(!0);d.qa.Wd(e,h,c);d.Of=null;B(d.yc,function(a){a.Za=!0;a.Bi()});B(d.j,function(a){a.Za=!0});d.bi=!0;d.Se=!0;d.Uh();d.Pa(c);d.Ek=null;W(d,"resize");!1===Ja?g():setTimeout(g,Ja&&Ja.duration||500)},bl:function(a){var b=this.jb,c=this.qa,d=this.Cc,e=this.Bc,h=this.options.F,g=h.Zc,k=h.Yc,m=h.Wc,l=h.Xc,n=this.vm,p,s,q,y;this.qb=p=H(this.qb);this.rb=s=H(this.rb);this.wc=q=E(0,H(d-p-this.marginRight));this.Sc=y=E(0,H(e-s-this.marginBottom));
this.pi=b?y:q;this.wo=b?q:y;this.Qf=b=h.Qf||0;this.fp=c.fp={x:l,y:g,width:d-l-k,height:e-g-m};this.vo=c.vo={x:p,y:s,width:q,height:y};c=ya(E(b,n[3])/2);d=ya(E(b,n[0])/2);this.Cj={x:c,y:d,width:ka(this.pi-E(b,n[1])/2-c),height:ka(this.wo-E(b,n[2])/2-d)};a||B(this.yc,function(a){a.Po();a.Qo()})},Jo:function(){var a=this.options.F,b=a.Yc,c=a.Wc,d=a.Xc;this.rb=w(this.Gk,a.Zc);this.marginRight=w(this.qo,b);this.marginBottom=w(this.po,c);this.qb=w(this.Fk,d);this.dm=[0,0,0,0];this.vm=[0,0,0,0]},Pm:function(){var a=
this.options.F,b=this.qa,c=this.Cc,d=this.Bc,e=this.Pq,h=this.Yt,g=this.Zt,k=this.Xt,m=a.borderWidth||0,l=a.backgroundColor,n=a.ni,p=a.oA,s=a.Qf||0,q,y=this.qb,r=this.rb,u=this.wc,v=this.Sc,w=this.vo,t=this.kc,C=this.Cj;q=m+(a.Na?8:0);if(m||l)e?e.T(e.uf(null,null,null,c-q,d-q)):(e={fill:l||ja},m&&(e.stroke=a.borderColor,e["stroke-width"]=m),this.Pq=b.rect(q/2,q/2,c-q,d-q,a.ce,m).d(e).add().Na(a.Na));n&&(h?h.T(w):this.Yt=b.rect(y,r,u,v,0).d({fill:n}).add().Na(a.oi));p&&(k?k.T(w):this.Xt=b.ok(p,y,r,
u,v).add());t?t.T({width:C.width,height:C.height}):this.kc=b.kc(C);s&&(g?g.T(g.uf(null,y,r,u,v)):this.Zt=b.rect(y,r,u,v,0,s).d({stroke:a.$t,"stroke-width":s,zIndex:1}).add());this.Se=!1},ju:function(){var a=this,b=a.options.F,c,d=a.options.j,e,h;B(["inverted","angular","polar"],function(g){c=ta[b.type||b.Jm];h=a[g]||b[g]||c&&c.prototype[g];for(e=d&&d.length;!h&&e--;)(c=ta[d[e].type])&&c.prototype[g]&&(h=!0);a[g]=h})},tb:function(){var a=this,b=a.yc,c=a.qa,d=a.options,e=d.labels,h=d.Oc,k;a.Vo();a.pb=
new Jb(a,d.pb);B(b,function(a){a.Bi()});a.Uh();a.Of=null;B(b,function(a){a.Uo(!0);a.To()});a.mj();a.Uh();a.Pm();a.Wh&&B(b,function(a){a.tb()});a.No||(a.No=c.mc("series-group").d({zIndex:3}).add());B(a.j,function(a){a.translate();a.Ci();a.tb()});e.ct&&B(e.ct,function(b){var d=g(e.style,b.style),h=l(d.left)+a.qb,k=l(d.top)+a.rb+12;delete d.left;delete d.top;c.text(b.u,h,k).d({zIndex:2}).O(d).add()});h.enabled&&!a.Oc&&(k=h.href,a.Oc=c.text(h.text,0,0).s("click",function(){k&&(location.href=k)}).d({align:h.position.align,
zIndex:8}).O(h.style).add().align(h.position));a.Df=!0},ea:function(){var a=this,b=a.yc,c=a.j,d=a.h,e,h=d&&d.parentNode;W(a,"destroy");La[a.index]=K;a.Tb.removeAttribute("data-highcharts-chart");ua(a);for(e=b.length;e--;)b[e]=b[e].ea();for(e=c.length;e--;)c[e]=c[e].ea();B("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer scroller rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(b){var c=a[b];c&&c.ea&&(a[b]=c.ea())});
d&&(d.innerHTML="",ua(d),h&&y(d));for(e in a)delete a[e]},Ws:function(){var a=this;return!ra&&fa==fa.top&&"complete"!==T.readyState||sa&&!fa.tx?(sa?jc.push(function(){a.Nh()},a.options.global.Oq):T.attachEvent("onreadystatechange",function(){T.detachEvent("onreadystatechange",a.Nh);"complete"===T.readyState&&a.Nh()}),!1):!0},Nh:function(){var a=this,b=a.options,c=a.ed;a.Ws()&&(a.Or(),W(a,"init"),a.Jo(),a.bl(),a.ju(),a.Kr(),B(b.j||[],function(b){a.vn(b)}),W(a,"beforeRender"),a.Rf=new Ib(a,b),a.tb(),
a.qa.Oa(),c&&c.apply(a,[a]),B(a.tg,function(b){b.apply(a,[a])}),a.Bh(!0),W(a,"load"))}};Kb.prototype.tg=[];b.prototype={C:function(a,b,c){this.j=a;this.vh(b,c);this.oe={};a.options.Gj&&(b=a.options.oa||a.F.options.oa,this.color=this.color||b[a.Ch++],a.Ch===b.length)&&(a.Ch=0);a.F.Nk++;return this},vh:function(a,c){var d=this.j,e=d.rA;a=b.prototype.Nt.call(this,a);g(this,a);this.options=this.options?g(this.options,a):a;e&&(this.y=this[e]);this.x===K&&d&&(this.x=c===K?d.autoIncrement():c);return this},
Nt:function(a){var b,c=this.j,d=c.xo||["y"],e=d.length,h=0,g=0;if("number"===typeof a||null===a)b={y:a};else if(m(a))for(b={},a.length>e&&(c=typeof a[0],"string"===c?b.name=a[0]:"number"===c&&(b.x=a[0]),h++);g<e;)b[d[g++]]=a[h++];else"object"===typeof a&&(b=a,a.lc&&(c.Pl=!0),a.mb&&(c.pq=!0));return b},ea:function(){var a=this.j.F,b=a.Oe,c;a.Nk--;b&&(this.cb(),u(b,this),!b.length)&&(a.Oe=null);this===a.Kg&&this.Ud();if(this.dc||this.sc)ua(this),this.Km();this.Lf&&a.pb.Lm(this);for(c in this)this[c]=
null},Km:function(){for(var a="graphic dataLabel dataLabelUpper group connector shadowGroup".split(" "),b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].ea())},Yj:function(){return{x:this.Aj,y:this.y,key:this.name||this.Aj,j:this.j,v:this,ld:this.ld,total:this.total||this.bv}},select:function(a,b){var c=this,d=c.j,e=d.F;a=w(a,!c.selected);c.ge(a?"select":"unselect",{Uw:b},function(){c.selected=c.options.selected=a;d.options.data[Aa(c,d.data)]=c.options;c.cb(a&&"select");b||B(e.as(),function(a){a.selected&&
a!==c&&(a.selected=a.options.selected=!1,d.options.data[Aa(a,d.data)]=a.options,a.cb(""),a.ge("unselect"))})})},Vg:function(a){var b=this.j,c=b.F,d=c.lb,e=c.Kg;e&&e!==this&&e.Ud();this.ge("mouseOver");d&&(!d.Xd||b.Sg)&&d.refresh(this,a);this.cb("hover");c.Kg=this},Ud:function(){var a=this.j.F,b=a.Oe;b&&-1!==Aa(this,b)||(this.ge("mouseOut"),this.cb(),a.Kg=null)},ql:function(a){var b=this.j,c=b.Li,d=w(c.IB,""),e=c.JB||"",h=c.KB||"";B(b.xo||["y"],function(b){b="{point."+b;if(e||h)a=a.replace(b+"}",e+
b+"}"+h);a=a.replace(b+"}",b+":,."+d+"f}")});return Q(a,{v:this,j:this.j})},update:function(a,b,c){var d=this,e=d.j,g=d.dc,k,m=e.data,l=e.F;b=w(b,!0);d.ge("update",{options:a},function(){d.vh(a);h(a)&&(e.Wj(),g&&g.d(d.oe[e.state]));k=Aa(d,m);e.X[k]=d.x;e.Ri[k]=e.nh?e.nh(d):d.y;e.wl[k]=d.z;e.options.data[k]=d.options;e.Za=!0;e.Ef=!0;b&&l.Pa(c)})},remove:function(a,b){var c=this,d=c.j,e=d.F,h,g=d.data;G(b,e);a=w(a,!0);c.ge("remove",null,function(){h=Aa(c,g);g.splice(h,1);d.options.data.splice(h,1);
d.X.splice(h,1);d.Ri.splice(h,1);d.wl.splice(h,1);c.ea();d.Za=!0;d.Ef=!0;a&&e.Pa()})},ge:function(a,b,c){var d=this,e=this.j.options;(e.v.Eb[a]||d.options&&d.options.Eb&&d.options.Eb[a])&&this.ys();"click"===a&&e.of&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});W(this,a,b,c)},ys:function(){if(!this.os){var a=k(this.j.options.v,this.options).Eb,b;this.Eb=a;for(b in a)da(this,b,a[b]);this.os=!0}},cb:function(a){var b=this.bb,c=this.yb,d=this.j,e=d.options.$c,h=oa[d.type].mb&&d.options.mb,
g=h&&!h.enabled,m=h&&h.$c[a],l=m&&!1===m.enabled,n=d.gv,p=this.mb||{},s=d.F,q=this.oe;a=a||"";if(!(a===this.state||this.selected&&"select"!==a||e[a]&&!1===e[a].enabled||a&&(l||g&&!m.enabled))){if(this.dc)e=h&&this.dc.kh&&q[a].sb,this.dc.d(k(q[a],e?{x:b-e,y:c-e,width:2*e,height:2*e}:{}));else if(a&&m&&(e=m.$e,p=p.eb||d.eb,n&&n.Zq!==p&&(n=n.ea()),n?n.d({x:b-e,y:c-e}):(d.gv=n=s.qa.eb(p,b-e,c-e,2*e,2*e).d(q[a]).add(d.me),n.Zq=p)),n)n[a&&s.Ng(b,c)?"show":"hide"]();this.state=a}}};a.prototype={Re:!0,type:"line",
ri:b,ep:!0,wi:!0,qi:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",sb:"radius"},Ch:0,C:function(a,b){var c,d,e=a.j;this.F=a;this.options=b=this.fh(b);this.Mq();g(this,{name:b.name,state:"",oe:{},visible:!1!==b.visible,selected:!0===b.selected});sa&&(b.ab=!1);d=b.Eb;for(c in d)da(this,c,d[c]);if(d&&d.click||b.v&&b.v.Eb&&b.v.Eb.click||b.of)a.MA=!0;this.$m();this.ak();this.setData(b.data,!1);this.Re&&(a.Wh=!0);e.push(this);this.Ql=e.length-1;Ea(e,function(a,b){return w(a.options.index,
a.Ql)-w(b.options.index,a.Ql)});B(e,function(a,b){a.index=b;a.name=a.name||"Series "+(b+1)});c=b.Ck;this.Mn=[];n(c)&&(c=":previous"===c?e[this.index-1]:a.get(c))&&(c.Mn.push(this),this.Mf=c)},Mq:function(){var a=this,b=a.options,c=a.F,d;a.Re&&B(["xAxis","yAxis"],function(e){B(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]!==K&&b[e]===d.id||b[e]===K&&0===d.index)c.j.push(a),a[e]=c,c.Za=!0});a[e]||O(18,!0)})},autoIncrement:function(){var a=this.options,b=this.Oi,b=w(b,a.zo,0);this.si=w(this.si,
a.si,1);this.Oi=b+this.si;return b},$j:function(){var a=-1,b=[],c,d=this.aa,e=d.length;if(e)if(this.options.Ij){for(c=e;c--;)null===d[c].y&&d.splice(c,1);d.length&&(b=[d])}else B(d,function(c,h){null===c.y?(h>a+1&&b.push(d.slice(a+1,h)),a=h):h===e-1&&b.push(d.slice(a+1,h+1))});this.Ai=b},fh:function(a){var b=this.F.options,c=b.md,d=c[this.type];this.hf=a;a=k(d,c.j,a);this.Li=k(b.lb,a.lb);null===d.mb&&delete a.mb;return a},$m:function(){var a=this.options,b=this.hf,c=this.F.options.oa,d=this.F.ym,
e;e=a.color||oa[this.type].color;e||a.Gj||(v(b.Nl)?a=b.Nl:(b.Nl=d.color,a=d.color++),e=c[a]);this.color=e;d.Lv(c.length)},ak:function(){var a=this.hf,b=this.options.mb,c=this.F,d=c.options.df,c=c.ym;this.eb=b.eb;this.eb||(v(a.Ul)?a=a.Ul:(a.Ul=c.eb,a=c.eb++),this.eb=d[a]);/^url/.test(this.eb)&&(b.$e=0);c.Mv(d.length)},yf:function(a){var b=this.options,c=b.mb,d=a.options.il,e=this.F.qa,h=this.Kf;a=a.xj;var g;b.lineWidth&&(g={"stroke-width":b.lineWidth},b.xg&&(g.wf=b.xg),this.nt=e.path(["M",0,a-4,"L",
d,a-4]).d(g).add(h));c&&c.enabled&&(b=c.$e,this.Kn=e.eb(this.eb,d/2-b,a-4-b,2*b,2*b).add(h))},mg:function(a,b,c,d){var e=this.options,h=this.data,g=this.jn,k=this.wh,m=this.F,l=this.X,n=this.Ri,p=this.wl,s=this.fo,q=g&&g.shift||0,y=e.data;G(d,m);g&&c&&(g.shift=q+1);k&&(c&&(k.shift=q+1),k.Ls=!0);b=w(b,!0);d={j:this};this.ri.prototype.vh.apply(d,[a]);l.push(d.x);n.push(this.nh?this.nh(d):d.y);p.push(d.z);s&&(s[d.x]=d.name);y.push(a);"point"===e.Ak&&this.Sh();c&&(h[0]&&h[0].remove?h[0].remove(!1):(h.shift(),
l.shift(),n.shift(),p.shift(),y.shift()));this.Wj();this.Ef=this.Za=!0;b&&m.Pa()},setData:function(a,b){var c=this.aa,d=this.options,e=this.F,h=null,g=this.Ta,k=g&&g.Nc&&!g.Nc.length?[]:null,l;this.Oi=null;this.Bd=g&&g.Nc?1:d.Bd;this.Ch=0;var s=[],q=[],y=[],r=a?a.length:[],u=(l=this.xo)&&l.length,v=!!this.nh;if(r>(d.wv||1E3)){for(l=0;null===h&&l<r;)h=a[l],l++;if(p(h)){h=w(d.zo,0);d=w(d.si,1);for(l=0;l<r;l++)s[l]=h,q[l]=a[l],h+=d;this.Oi=h}else if(m(h))if(u)for(l=0;l<r;l++)d=a[l],s[l]=d[0],q[l]=d.slice(1,
u+1);else for(l=0;l<r;l++)d=a[l],s[l]=d[0],q[l]=d[1]}else for(l=0;l<r;l++)a[l]!==K&&(d={j:this},this.ri.prototype.vh.apply(d,[a[l]]),s[l]=d.x,q[l]=v?this.nh(d):d.y,y[l]=d.z,k&&d.name)&&(k[l]=d.name);this.wi&&1<s.length&&s[1]<s[0]&&O(15);n(q[0])&&O(14,!0);this.data=[];this.options.data=a;this.X=s;this.Ri=q;this.wl=y;this.fo=k;for(l=c&&c.length||0;l--;)c[l]&&c[l].ea&&c[l].ea();g&&(g.ne=g.Cv);this.Za=this.Ef=e.Se=!0;w(b,!0)&&e.Pa(!1)},remove:function(a,b){var c=this,d=c.F;a=w(a,!0);c.Cn||(c.Cn=!0,W(c,
"remove",null,function(){c.ea();d.bi=d.Se=!0;a&&d.Pa(b)}));c.Cn=!1},Pk:function(a){var b=this.X,c=this.Ri,d=b.length,e=0,h=d,g,k,m=this.Ta,l=this.options,n=l.Am,p=this.Re;if(p&&!(this.Za||m.Za||this.$a.Za||a))return!1;if(p&&this.ep&&(!n||d>n||this.zy))if(a=m.Th(),m=a.min,n=a.max,b[d-1]<m||b[0]>n)b=[],c=[];else if(b[0]<m||b[d-1]>n){for(a=0;a<d;a++)if(b[a]>=m){e=E(0,a-1);break}for(;a<d;a++)if(b[a]>n){h=a+1;break}b=b.slice(e,h);c=c.slice(e,h);g=!0}for(a=b.length-1;0<a;a--)if(d=b[a]-b[a-1],0<d&&(k===
K||d<k))k=d;this.Bm=g;this.Yq=e;this.Qk=b;this.Ao=c;null===l.Bd&&(this.Bd=k||1);this.vg=k},Sh:function(){var a=this.options.data,b=this.data,c,d=this.Qk,e=this.Ao,h=this.ri,g=d.length,k=this.Yq||0,m,l=this.Ry,n,p=[],s;b||l||(b=[],b.length=a.length,b=this.data=b);for(s=0;s<g;s++)m=k+s,l?p[s]=(new h).C(this,[d[s]].concat(z(e[s]))):(b[m]?n=b[m]:a[m]!==K&&(b[m]=n=(new h).C(this,a[m],d[s])),p[s]=n);if(b&&(g!==(c=b.length)||l))for(s=0;s<c;s++)if(s===k&&!l&&(s+=g),b[s])b[s].Km(),b[s].bb=K;this.data=b;this.aa=
p},translate:function(){this.Qk||this.Pk();this.Sh();var a=this.options,b=a.od,c=this.Ta,d=c.Nc,e=this.$a,h=this.aa,g=h.length,k=!!this.Dk,m,l,n="between"===a.bu,p=a.te;l=e.j.sort(function(a,b){return a.index-b.index});for(a=l.length;a--;)if(l[a].visible){l[a]===this&&(m=!0);break}for(a=0;a<g;a++){l=h[a];var s=l.x,q=l.y,y=l.Qn,r=e.cf[(q<p?"-":"")+this.Gi];e.ec&&0>=q&&(l.y=q=null);l.bb=c.translate(s,0,0,0,1,n);b&&(this.visible&&r&&r[s])&&(y=r[s],r=y.total,y.Fh=y=y.Fh-q,q=y+q,m&&(y=w(p,e.min)),e.ec&&
0>=y&&(y=null),"percent"===b&&(y=r?100*y/r:0,q=r?100*q/r:0),l.ld=r?100*l.y/r:0,l.total=l.bv=r,l.dv=q);l.Qi=v(y)?e.translate(y,0,1,0,1):null;k&&(q=this.Dk(q,l));l.yb="number"===typeof q&&Infinity!==q?H(10*e.translate(q,0,1,0,1))/10:K;l.clientX=n?c.translate(s,0,0,0,1):l.bb;l.io=l.y<(p||0);l.Aj=d&&d[l.x]!==K?d[l.x]:l.x}this.$j()},Ci:function(a){var b=[],c,d,e=(c=this.Ta)?c.wB||c.Lb:this.F.pi,h,g,k=[];if(!1!==this.options.wr){a&&(this.rv=null);B(this.Ai||this.aa,function(a){b=b.concat(a)});c&&c.Cd&&
(b=b.reverse());a=b.length;for(g=0;g<a;g++)for(h=b[g],c=b[g-1]?d+1:0,d=b[g+1]?E(0,ka((h.clientX+(b[g+1]?b[g+1].clientX:e))/2)):e;0<=c&&c<=d;)k[c++]=h;this.rv=k}},pv:function(a){var b=this.Li,c=b.NB,d=b.Ag,e=this.Ta,h=e&&"datetime"===e.options.type,b=b.rn,e=e&&e.vg,g;if(h&&!c)if(e)for(g in V){if(V[g]>=e){c=d[g];break}}else c=d.Jh;h&&c&&p(a.key)&&(b=b.replace("{point.key}","{point.key:"+c+"}"));return Q(b,{v:a,j:this})},Vg:function(){var a=this.F,b=a.he;b&&b!==this&&b.Ud();this.options.Eb.Uz&&W(this,
"mouseOver");this.cb("hover");a.he=this},Ud:function(){var a=this.options,b=this.F,c=b.lb,d=b.Kg;d&&d.Ud();this&&a.Eb.Tz&&W(this,"mouseOut");!c||a.ih||c.Xd&&!this.Sg||c.P();this.cb();b.he=null},T:function(a){var b=this,c=b.F,d=c.qa,e;e=b.options.ab;var k=c.Cj,m=c.jb,l;e&&!h(e)&&(e=oa[b.type].ab);l="_sharedClip"+e.duration+e.ur;if(a)a=c[l],e=c[l+"m"],a||(c[l]=a=d.kc(g(k,{width:0})),c[l+"m"]=e=d.kc(-99,m?-c.qb:-c.rb,99,m?c.Cc:c.Bc)),b.group.clip(a),b.me.clip(e),b.Zo=l;else{if(a=c[l])a.T({width:c.pi},
e),c[l+"m"].T({width:c.pi+99},e);b.T=null;b.Bq=setTimeout(function(){b.Yl()},e.duration)}},Yl:function(){var a=this.F,b=this.Zo,c=this.group;c&&!1!==this.options.clip&&(c.clip(a.kc),this.me.clip());setTimeout(function(){b&&a[b]&&(a[b]=a[b].ea(),a[b+"m"]=a[b+"m"].ea())},100)},Qj:function(){var a,b=this.aa,c=this.F,d,e,h,k,m,l,n,p,s=this.options.mb,q,y=this.me;if(s.enabled||this.pq)for(h=b.length;h--;)(k=b[h],d=k.bb,e=k.yb,p=k.dc,l=k.mb||{},a=s.enabled&&l.enabled===K||l.enabled,q=c.Ng(H(d),e,c.jb),
a&&e!==K&&!isNaN(e)&&null!==k.y)?(a=k.oe[k.selected?"select":""],m=a.sb,l=w(l.eb,this.eb),n=0===l.indexOf("url"),p)?p.d({visibility:q?ra?"inherit":"visible":"hidden"}).T(g({x:d-m,y:e-m},p.kh?{width:2*m,height:2*m}:{})):q&&(0<m||n)&&(k.dc=c.qa.eb(l,d-m,e-m,2*m,2*m).d(a).add(y)):p&&(k.dc=p.ea())},Fe:function(a,b,c,d){var e=this.qi,h,g,k={};a=a||{};b=b||{};c=c||{};d=d||{};for(h in e)g=e[h],k[h]=w(a[g],b[h],c[h],d[h]);return k},Wj:function(){var a=this,b=a.options,c=oa[a.type].mb?b.mb:b,e=c.$c,h=e.uc,
k,m=a.color,l={stroke:m,fill:m},n=a.aa||[],p=[],s,q=a.qi,y=b.li,r;b.mb?(h.$e=h.$e||c.$e+2,h.lineWidth=h.lineWidth||c.lineWidth+1):h.color=h.color||d(h.color||m).yj(h.zh).get();p[""]=a.Fe(c,l);B(["hover","select"],function(b){p[b]=a.Fe(e[b],p[""])});a.oe=p;for(m=n.length;m--;){l=n[m];(c=l.options&&l.options.mb||l.options)&&!1===c.enabled&&(c.$e=0);l.io&&y&&(l.color=l.fillColor=y);k=b.Gj||l.color;if(l.options)for(r in q)v(c[q[r]])&&(k=!0);k?(c=c||{},s=[],e=c.$c||{},k=e.uc=e.uc||{},b.mb||(k.color=d(k.color||
l.color).yj(k.zh||h.zh).get()),s[""]=a.Fe(g({color:l.color},c),p[""]),s.uc=a.Fe(e.uc,p.uc,s[""]),s.select=a.Fe(e.select,p.select,s[""]),l.io&&(b.mb&&y)&&(s[""].fill=s.uc.fill=s.select.fill=a.Fe({fillColor:y}).fill)):s=p;l.oe=s}},update:function(a,b){var c=this.F,d=this.type;a=k(this.hf,{ab:!1,index:this.index,zo:this.X[0]},a);this.remove(!1);g(this,ta[a.type||d].prototype);this.C(c,a);w(b,!0)&&c.Pa(!1)},ea:function(){var a=this,b=a.F,c=/AppleWebKit\/533/.test(Ka),d,e,h=a.data||[],g,k,m;W(a,"destroy");
ua(a);B(["xAxis","yAxis"],function(b){if(m=a[b])u(m.j,a),m.Za=m.Wm=!0});a.Lf&&a.F.pb.Lm(a);for(e=h.length;e--;)(g=h[e])&&g.ea&&g.ea();a.aa=null;clearTimeout(a.Bq);B("area graph dataLabelsGroup group markerGroup tracker graphNeg areaNeg posClip negClip".split(" "),function(b){a[b]&&(d=c&&"group"===b?"hide":"destroy",a[b][d]())});b.he===a&&(b.he=null);u(b.j,a);for(k in a)delete a[k]},Mh:function(){var a=this,b=a.options.lc,c=a.aa,d,e,h,g;if(b.enabled||a.Pl)a.pr&&a.pr(b),g=a.Lk("dataLabelsGroup","data-labels",
a.visible?"visible":"hidden",b.zIndex||6),e=b,B(c,function(c){var m,l=c.sc,n,p,s=c.Dh,q=!0;d=c.options&&c.options.lc;m=e.enabled||d&&d.enabled;if(l&&!m)c.sc=l.ea();else if(m){m=b.rotation;b=k(e,d);n=c.Yj();h=b.Ph?Q(b.Ph,n):b.Ra.call(n,b);b.style.color=w(b.color,b.style.color,a.color,"black");if(l)if(v(h))l.d({text:h}),q=!1;else{if(c.sc=l=l.ea(),s)c.Dh=s.ea()}else if(v(h)){l={fill:b.backgroundColor,stroke:b.borderColor,"stroke-width":b.borderWidth,sb:b.ce||0,rotation:m,padding:b.padding,zIndex:1};
for(p in l)l[p]===K&&delete l[p];l=c.sc=a.F.qa[m?"text":"label"](h,0,-999,null,null,null,b.cd).d(l).O(b.style).add(g).Na(b.Na)}l&&a.uh(c,l,b,null,q)}})},uh:function(a,b,c,d,e){var h=this.F,k=h.jb,m=w(a.bb,-999);a=w(a.yb,-999);var l=b.nc();d=g({x:k?h.wc-a:m,y:H(k?h.Sc-m:a),width:0,height:0},d);g(c,{width:l.width,height:l.height});c.rotation?(d={align:c.align,x:d.x+c.x+d.width/2,y:d.y+c.y+d.height/2},b[e?"attr":"animate"](d)):b.align(c,null,d);b.d({visibility:!1===c.Xq||h.Ng(m,a,k)?h.qa.Og?"inherit":
"visible":"hidden"})},Hg:function(a){var b=this,c=[],d=b.options.step;B(a,function(e,h){var g=e.bb,k=e.yb,m;b.en?c.push.apply(c,b.en(a,e,h)):(c.push(h?"L":"M"),d&&h&&(m=a[h-1],"right"===d?c.push(m.bb,k):"center"===d?c.push((m.bb+g)/2,m.yb,(m.bb+g)/2,k):c.push(g,m.yb)),c.push(e.bb,e.yb))});return c},Rr:function(){var a=this,b=[],c,d=[];B(a.Ai,function(e){c=a.Hg(e);1<e.length?b=b.concat(c):d.push(e[0])});a.Xu=d;return a.is=b},ee:function(){var a=this,b=this.options,c=[["graph",b.hi||this.color]],d=
b.lineWidth,e=b.xg,h=this.Rr(),g=b.li;g&&c.push(["graphNeg",g]);B(c,function(c,g){var k=c[0],m=a[k];m?(cb(m),m.T({ib:h})):d&&h.length&&(m={stroke:c[1],"stroke-width":d,zIndex:1},e&&(m.wf=e),a[k]=a.F.qa.path(h).d(m).add(a.group).Na(!g&&b.Na))})},Rq:function(){var a=this.options,b=this.F,c=b.qa,d=a.li,e,h=this.jn,g=this.wh,k=this.eu,m=this.Dt;e=b.Cc;var l=b.Bc,n=E(e,l);d&&(h||g)&&(d=ya(this.$a.Lb-this.$a.translate(a.te||0)),a={x:0,y:0,width:n,height:d},n={x:0,y:d,width:n,height:n-d},b.jb&&c.Ys&&(a=
{x:b.wc-d-b.qb,y:0,width:e,height:l},n={x:d+b.qb-e,y:0,width:b.qb+d,height:e}),this.$a.Cd?(b=n,e=a):(b=a,e=n),k?(k.T(b),m.T(e)):(this.eu=k=c.kc(b),this.Dt=m=c.kc(e),h&&(h.clip(k),this.hs.clip(m)),g&&(g.clip(k),this.hx.clip(m))))},zn:function(){function a(){var c={width:b.$a.Lb,height:b.Ta.Lb};B(["group","markerGroup"],function(a){b[a]&&b[a].d(c).qk()})}var b=this,c=b.F;b.Ta&&(da(c,"resize",a),da(b,"destroy",function(){ua(c,"resize",a)}),a(),b.zn=a)},Lk:function(a,b,c,d,e){var h=this[a],g=!h,k=this.F,
m=this.Ta,l=this.$a;g&&(this[a]=h=k.qa.mc(b).d({visibility:c,zIndex:d||0.1}).add(e));h[g?"attr":"animate"]({Ic:m?m.left:k.qb,hc:l?l.top:k.rb,Mo:1,zi:1});return h},tb:function(){var a=this.F,b,c=this.options,d=c.ab&&!!this.T&&a.qa.Og,e=this.visible?"visible":"hidden",h=c.zIndex,g=this.Df,k=a.No;b=this.Lk("group","series",e,h,k);this.me=this.Lk("markerGroup","markers",e,h,k);d&&this.T(!0);this.Wj();b.jb=this.Re?a.jb:!1;this.ee&&(this.ee(),this.Rq());this.Mh();this.Qj();!1!==this.options.wr&&this.zf();
a.jb&&this.zn();!1===c.clip||this.Zo||g||b.clip(a.kc);d?this.T():g||this.Yl();this.Za=this.Ef=!1;this.Df=!0},Pa:function(){var a=this.F,b=this.Ef,c=this.group,d=this.Ta,e=this.$a;c&&(a.jb&&c.d({width:a.wc,height:a.Sc}),c.T({Ic:w(d&&d.left,a.qb),hc:w(e&&e.top,a.rb)}));this.translate();this.Ci(!0);this.tb();b&&W(this,"updatedData")},cb:function(a){var b=this.options,c=this.jn,d=this.hs,e=b.$c,b=b.lineWidth;a=a||"";this.state!==a&&(this.state=a,e[a]&&!1===e[a].enabled||(a&&(b=e[a].lineWidth||b+1),c&&
!c.wf&&(a={"stroke-width":b},c.d(a),d&&d.d(a))))},Yf:function(a,b){var c=this,d=c.F,e=c.Lf,h,g=d.options.F.un,k=c.visible;h=(c.visible=a=c.hf.visible=a===K?!k:a)?"show":"hide";B(["group","dataLabelsGroup","markerGroup","tracker"],function(a){if(c[a])c[a][h]()});d.he===c&&c.Ud();e&&d.pb.Hj(c,a);c.Za=!0;c.options.od&&B(d.j,function(a){a.options.od&&a.visible&&(a.Za=!0)});B(c.Mn,function(b){b.Yf(a,!1)});g&&(d.Se=!0);!1!==b&&d.Pa();W(c,h)},show:function(){this.Yf(!0)},P:function(){this.Yf(!1)},select:function(a){this.selected=
a=a===K?!this.selected:a;this.Ee&&(this.Ee.checked=a);W(this,a?"select":"unselect")},zf:function(){function a(){g.he!==b&&b.Vg()}var b=this,c=b.options,d=c.zB,e=[].concat(d?b.xh:b.is),h=e.length,g=b.F,k=g.Rf,m=g.qa,l=g.options.lb.Yu,n=b.uv,p=c.cursor,p=p&&{cursor:p},s=b.Xu,q;if(h&&!d)for(q=h+1;q--;)"M"===e[q]&&e.splice(q+1,0,e[q+1]-l,e[q+2],"L"),(q&&"M"===e[q]||q===h)&&e.splice(q,0,"L",e[q-2]+l,e[q-1]);for(q=0;q<s.length;q++)h=s[q],e.push("M",h.bb-l,h.yb,"L",h.bb+l,h.yb);n?n.d({ib:e}):(b.uv=n=m.path(e).d({"class":"highcharts-tracker",
"stroke-linejoin":"round",visibility:b.visible?"visible":"hidden",stroke:hc,fill:d?hc:ja,"stroke-width":c.lineWidth+(d?0:2*l),zIndex:2}).p("highcharts-tracker").s("mouseover",a).s("mouseout",function(a){k.oo(a)}).O(p).add(b.me),vb)&&n.s("touchstart",a)}};Y=L(a);ta.gi=Y;oa.wh=k(na,{te:0});Y=L(a,{type:"area",$j:function(){var b=[],c=[],d=[],h=this.Ta,g=this.$a,k=g.cf[this.Gi],m={},l,n,p=this.aa,s,q;if(this.options.od&&!this.Bm){for(s=0;s<p.length;s++)m[p[s].x]=p[s];for(q in k)d.push(+q);d.sort(function(a,
b){return a-b});B(d,function(a){m[a]?c.push(m[a]):(l=h.translate(a),n=g.yp(k[a].Fh,!0),c.push({y:null,bb:l,clientX:l,yb:n,Qi:n,Vg:e}))});c.length&&b.push(c)}else a.prototype.$j.call(this),b=this.Ai;this.Ai=b},Hg:function(b){var c=a.prototype.Hg.call(this,b),d=[].concat(c),e,h=this.options;3===c.length&&d.push("L",c[1],c[2]);if(h.od&&!this.Sq)for(e=b.length-1;0<=e;e--)e<b.length-1&&h.step&&d.push(b[e+1].bb,b[e].Qi),d.push(b[e].bb,b[e].Qi);else this.Fj(d,b);this.xh=this.xh.concat(d);return c},Fj:function(a,
b){var c=this.$a.gn(this.options.te);a.push("L",b[b.length-1].bb,c,"L",b[0].bb,c)},ee:function(){this.xh=[];a.prototype.ee.apply(this);var b=this,c=this.xh,e=this.options,h=[["area",this.color,e.fillColor]];e.li&&h.push(["areaNeg",e.li,e.Yz]);B(h,function(a){var h=a[0],g=b[h];g?g.T({ib:c}):b[h]=b.F.qa.path(c).d({fill:w(a[2],d(a[1]).Lu(e.Rj||0.75).get()),zIndex:0}).add(b.group)})},yf:function(a,b){b.Kn=this.F.qa.rect(0,a.xj-11,a.options.il,12,2).d({zIndex:3}).add(b.Kf)}});ta.wh=Y;oa.$u=k(na);ea=L(a,
{type:"spline",en:function(a,b,c){var d=b.bb,e=b.yb,h=a[c-1],g=a[c+1],k,m,l,n;if(h&&g){a=h.yb;l=g.bb;var g=g.yb,p;k=(1.5*d+h.bb)/2.5;m=(1.5*e+a)/2.5;l=(1.5*d+l)/2.5;n=(1.5*e+g)/2.5;p=(n-m)*(l-d)/(l-k)+e-n;m+=p;n+=p;m>a&&m>e?(m=E(a,e),n=2*e-m):m<a&&m<e&&(m=aa(a,e),n=2*e-m);n>g&&n>e?(n=E(g,e),m=2*e-n):n<g&&n<e&&(n=aa(g,e),m=2*e-n);b.Ko=l;b.Lo=n}c?(b=["C",h.Ko||h.bb,h.Lo||h.yb,k||d,m||e,d,e],h.Ko=h.Lo=null):b=["M",d,e];return b}});ta.$u=ea;oa.Eq=k(oa.wh);Ba=Y.prototype;ea=L(ea,{type:"areaspline",Sq:!0,
Hg:Ba.Hg,Fj:Ba.Fj,ee:Ba.ee});ta.Eq=ea;oa.tf=k(na,{borderColor:"#FFFFFF",borderWidth:1,ce:0,Jg:0.2,mb:null,Yg:0.1,wt:0,Am:50,Bd:null,$c:{uc:{zh:0.1,Na:!1},select:{color:"#C0C0C0",borderColor:"#000000",Na:!1}},lc:{align:null,verticalAlign:null,y:null},ih:!1,te:0});ea=L(a,{type:"column",qv:!0,wi:!1,qi:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",sb:"borderRadius"},tl:["group","dataLabelsGroup"],C:function(){a.prototype.C.apply(this,arguments);var b=this,c=b.F;c.Df&&B(c.j,function(a){a.type===
b.type&&(a.Za=!0)})},Nr:function(){var a=this,b=a.F,c=a.options,d=this.Ta,e=d.Cd,h,g={},k,m=0;!1===c.ls?m=1:B(b.j,function(b){var c=b.options;b.type===a.type&&(b.visible&&a.options.group===c.group)&&(c.od?(h=b.Gi,g[h]===K&&(g[h]=m++),k=g[h]):!1!==c.ls&&(k=m++),b.xm=k)});var b=aa(ma(d.ef)*(d.ro||c.Bd||d.vg||1),d.Lb),d=b*c.Jg,l=(b-2*d)/m,n=c.du,c=v(n)?(l-n)/2:l*c.Yg,n=w(n,l-2*c);return a.yx={width:n,offset:c+(d+((e?m-(a.xm||0):a.xm)||0)*l-b/2)*(e?-1:1)}},translate:function(){var b=this,c=b.F,d=b.options,
e=d.od,h=d.borderWidth,g=b.$a,k=b.vv=g.gn(d.te),m=w(d.wt,5),d=b.Nr(),l=d.width,n=ya(E(l,1+2*h)),p=d.offset;a.prototype.translate.apply(b);B(b.aa,function(a){var d=aa(E(-999,a.yb),g.Lb+999),s=w(a.Qi,k),q=a.bb+p,y=ya(aa(d,s)),d=ya(E(d,s)-y),r=g.cf[(0>a.y?"-":"")+b.Gi];e&&b.visible&&r&&r[a.x]&&r[a.x].Ku(p,n);ma(d)<m&&m&&(d=m,y=ma(y-k)>m?s-m:k-(g.translate(a.y,0,1,0,1)<=k?m:0));a.lx=q;a.du=l;a.Yo="rect";a.hh=a=c.qa.Si.prototype.uf.call(0,h,q,y,n,d);h%2&&(a.y-=1,a.height+=1)})},ak:e,yf:Y.prototype.yf,
ee:e,Qj:function(){var a=this,b=a.options,c=a.F.qa,d;B(a.aa,function(e){var h=e.yb,g=e.dc;h===K||isNaN(h)||null===e.y?g&&(e.dc=g.ea()):(d=e.hh,g?(cb(g),g.T(k(d))):e.dc=c[e.Yo](d).d(e.oe[e.selected?"select":""]).add(a.group).Na(b.Na,null,b.od&&!b.ce))})},zf:function(){function a(c){var d=c.target,e;for(b.Vg();d&&!e;)e=d.v,d=d.parentNode;e!==K&&e.Vg(c)}var b=this,c=b.F.Rf,d=b.options.cursor,e=d&&{cursor:d};B(b.aa,function(a){a.dc&&(a.dc.element.v=a);a.sc&&(a.sc.element.v=a)});b.qq?b.qq=!0:B(b.tl,function(d){b[d]&&
(b[d].p("highcharts-tracker").s("mouseover",a).s("mouseout",function(a){c.oo(a)}).O(e),vb)&&b[d].s("touchstart",a)})},uh:function(b,c,d,e,h){var g=this.F,m=g.jb,l=b.$x||b.hh,n=b.nx||b.yb>w(this.vv,g.wo),p=w(d.cz,!!this.options.od);l&&(e=k(l),m&&(e={x:g.wc-e.y-e.height,y:g.Sc-e.x-e.width,width:e.height,height:e.width}),!p)&&(m?(e.x+=n?0:e.width,e.width=0):(e.y+=n?e.height:0,e.height=0));d.align=w(d.align,!m||p?"center":n?"right":"left");d.verticalAlign=w(d.verticalAlign,m||p?"middle":n?"top":"bottom");
a.prototype.uh.call(this,b,c,d,e,h)},T:function(a){var b=this.$a,c=this.options,d=this.F.jb,e={};ra&&(a?(e.zi=0.001,a=aa(b.Tc+b.Lb,E(b.Tc,b.yp(c.te))),d?e.Ic=a-b.Lb:e.hc=a,this.group.d(e)):(e.zi=1,e[d?"translateX":"translateY"]=b.Tc,this.group.T(e,this.options.ab),this.T=null))},remove:function(){var b=this,c=b.F;c.Df&&B(c.j,function(a){a.type===b.type&&(a.Za=!0)});a.prototype.remove.apply(b,arguments)}});ta.tf=ea;oa.Iq=k(oa.tf);Ba=L(ea,{type:"bar",jb:!0});ta.Iq=Ba;oa.Du=k(na,{lineWidth:0,lb:{rn:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',
yo:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",Oh:!0},ih:!1});Ba=L(a,{type:"scatter",ep:!1,wi:!1,Sg:!0,tl:["markerGroup"],zf:ea.prototype.zf,Ci:e});ta.Du=Ba;oa.Ye=k(na,{borderColor:"#FFFFFF",borderWidth:1,Ac:[null,null],clip:!1,Gj:!0,lc:{Rd:30,enabled:!0,Ra:function(){return this.v.name}},tn:!0,Ak:"point",mb:null,size:null,$f:!1,cp:10,$c:{uc:{zh:0.1,Na:!1}},ih:!1,lb:{Oh:!0}});na={type:"pie",Re:!1,ri:L(b,{C:function(){b.prototype.C.apply(this,arguments);var a=this,c;0>a.y&&(a.y=null);g(a,{visible:!1!==
a.visible,name:w(a.name,"Slice")});c=function(){a.slice()};da(a,"select",c);da(a,"unselect",c);return a},Yf:function(a){var b=this,c=b.j,d=c.F,e;b.visible=b.options.visible=a=a===K?!b.visible:a;c.options.data[Aa(b,c.data)]=b.options;e=a?"show":"hide";B(["graphic","dataLabel","connector","shadowGroup"],function(a){if(b[a])b[a][e]()});b.Lf&&d.pb.Hj(b,a);!c.Za&&c.options.tn&&(c.Za=!0,d.Pa())},slice:function(a,b,c){b=this.j;G(c,b.F);this.fl=this.options.fl=a=v(a)?a:!this.fl;b.options.data[Aa(this,b.data)]=
this.options;a=a?this.dp:{Ic:0,hc:0};this.dc.T(a);this.Zf&&this.Zf.T(a)}}),wi:!1,Sg:!0,tl:["group","dataLabelsGroup"],qi:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},$m:e,T:function(a){var b=this,c=b.aa,d=b.ev;a||(B(c,function(a){var c=a.dc;a=a.hh;c&&(c.d({sb:b.Ac[3]/2,start:d,end:d}),c.T({sb:a.sb,start:a.start,end:a.end},b.options.ab))}),b.T=null)},setData:function(b,c){a.prototype.setData.call(this,b,!1);this.Pk();this.Sh();w(c,!0)&&this.F.Pa()},Lr:function(){var a=this.options,
b=this.F,c=2*(a.cp||0),d,e=b.wc-2*c,h=b.Sc-2*c,b=a.Ac,a=[w(b[0],"50%"),w(b[1],"50%"),a.size||"100%",a.$h||0],g=aa(e,h),k;return Ya(a,function(a,b){k=/%$/.test(a);d=2>b||2===b&&k;return(k?[e,h,g,g][b]*l(a)/100:a)+(d?c:0)})},translate:function(a){this.Sh();var b=0,c=0,d=this.options,e=d.cp,h=e+d.borderWidth,g,k,m,l=this.ev=Qa/180*((d.iB||0)%360-90),n=this.aa,p=2*Qa,s=d.lc.Rd,q=d.tn,y,r=n.length,u;a||(this.Ac=a=this.Lr());this.fs=function(b,c){m=ba.asin((b-a[1])/(a[2]/2+s));return a[0]+(c?-1:1)*qa(m)*
(a[2]/2+s)};for(y=0;y<r;y++)u=n[y],b+=q&&!u.visible?0:u.y;for(y=0;y<r;y++){u=n[y];d=b?u.y/b:0;g=H(1E3*(l+c*p))/1E3;if(!q||u.visible)c+=d;k=H(1E3*(l+c*p))/1E3;u.Yo="arc";u.hh={x:a[0],y:a[1],sb:a[2]/2,Zh:a[3]/2,start:g,end:k};m=(k+g)/2;m>0.75*p&&(m-=2*Qa);u.dp={Ic:H(qa(m)*e),hc:H(va(m)*e)};g=qa(m)*a[2]/2;k=va(m)*a[2]/2;u.sv=[a[0]+0.7*g,a[1]+0.7*k];u.ln=m<p/4?0:1;u.sj=m;h=aa(h,s/2);u.xk=[a[0]+g+qa(m)*s,a[1]+k+va(m)*s,a[0]+g+qa(m)*h,a[1]+k+va(m)*h,a[0]+g,a[1]+k,0>s?"center":u.ln?"right":"left",m];u.ld=
100*d;u.total=b}this.Ci()},ee:null,Qj:function(){var a=this,b=a.F.qa,c,d,e=a.options.Na,h,k;e&&!a.Zf&&(a.Zf=b.mc("shadow").add(a.group));B(a.aa,function(m){d=m.dc;k=m.hh;h=m.Zf;e&&!h&&(h=m.Zf=b.mc("shadow").add(a.Zf));c=m.fl?m.dp:{Ic:0,hc:0};h&&h.d(c);d?d.T(g(k,c)):m.dc=d=b.arc(k).Mu(a.Ac).d(m.oe[m.selected?"select":""]).d({"stroke-linejoin":"round"}).d(c).add(a.group).Na(e,h);!1===m.visible&&m.Yf(!1)})},Mh:function(){function b(a,c){a.sort(function(a,b){return void 0!==a.sj&&(b.sj-a.sj)*c})}function c(a,
b){return b.y-a.y}var d=this,e=d.data,h,g=d.F,k=d.options.lc,m=w(k.Dx,10),l=w(k.Ex,1),n=g.wc,g=g.Sc,p,s,q=w(k.gB,!0),y=k.Rd,r=d.Ac,u=r[2]/2,v=r[1],t=0<y,C,G,z,O,M=[[],[]],P,N,Q,U,J,S=[0,0,0,0];if(k.enabled||d.Pl){a.prototype.Mh.apply(d);B(e,function(a){a.sc&&M[a.ln].push(a)});for(U=0;!O&&e[U];)O=e[U]&&e[U].sc&&(e[U].sc.nc().height||21),U++;for(U=2;U--;){var e=[],ia=[],F=M[U],L=F.length,X;b(F,U-0.5);if(0<y){for(J=v-u-y;J<=v+u+y;J+=O)e.push(J);G=e.length;if(L>G){h=[].concat(F);h.sort(c);for(J=L;J--;)h[J].nu=
J;for(J=L;J--;)F[J].nu>=G&&F.splice(J,1);L=F.length}for(J=0;J<L;J++){h=F[J];z=h.xk;h=9999;var Ea,Z;for(Z=0;Z<G;Z++)Ea=ma(e[Z]-z[1]),Ea<h&&(h=Ea,X=Z);if(X<J&&null!==e[J])X=J;else for(G<L-J+X&&null!==e[J]&&(X=G-L+J);null===e[X];)X++;ia.push({vs:X,y:e[X]});e[X]=null}ia.sort(c)}for(J=0;J<L;J++){h=F[J];z=h.xk;C=h.sc;Q=!1===h.visible?"hidden":"visible";h=z[1];if(0<y){if(G=ia.pop(),X=G.vs,N=G.y,h>N&&null!==e[X+1]||h<N&&null!==e[X-1])N=h}else N=h;P=k.vz?r[0]+(U?-1:1)*(u+y):d.fs(0===X||X===e.length-1?h:N,
U);C.Ml={visibility:Q,align:z[6]};C.kj={x:P+k.x+({left:m,right:-m}[z[6]]||0),y:N+k.y-10};C.Uq=P;C.Vq=N;null===this.options.size&&(G=C.width,P-G<m?S[3]=E(H(G-P+m),S[3]):P+G>n-m&&(S[1]=E(H(P+G-n+m),S[1])),0>N-O/2?S[0]=E(H(-N+O/2),S[0]):N+O/2>g&&(S[2]=E(H(N+O/2-g),S[2])))}}if(0===ca(S)||this.Fv(S))this.Vt(),t&&l&&B(this.aa,function(a){p=a.Dh;z=a.xk;(C=a.sc)&&C.kj?(Q=C.Ml.visibility,P=C.Uq,N=C.Vq,s=q?["M",P+("left"===z[6]?5:-5),N,"C",P,N,2*z[2]-z[4],2*z[3]-z[5],z[2],z[3],"L",z[4],z[5]]:["M",P+("left"===
z[6]?5:-5),N,"L",z[2],z[3],"L",z[4],z[5]],p?(p.T({ib:s}),p.d("visibility",Q)):a.Dh=p=d.F.qa.path(s).d({"stroke-width":l,stroke:k.Cx||a.color||"#606060",visibility:Q}).add(d.group)):p&&(a.Dh=p.ea())})}},Fv:function(a){var b=this.Ac,c=this.options,d=c.Ac,e=c=c.Kz||80,h;null!==d[0]?e=E(b[2]-E(a[1],a[3]),c):(e=E(b[2]-a[1]-a[3],c),b[0]+=(a[3]-a[1])/2);null!==d[1]?e=E(aa(e,b[2]-E(a[0],a[2])),c):(e=E(aa(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2);e<b[2]?(b[2]=e,this.translate(b),B(this.aa,function(a){a.sc&&
(a.sc.kj=null)}),this.Mh()):h=!0;return h},Vt:function(){B(this.aa,function(a){a=a.sc;var b;a&&((b=a.kj)?(a.d(a.Ml),a[a.Ct?"animate":"attr"](b),a.Ct=!0):a&&a.d({y:-999}))})},uh:e,zf:ea.prototype.zf,yf:Y.prototype.yf,ak:e};na=L(a,na);ta.Ye=na;g(Highcharts,{Uv:Gb,fb:Kb,Zv:d,ow:Jb,xw:Ib,ww:b,Jw:Pa,Kw:Hb,zw:bb,Hw:a,Ew:X,Fw:c,jx:ia,ix:ca,wx:La,Ga:lb,Ph:Q,nA:Nb,dn:function(){return ha},Qy:tc,oz:fc,aA:R,PA:ta,fh:function(a){ha=k(ha,a);U();return ha},Vl:da,Ho:ua,createElement:F,Yx:y,O:t,b:B,extend:g,map:Ya,
Iz:k,Tt:w,hB:z,jy:L,iA:l,Kv:M,kB:ra,canvas:sa,LB:!ra&&!sa,product:"Highcharts",version:"3.0.2"})})();(function(a,b,c){function d(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e="hashchange",g=document,k,l=a.event.gp,n=g.documentMode,h="on"+e in b&&(n===c||7<n);a.ub[e]=function(a){return a?this.bind(e,a):this.I(e)};a.ub[e].Vb=50;l[e]=a.extend(l[e],{Wo:function(){if(h)return!1;a(k.start)},sp:function(){if(h)return!1;a(k.stop)}});k=function(){function k(a){return a}function l(){var c=d(),h=r(u);c!==u?(v(u=c,h),a(b).I(e)):h!==u&&(location.href=location.href.replace(/#.*/,"")+h);
q=setTimeout(l,a.ub[e].Vb)}var n={},q,u=d(),v=k,r=k;n.start=function(){q||l()};n.stop=function(){q&&clearTimeout(q);q=c};/MSIE/.test(navigator.userAgent)&&!h&&function(){var b,c;n.start=function(){b||(c=(c=a.ub[e].src)&&c+d(),b=a('<iframe tabindex="-1" title="empty"/>').P().Mt("load",function(){c||v(d());l()}).d("src",c||"javascript:0").bz("body")[0].contentWindow,g.fA=function(){try{"title"===event.propertyName&&(b.document.title=g.title)}catch(a){}})};n.stop=k;r=function(){return d(b.location.href)};
v=function(c,d){var h=b.document,k=a.ub[e].domain;c!==d&&(h.title=g.title,h.open(),k&&h.write('<script>document.domain="'+k+'"\x3c/script>'),h.close(),b.location.hash=c)}}();return n}()})(jQuery,this);(function(a,b,c){function d(){k=b[l](function(){e.b(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,h);c===e.Ni&&d===e.Ne||b.I(n,[e.Ni=c,e.Ne=d])});d()},g[m])}"$:nomunge";var e=a([]),g=a.Tk=a.extend(a.Tk,{}),k,l="setTimeout",n="resize",h=n+"-special-event",m="delay";g[m]=250;g.throttleWindow=!0;a.event.gp[n]={Wo:function(){if(!g.throttleWindow&&this[l])return!1;var b=a(this);e=e.add(b);a.data(this,h,{Ni:b.width(),Ne:b.height()});1===e.length&&d()},sp:function(){if(!g.throttleWindow&&
this[l])return!1;var b=a(this);e=e.Ft(b);b.Go(h);e.length||clearTimeout(k)},add:function(b){function d(b,g,k){var m=a(this),l=a.data(this,h);l||(l=a.data(this,h,{}));l.Ni=g!==c?g:m.width();l.Ne=k!==c?k:m.height();e.apply(this,arguments)}if(!g.throttleWindow&&this[l])return!1;var e;if(a.Sd(b))return e=b,d;e=b.fk;b.fk=d}}})(jQuery,this);(function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),l=0,n=0,h=0;b=a.event.ty(c);b.type="mousewheel";c.wheelDelta&&(l=c.wheelDelta/120);c.detail&&(l=-c.detail/3);h=l;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(h=0,n=-1*l);void 0!==c.wheelDeltaY&&(h=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(n=-1*c.wheelDeltaX/120);d.unshift(b,l,n,h);return(a.event.Zx||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.Fr)for(var d=c.length;d;)a.event.Fr[c[--d]]=
a.event.Rz;a.event.gp.Bt={Wo:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},sp:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}};a.ub.extend({Bt:function(a){return a?this.bind("mousewheel",a):this.I("mousewheel")},FB:function(a){return this.Fa("mousewheel",a)}})})(jQuery);(function(){function a(b,c,d,h){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b instanceof e&&(b=b.mf);c instanceof e&&(c=c.mf);var g=q.call(b);if(g!=q.call(c))return!1;switch(g){case "[object String]":return b==c+"";case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||
"object"!=typeof c)return!1;for(var k=d.length;k--;)if(d[k]==b)return h[k]==c;d.push(b);h.push(c);var k=0,m=!0;if("[object Array]"==g){if(k=b.length,m=k==c.length)for(;k--&&(m=a(b[k],c[k],d,h)););}else{var g=b.constructor,l=c.constructor;if(g!==l&&!(e.Sd(g)&&g instanceof g&&e.Sd(l)&&l instanceof l))return!1;for(var n in b)if(e.tc(b,n)&&(k++,!(m=e.tc(c,n)&&a(b[n],c[n],d,h))))break;if(m){for(n in c)if(e.tc(c,n)&&!k--)break;m=!k}}return d.pop(),h.pop(),m}function b(a,c,d){return C(a,function(a){e.isArray(a)?
c?m.apply(d,a):b(a,c,d):d.push(a)}),d}function c(a,b,c,h){var g={},k=d(b||e.Pe);return C(a,function(b,d){var e=k.call(c,b,d,a);h(g,e,b)}),g}function d(a){return e.Sd(a)?a:function(b){return b[a]}}function e(a){return a instanceof e?a:this instanceof e?(this.mf=a,void 0):new e(a)}var g=this,k=g.ij,l={},n=Array.prototype,h=Object.prototype,m=n.push,p=n.slice,s=n.concat,q=h.toString,u=h.hasOwnProperty,v=n.forEach,r=n.map,z=n.reduce,w=n.reduceRight,t=n.filter,F=n.every,L=n.some,R=n.indexOf,J=n.lastIndexOf,
h=Array.isArray,M=Object.keys,Q=Function.prototype.bind;"undefined"!=typeof exports?("undefined"!=typeof module&&module.Cr&&(exports=module.Cr=e),exports.ij=e):g.ij=e;e.VERSION="1.4.4";var C=e.b=e.forEach=function(a,b,c){if(null!=a)if(v&&a.forEach===v)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,h=a.length;h>d&&b.call(c,a[d],d,a)!==l;d++);else for(d in a)if(e.tc(a,d)&&b.call(c,a[d],d,a)===l)break};e.map=e.xx=function(a,b,c){var d=[];return null==a?d:r&&a.map===r?a.map(b,c):(C(a,function(a,
e,h){d[d.length]=b.call(c,a,e,h)}),d)};e.reduce=e.wy=e.az=function(a,b,c,d){var h=2<arguments.length;if(null==a&&(a=[]),z&&a.reduce===z)return d&&(b=e.bind(b,d)),h?a.reduce(b,c):a.reduce(b);if(C(a,function(a,e,g){h?c=b.call(d,c,a,e,g):(c=a,h=!0)}),!h)throw new TypeError("Reduce of empty array with no initial value");return c};e.reduceRight=e.xy=function(a,b,c,d){var h=2<arguments.length;if(null==a&&(a=[]),w&&a.reduceRight===w)return d&&(b=e.bind(b,d)),h?a.reduceRight(b,c):a.reduceRight(b);var g=a.length;
if(g!==+g)var k=e.keys(a),g=k.length;if(C(a,function(e,m,l){m=k?k[--g]:--g;h?c=b.call(d,c,a[m],m,l):(c=a[m],h=!0)}),!h)throw new TypeError("Reduce of empty array with no initial value");return c};e.find=e.Wx=function(a,b,c){var d;return N(a,function(a,e,h){return b.call(c,a,e,h)?(d=a,!0):void 0}),d};e.filter=e.select=function(a,b,c){var d=[];return null==a?d:t&&a.filter===t?a.filter(b,c):(C(a,function(a,e,h){b.call(c,a,e,h)&&(d[d.length]=a)}),d)};e.qu=function(a,b,c){return e.filter(a,function(a,
d,e){return!b.call(c,a,d,e)},c)};e.every=e.all=function(a,b,c){b||(b=e.Pe);var d=!0;return null==a?d:F&&a.every===F?a.every(b,c):(C(a,function(a,e,h){return(d=d&&b.call(c,a,e,h))?void 0:l}),!!d)};var N=e.some=e.gx=function(a,b,c){b||(b=e.Pe);var d=!1;return null==a?d:L&&a.some===L?a.some(b,c):(C(a,function(a,e,h){return d||(d=b.call(c,a,e,h))?l:void 0}),!!d)};e.contains=e.Zy=function(a,b){return null==a?!1:R&&a.indexOf===R?-1!=a.indexOf(b):N(a,function(a){return a===b})};e.fz=function(a,b){var c=
p.call(arguments,2),d=e.Sd(b);return e.map(a,function(a){return(d?b:a[b]).apply(a,c)})};e.Mk=function(a,b){return e.map(a,function(a){return a[b]})};e.Jv=function(a,b){return e.rk(b)?null:e.find(a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};e.ny=function(a,b){return e.Jv(a,b)};e.max=function(a,b,c){if(!b&&e.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&e.rk(a))return-1/0;var d={wg:-1/0,value:-1/0};return C(a,function(a,e,h){e=b?b.call(c,a,e,h):a;
e>=d.wg&&(d={value:a,wg:e})}),d.value};e.min=function(a,b,c){if(!b&&e.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&e.rk(a))return 1/0;var d={wg:1/0,value:1/0};return C(a,function(a,e,h){e=b?b.call(c,a,e,h):a;d.wg>e&&(d={value:a,wg:e})}),d.value};e.fB=function(a){var b,c=0,d=[];return C(a,function(a){b=e.random(c++);d[c-1]=d[b];d[b]=a}),d};e.Vc=function(a,b){var c=d(b);return e.Mk(e.map(a,function(a,b,d){return{value:a,index:b,zm:c.call(void 0,a,b,d)}}).sort(function(a,
b){var c=a.zm,d=b.zm;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};e.dk=function(a,b){return c(a,b,void 0,function(a,b,c){(e.tc(a,b)?a[b]:a[b]=[]).push(c)})};e.Hx=function(a,b,d){return c(a,b,d,function(a,b){e.tc(a,b)||(a[b]=0);a[b]++})};e.Zu=function(a,b){var c;c=null==c?e.Pe:d(c);for(var h=c.call(void 0,b),g=0,k=a.length;k>g;){var m=g+k>>>1;h>c.call(void 0,a[m])?g=m+1:k=m}return g};e.vB=function(a){return a?e.isArray(a)?p.call(a):a.length===
+a.length?e.map(a,e.Pe):e.Ev(a):[]};e.size=function(a){return null==a?0:a.length===+a.length?a.length:e.keys(a).length};e.ry=e.head=e.mB=function(a,b,c){return null==a?void 0:null==b||c?a[0]:p.call(a,0,b)};e.$y=function(a,b,c){return p.call(a,0,a.length-(null==b||c?1:b))};e.xz=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:p.call(a,Math.max(a.length-b,0))};e.JA=e.lB=e.sr=function(a,b,c){return p.call(a,null==b||c?1:b)};e.compact=function(a){return e.filter(a,e.Pe)};e.uy=function(a,
c){return b(a,c,[])};e.MB=function(a){return e.mr(a,p.call(arguments,1))};e.Bp=e.unique=function(a,b,c,d){e.Sd(b)&&(d=c,c=b,b=!1);c=c?e.map(a,c,d):a;var h=[],g=[];return C(c,function(c,d){(b?d&&g[g.length-1]===c:e.contains(g,c))||(g.push(c),h.push(a[d]))}),h};e.xv=function(){return e.Bp(s.apply(n,arguments))};e.ez=function(a){var b=p.call(arguments,1);return e.filter(e.Bp(a),function(a){return e.every(b,function(b){return 0<=e.indexOf(b,a)})})};e.mr=function(a){var b=s.apply(n,p.call(arguments,1));
return e.filter(a,function(a){return!e.contains(b,a)})};e.QB=function(){for(var a=p.call(arguments),b=e.max(e.Mk(a,"length")),c=Array(b),d=0;b>d;d++)c[d]=e.Mk(a,""+d);return c};e.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};e.indexOf=function(a,b,c){if(null==a)return-1;var d=0,h=a.length;if(c){if("number"!=typeof c)return d=e.Zu(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,h+c):c}if(R&&a.indexOf===R)return a.indexOf(b,c);for(;h>d;d++)if(a[d]===
b)return d;return-1};e.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(J&&a.lastIndexOf===J)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===b)return c;return-1};e.ah=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,h=Array(d);d>e;)h[e++]=a,a+=c;return h};e.bind=function(a,b){if(a.bind===Q&&Q)return Q.apply(a,p.call(arguments,1));var c=p.call(arguments,2);return function(){return a.apply(b,
c.concat(p.call(arguments)))}};e.mA=function(a){var b=p.call(arguments,1);return function(){return a.apply(this,b.concat(p.call(arguments)))}};e.ox=function(a){var b=p.call(arguments,1);return 0===b.length&&(b=e.Xm(a)),C(b,function(b){a[b]=e.bind(a[b],a)}),a};e.Hz=function(a,b){var c={};return b||(b=e.Pe),function(){var d=b.apply(this,arguments);return e.tc(c,d)?c[d]:c[d]=a.apply(this,arguments)}};e.Vb=function(a,b){var c=p.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};
e.defer=function(a){return e.Vb.apply(e,[a,1].concat(p.call(arguments,1)))};e.pB=function(a,b){function c(){k=new Date;h=null;g=a.apply(d,e)}var d,e,h,g,k=0;return function(){var m=new Date,l=b-(m-k);return d=this,e=arguments,0>=l?(clearTimeout(h),h=null,k=m,g=a.apply(d,e)):h||(h=setTimeout(c,l)),g}};e.Rx=function(a,b,c){var d,e;return function(){var h=this,g=arguments,k=c&&!d;return clearTimeout(d),d=setTimeout(function(){d=null;c||(e=a.apply(h,g))},b),k&&(e=a.apply(h,g)),e}};e.eA=function(a){var b,
c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}};e.Kv=function(a,b){return function(){var c=[a];return m.apply(c,arguments),b.apply(this,c)}};e.Bx=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};e.Xw=function(a,b){return 0>=a?b():function(){return 1>--a?b.apply(this,arguments):void 0}};e.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)e.tc(a,c)&&
(b[b.length]=c);return b};e.Ev=function(a){var b=[],c;for(c in a)e.tc(a,c)&&b.push(a[c]);return b};e.jA=function(a){var b=[],c;for(c in a)e.tc(a,c)&&b.push([c,a[c]]);return b};e.qk=function(a){var b={},c;for(c in a)e.tc(a,c)&&(b[a[c]]=c);return b};e.Xm=e.ki=function(a){var b=[],c;for(c in a)e.Sd(a[c])&&b.push(c);return b.sort()};e.extend=function(a){return C(p.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a};e.Tt=function(a){var b={},c=s.apply(n,p.call(arguments,1));return C(c,function(c){c in
a&&(b[c]=a[c])}),b};e.cA=function(a){var b={},c=s.apply(n,p.call(arguments,1)),d;for(d in a)e.contains(c,d)||(b[d]=a[d]);return b};e.He=function(a){return C(p.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a};e.wm=function(a){return e.uk(a)?e.isArray(a)?a.slice():e.extend({},a):a};e.nB=function(a,b){return b(a),a};e.isEqual=function(b,c){return a(b,c,[],[])};e.rk=function(a){if(null==a)return!0;if(e.isArray(a)||e.Xs(a))return 0===a.length;for(var b in a)if(e.tc(a,b))return!1;
return!0};e.jz=function(a){return!(!a||1!==a.nodeType)};e.isArray=h||function(a){return"[object Array]"==q.call(a)};e.uk=function(a){return a===Object(a)};C("Arguments Function String Number Date RegExp".split(" "),function(a){e["is"+a]=function(b){return q.call(b)=="[object "+a+"]"}});e.Ms(arguments)||(e.Ms=function(a){return!(!a||!e.tc(a,"callee"))});"function"!=typeof/./&&(e.Sd=function(a){return"function"==typeof a});e.kz=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};e.mz=function(a){return e.Vs(a)&&
a!=+a};e.Ns=function(a){return!0===a||!1===a||"[object Boolean]"==q.call(a)};e.Us=function(a){return null===a};e.pz=function(a){return void 0===a};e.tc=function(a,b){return u.call(a,b)};e.Zz=function(){return g.ij=k,this};e.Pe=function(a){return a};e.uB=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d};e.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
S.unescape=e.qk(S.escape);var Z={escape:RegExp("["+e.keys(S.escape).join("")+"]","g"),unescape:RegExp("("+e.keys(S.unescape).join("|")+")","g")};e.b(["escape","unescape"],function(a){e[a]=function(b){return null==b?"":(""+b).replace(Z[a],function(b){return S[a][b]})}});e.result=function(a,b){if(null==a)return null;var c=a[b];return e.Sd(c)?c.call(a):c};e.yt=function(a){C(e.Xm(a),function(b){var c=e[b]=a[b];e.prototype[b]=function(){var a=[this.mf];m.apply(a,arguments);a=c.apply(e,a);return this.jj?
e(a).ug():a}})};var Ea=0;e.DB=function(a){var b=++Ea+"";return a?a+b:b};e.jv={evaluate:/<%([\s\S]+?)%>/g,Js:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ia=/(.)^/,ca={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Fa=/\\|'|\r|\n|\t|\u2028|\u2029/g;e.Ii=function(a,b,c){function d(a){return h.call(this,a,e)}var h;c=e.He({},c,e.jv);var g=0,k="__p+='";a.replace(RegExp([(c.escape||ia).source,(c.Js||ia).source,(c.evaluate||ia).source].join("|")+"|$","g"),function(b,
c,d,e,h){return k+=a.slice(g,h).replace(Fa,function(a){return"\\"+ca[a]}),c&&(k+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(k+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(k+="';\n"+e+"\n__p+='"),g=h+b.length,b});k+="';\n";c.Fp||(k="with(obj||{}){\n"+k+"}\n");k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=Function(c.Fp||"obj","_",k)}catch(m){throw m.source=k,m;}return b?h(b,e):(d.source="function("+(c.Fp||"obj")+"){\n"+
k+"}",d)};e.ug=function(a){return e(a).ug()};e.yt(e);C("pop push reverse shift sort splice unshift".split(" "),function(a){var b=n[a];e.prototype[a]=function(){var c=this.mf;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],this.jj?e(c).ug():c}});C(["concat","join","slice"],function(a){var b=n[a];e.prototype[a]=function(){var a=b.apply(this.mf,arguments);return this.jj?e(a).ug():a}});e.extend(e.prototype,{ug:function(){return this.jj=!0,this},value:function(){return this.mf}})}).call(this);var wa;
wa=wa||function(a){function b(a,b,c){for(var d in m.prototype)m.prototype.hasOwnProperty(d)&&(a[d]=m.prototype[d]);return a.rd={zc:b,Ss:!!c},a}function c(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.ky?"x":"")+(a.hv?"y":"")}function d(a,d,e){if(!m.Te(a))throw new TypeError("type RegExp expected");d=u.replace.call(c(a)+(d||""),F,"");return e&&(d=u.replace.call(d,RegExp("["+e+"]+","g"),"")),a.rd&&!a.rd.Ss?b(m(a.source,d),a.rd.zc?a.rd.zc.slice(0):null):b(RegExp(a.source,d),
null,!0)}function e(a,b){var c=a.length;if(Array.prototype.lastIndexOf)return a.lastIndexOf(b);for(;c--;)if(a[c]===b)return c;return-1}function g(a,b){return Object.prototype.toString.call(a).toLowerCase()==="[object "+b+"]"}function k(a){return a=a||{},"all"===a||a.all?a={Pf:!0,Af:!0}:g(a,"string")&&(a=m.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{})),a}function l(a,b,c,d){var e=z.length,h=null,g,k;M=!0;try{for(;e--;)if(k=z[e],("all"===k.scope||k.scope===c)&&(!k.I||k.I.call(d))&&(k.pattern.lastIndex=
b,g=v.exec.call(k.pattern,a),g&&g.index===b)){h={Ot:k.fk.call(d,g,c),match:g};break}}catch(m){throw m;}finally{M=!1}return h}function n(a){m.wq=p[a?"on":"off"];q.Af=a}function h(a){RegExp.prototype.exec=(a?v:u).exec;RegExp.prototype.test=(a?v:u).test;String.prototype.match=(a?v:u).match;String.prototype.replace=(a?v:u).replace;String.prototype.split=(a?v:u).split;q.Pf=a}var m,p,s,q={Pf:!1,Af:!1},u={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,
split:String.prototype.split},v={},r={},z=[],w={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},t=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,F=/([\s\S])(?=[\s\S]*\1)/g,L=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,R=u.exec.call(/()??/,"")[1]===a,J=RegExp.prototype.hv!==a,M=!1,Q="gim"+(J?"y":"");return m=function(c,e){if(m.Te(c)){if(e!==
a)throw new TypeError("can't supply flags when constructing one RegExp from another");return d(c)}if(M)throw Error("can't call the XRegExp constructor within token definition functions");var h=[],g="default",k={nn:!1,zc:[],hk:function(a){return-1<e.indexOf(a)}},n=0,p,s,q;if(c=c===a?"":String(c),e=e===a?"":String(e),u.match.call(e,F))throw new SyntaxError("invalid duplicate regular expression flag");c=u.replace.call(c,/^\(\?([\w$]+)\)/,function(a,b){if(u.test.call(/[gy]/,b))throw new SyntaxError("can't use flag g or y in mode modifier");
return e=u.replace.call(e+b,F,""),""});for(m.forEach(e,/[\s\S]/,function(a){if(0>Q.indexOf(a[0]))throw new SyntaxError("invalid regular expression flag "+a[0]);});n<c.length;)(p=l(c,n,g,k))?(h.push(p.Ot),n+=p.match[0].length||1):(s=u.exec.call(w[g],c.slice(n)),s?(h.push(s[0]),n+=s[0].length):(q=c.charAt(n),"["===q?g="class":"]"===q&&(g="default"),h.push(q),++n));return b(RegExp(h.join(""),u.replace.call(e,/[^gimy]+/g,"")),k.nn?k.zc:null)},p={s:function(a,b,c){c=c||{};a&&z.push({pattern:d(a,"g"+(J?
"y":"")),fk:b,scope:c.scope||"default",I:c.I||null});c.Gh&&(Q=u.replace.call(Q+c.Gh,F,""))},D:function(){throw Error("extensibility must be installed before using addToken");}},m.wq=p.D,m.Ah=function(a,b){var c=a+"/"+(b||"");return r[c]||(r[c]=m(a,b))},m.escape=function(a){return u.replace.call(a,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},m.exec=function(a,b,c,e){var h=d(b,"g"+(e&&J?"y":""),!1===e?"y":""),g;return h.lastIndex=c=c||0,g=v.exec.call(h,a),e&&g&&g.index!==c&&(g=null),b.global&&(b.lastIndex=g?
h.lastIndex:0),g},m.forEach=function(a,b,c,d){for(var e=0,h=-1;e=m.exec(a,b,e);)c.call(d,e,++h,a,b),e=e.index+(e[0].length||1);return d},m.My=function(a){return d(a,"g")},m.dz=function(a){a=k(a);!q.Pf&&a.Pf&&h(!0);!q.Af&&a.Af&&n(!0)},m.lz=function(a){return!!q[a]},m.Te=function(a){return g(a,"regexp")},m.Ez=function(a,b){return function Z(a,c){function d(a){h.push(e.Hq?a[e.Hq]||"":a[0])}for(var e=b[c].Fo?b[c]:{Fo:b[c]},h=[],g=0;g<a.length;++g)m.forEach(a[g],e.Fo,d);return c!==b.length-1&&h.length?
Z(h,c+1):h}([a],0)},m.replace=function(b,c,e,h){var g=m.Te(c),k=c,l;return g?(h===a&&c.global&&(h="all"),k=d(c,"all"===h?"g":"","all"===h?"":"g")):"all"===h&&(k=RegExp(m.escape(String(c)),"g")),l=v.replace.call(String(b),k,e),g&&c.global&&(c.lastIndex=0),l},m.split=function(a,b,c){return v.split.call(a,b,c)},m.test=function(a,b,c,d){return!!m.exec(a,b,c,d)},m.CB=function(a){a=k(a);q.Pf&&a.Pf&&h(!1);q.Af&&a.Af&&n(!1)},m.xv=function(a,b){function c(a,b,d){var g=k[e-h];if(b){if(++e,g)return"(?<"+g+">"}else if(d)return"\\"+
(+d+h);return a}var d=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=0,h,k,l=[],n,p;if(!g(a,"array")||!a.length)throw new TypeError("patterns must be a nonempty array");for(p=0;p<a.length;++p)n=a[p],m.Te(n)?(h=e,k=n.rd&&n.rd.zc||[],l.push(m(n.source).source.replace(d,c))):l.push(m.escape(n));return m(l.join("|"),b)},m.version="2.0.0",v.exec=function(b){var d,h,g,k;if(this.global||(g=this.lastIndex),d=u.exec.apply(this,arguments),d){if(!R&&1<d.length&&-1<e(d,"")&&(h=RegExp(this.source,
u.replace.call(c(this),"g","")),u.replace.call(String(b).slice(d.index),h,function(){for(var b=1;b<arguments.length-2;++b)arguments[b]===a&&(d[b]=a)})),this.rd&&this.rd.zc)for(k=1;k<d.length;++k)(h=this.rd.zc[k-1])&&(d[h]=d[k]);this.global&&!d[0].length&&this.lastIndex>d.index&&(this.lastIndex=d.index)}return this.global||(this.lastIndex=g),d},v.test=function(a){return!!v.exec.call(this,a)},v.match=function(a){if(m.Te(a)){if(a.global){var b=u.match.apply(this,arguments);return a.lastIndex=0,b}}else a=
RegExp(a);return v.exec.call(a,this)},v.replace=function(a,b){var c=m.Te(a),d,h,k,l;return c?(a.rd&&(d=a.rd.zc),a.global||(l=a.lastIndex)):a+="",g(b,"function")?h=u.replace.call(String(this),a,function(){var e=arguments,h;if(d)for(e[0]=new String(e[0]),h=0;h<d.length;++h)d[h]&&(e[0][d[h]]=e[h+1]);return c&&a.global&&(a.lastIndex=e[e.length-2]+e[0].length),b.apply(null,e)}):(k=String(this),h=u.replace.call(k,a,function(){var a=arguments;return u.replace.call(String(b),t,function(b,c,h){var g;if(c){if(g=
+c,g<=a.length-3)return a[g]||"";if(g=d?e(d,c):-1,0>g)throw new SyntaxError("backreference to undefined group "+b);return a[g+1]||""}if("$"===h)return"$";if("&"===h||0==+h)return a[0];if("`"===h)return a[a.length-1].slice(0,a[a.length-2]);if("'"===h)return a[a.length-1].slice(a[a.length-2]+a[0].length);if(h=+h,!isNaN(h)){if(h>a.length-3)throw new SyntaxError("backreference to undefined group "+b);return a[h]||""}throw new SyntaxError("invalid token "+b);})})),c&&(a.lastIndex=a.global?0:l),h},v.split=
function(b,c){if(!m.Te(b))return u.split.apply(this,arguments);var d=String(this),e=b.lastIndex,h=[],g=0,k;return c=(c===a?-1:c)>>>0,m.forEach(d,b,function(a){a.index+a[0].length>g&&(h.push(d.slice(g,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(h,a.slice(1)),k=a[0].length,g=a.index+k)}),g===d.length?(!u.test.call(b,"")||k)&&h.push(""):h.push(d.slice(g)),b.lastIndex=e,h.length>c?h.slice(0,c):h},s=p.s,s(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("invalid escape "+a[0]);},{scope:"all"}),s(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"}),s(/(?:\(\?#[^)]*\))+/,function(a){return u.test.call(L,a.input.slice(a.index+a[0].length))?"":"(?:)"}),s(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?e(this.zc,a[1])+1:+a[1],c=a.index+a[0].length;if(!b||b>this.zc.length)throw new SyntaxError("backreference to undefined group "+a[0]);return"\\"+b+(c===a.input.length||isNaN(a.input.charAt(c))?
"":"(?:)")}),s(/(?:\s+|#.*)+/,function(a){return u.test.call(L,a.input.slice(a.index+a[0].length))?"":"(?:)"},{I:function(){return this.hk("x")},Gh:"x"}),s(/\./,ga("[\\s\\S]"),{I:function(){return this.hk("s")},Gh:"s"}),s(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("can't use integer as capture name "+a[0]);return this.zc.push(a[1]),this.nn=!0,"("}),s(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.zc.length)&&"0"!==a[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+
a[0]);return a[0]},{scope:"all"}),s(/\((?!\?)/,function(){return this.hk("n")?"(?:":(this.zc.push(null),"(")},{Gh:"n"}),"undefined"!=typeof exports&&(exports.Pw=m),m}();!function(a){function b(a,b){this.C("tooltip",a,b)}b.prototype={constructor:b,C:function(b,d,e){this.type=b;this.Ab=a(d);this.options=this.dn(e);this.enabled=!0;"click"==this.options.I?this.Ab.s("click."+this.type,this.options.Xf,a.$g(this.toggle,this)):"manual"!=this.options.I&&(b="hover"==this.options.I?"mouseenter":"focus",d="hover"==this.options.I?"mouseleave":"blur",this.Ab.s(b+"."+this.type,this.options.Xf,a.$g(this.yr,this)),this.Ab.s(d+"."+this.type,this.options.Xf,a.$g(this.kt,this)));this.options.Xf?
this.Sl=a.extend({},this.options,{I:"manual",Xf:""}):this.Gr()},dn:function(b){b=a.extend({},a.ub[this.type].He,b,this.Ab.data());b.Vb&&"number"==typeof b.Vb&&(b.Vb={show:b.Vb,P:b.Vb});return b},yr:function(b){var d=a(b.currentTarget)[this.type](this.Sl).data(this.type);if(!d.options.Vb||!d.options.Vb.show)return d.show();clearTimeout(this.timeout);d.lk="in";this.timeout=setTimeout(function(){"in"==d.lk&&d.show()},d.options.Vb.show)},kt:function(b){var d=a(b.currentTarget)[this.type](this.Sl).data(this.type);
this.timeout&&clearTimeout(this.timeout);if(!d.options.Vb||!d.options.Vb.P)return d.P();d.lk="out";this.timeout=setTimeout(function(){"out"==d.lk&&d.P()},d.options.Vb.P)},show:function(){var a,b,e,g,k,l,n;if(this.gk()&&this.enabled){a=this.xc();this.Dd();this.options.ab&&a.p("fade");l="function"==typeof this.options.Vd?this.options.Vd.call(this,a[0],this.Ab[0]):this.options.Vd;b=/in/.test(l);a.remove().O({top:0,left:0,display:"block"}).Dq(b?this.Ab:document.body);e=this.Cf(b);g=a[0].offsetWidth;k=
a[0].offsetHeight;switch(b?l.split(" ")[1]:l){case "bottom":n={top:e.top+e.height,left:e.left+e.width/2-g/2};break;case "top":n={top:e.top-k,left:e.left+e.width/2-g/2};break;case "left":n={top:e.top+e.height/2-k/2,left:e.left-g};break;case "right":n={top:e.top+e.height/2-k/2,left:e.left+e.width}}a.O(n).p(l).p("in")}},Dd:function(){var a=this.xc(),b=this.Vh();a.find(".tooltip-inner")[this.options.u?"html":"text"](b);a.G("fade in top bottom left right")},P:function(){function b(){var c=setTimeout(function(){d.D(a.op.transition.end).remove()},
500);d.Mt(a.op.transition.end,function(){clearTimeout(c);d.remove()})}var d=this.xc();d.G("in");a.op.transition&&this.eg.Ea("fade")?b():d.remove();return this},Gr:function(){var a=this.Ab;(a.d("title")||"string"!=typeof a.d("data-original-title"))&&a.d("data-original-title",a.d("title")||"").Vf("title")},gk:function(){return this.Vh()},Cf:function(b){return a.extend({},b?{top:0,left:0}:this.Ab.offset(),{width:this.Ab[0].offsetWidth,height:this.Ab[0].offsetHeight})},Vh:function(){var a=this.Ab,b=this.options;
return a.d("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)},xc:function(){return this.eg=this.eg||a(this.options.Ii)},toggle:function(){this[this.xc().Ea("in")?"hide":"show"]()},ea:function(){this.P().Ab.D("."+this.type).Go(this.type)}};a.ub.lb=function(c){return this.b(function(){var d=a(this),e=d.data("tooltip"),g="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,g));if("string"==typeof c)e[c]()})};a.ub.lb.oh=b;a.ub.lb.He={ab:!0,Vd:"top",Xf:!1,Ii:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
I:"hover",title:"",Vb:0,u:!0}}(window.vk);!function(a){function b(a,b){this.C("popover",a,b)}b.prototype=a.extend({},a.ub.lb.oh.prototype,{constructor:b,Dd:function(){var a=this.xc(),b=this.Vh(),e=this.an();a.find(".popover-title")[this.options.u?"html":"text"](b);a.find(".popover-content > *")[this.options.u?"html":"text"](e);a.G("fade top bottom left right in")},gk:function(){return this.Vh()||this.an()},an:function(){var a=this.Ab,b=this.options;return a.d("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},
xc:function(){this.eg||(this.eg=a(this.options.Ii));return this.eg},ea:function(){this.P().Ab.D("."+this.type).Go(this.type)}});a.ub.Sf=function(c){return this.b(function(){var d=a(this),e=d.data("popover"),g="object"==typeof c&&c;e||d.data("popover",e=new b(this,g));if("string"==typeof c)e[c]()})};a.ub.Sf.oh=b;a.ub.Sf.He=a.extend({},a.ub.lb.He,{Vd:"right",I:"click",content:"",Ii:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.vk);!function(a){function b(a,b){this.Qq("clickover",a,b)}b.prototype=a.extend({},a.ub.Sf.oh.prototype,{constructor:b,Qq:function(b,d,e){this.d={};this.d.Un=(10*Math.random()+"").replace(/\D/g,"");this.d.tm="click."+this.d.Un+" touchstart."+this.d.Un;e||(e={});e.I="manual";this.C(b,d,e);this.Ab.s("click",this.options.Xf,a.$g(this.rf,this))},rf:function(b){b&&(b.preventDefault(),b.stopPropagation());this.options.width&&this.xc().width(this.options.width);this.options.height&&this.xc().height(this.options.height);
this.options.wp&&this.xc().d("id",this.options.wp);this.options.sm&&this.xc().p(this.options.sm);this[this.Dn()?"hide":"show"]();if(this.Dn()){var d=this;this.options.gs&&a("body").s(this.d.tm,function(a){d.xc().tc(a.target).length||d.rf()});this.options.Tm&&a(document).bind("keyup.clickery",function(a){27==a.keyCode&&d.rf()});!this.options.Aq&&a("[data-clickover-open=1]").b(function(){a(this).data("clickover")&&a(this).data("clickover").rf()});this.Ab.d("data-clickover-open",1);this.xc().s("click",
'[data-dismiss="clickover"]',a.$g(this.rf,this));this.options.tj&&0<this.options.tj&&(this.d.ol=setTimeout(a.$g(this.rf,this),this.options.tj));"function"==typeof this.options.no&&this.options.no.call(this);this.Ab.I("shown")}else this.Ab.Vf("data-clickover-open"),this.options.Tm&&a(document).Fa("keyup.clickery"),a("body").D(this.d.tm),"number"==typeof this.d.ol&&(clearTimeout(this.d.ol),delete this.d.ol),"function"==typeof this.options.mo&&this.options.mo.call(this),this.Ab.I("hidden")},Dn:function(){return this.xc().Ea("in")},
HA:function(){var a,b,e,g,k,l,n;if(this.gk()&&this.enabled){a=this.xc();l="function"==typeof this.options.Vd?this.options.Vd.call(this,a[0],this.Ab[0]):this.options.Vd;b=/in/.test(l);e=this.Cf(b);g=a[0].offsetWidth;k=a[0].offsetHeight;switch(b?l.split(" ")[1]:l){case "bottom":n={top:e.top+e.height,left:e.left+e.width/2-g/2};break;case "top":n={top:e.top-k,left:e.left+e.width/2-g/2};break;case "left":n={top:e.top+e.height/2-k/2,left:e.left-g};break;case "right":n={top:e.top+e.height/2-k/2,left:e.left+
e.width}}a.O(n)}},Sx:function(){console.log((new Date).toString()+": clickover hide");this.P()}});a.ub.um=function(c){return this.b(function(){var d=a(this),e=d.data("clickover"),g="object"==typeof c&&c;e||d.data("clickover",e=new b(this,g));if("string"==typeof c)e[c]()})};a.ub.um.oh=b;a.ub.um.He=a.extend({},a.ub.Sf.He,{I:"manual",tj:0,gs:1,Tm:1,no:null,mo:null,width:null,height:null,wp:null,sm:"clickover",Aq:0})}(window.vk);var D=D||{};D.VERSION="[[JARVIS-VERSION]]";D.Kl="[[JARVIS-TOKEN]]";D.global=this;D.kA=!1;D.ji=!0;D.qt=new Date;D.Tp=!0;D.Al=10;D.nw="en";D.qh="";D.Fx="/assets/";D.pp="";D.wj="/client/api/";D.global.Wv="";D.dr="mmm dd, yyyy";D.Hm=!1;D.qf=eval("[[JARVIS-BOOTSTRAP]]");D.kl=null;D.jl=null;D.cw=!0;"undefined"!=typeof console?console.log("Jarvis Client SDK Started, version "+D.VERSION+"."):console={log:f()};D.$z=f();D.Yy=function(a){return a};
D.Tw=function(){throw Error("unimplemented abstract method");};D.Ww=function(a){a.Ey=function(){return a.Is||(a.Is=new a)}};D.Vw=f();D.GA=f();D.ba=function(a){D.Br(a)};D.Br=function(a){a=a.split(".");var b=D.global;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var c;a.length&&(c=a.shift());)!a.length&&D.An(void 0)?b[c]=void 0:b=b[c]?b[c]:b[c]={}};D.Hy=function(a,b){for(var c=a.split("."),d=b||D.global,e;e=c.shift();)if(D.Ps(d[e]))d=d[e];else return null;return d};
D.Mi=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};D.ku=function(a,b){if(b in a)for(var c in a)if(c==b&&Object.prototype.hasOwnProperty.call(a,b))return!0;return!1};D.yA=function(a,b){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,b):D.ku(a,b)};D.An=function(a){return void 0!==a};D.Us=function(a){return null===a};D.Ps=function(a){return null!=a};D.isArray=function(a){return"array"==D.Mi(a)};
D.gz=function(a){var b=D.Mi(a);return"array"==b||"object"==b&&"number"==typeof a.length};D.hz=function(a){return D.uk(a)&&"function"==typeof a.getFullYear};D.Xs=function(a){return"string"==typeof a};D.Ns=function(a){return"boolean"==typeof a};D.Vs=function(a){return"number"==typeof a};D.Sd=function(a){return"function"==D.Mi(a)};D.uk=function(a){a=D.Mi(a);return"object"==a||"array"==a||"function"==a};Date.Ge=function(a,b){var c;c="d";return Math.floor((b-a)/{Ni:6048E5,ib:864E5,Ne:36E5,Xz:6E4,NA:1E3}[c])};
D.sg=[];D.Ah={};D.Ah.push=function(a,b){var c=!1;$(D.sg).b(function(b,e){e.key==a&&(c=!0)});c||D.sg.push({key:a,value:b})};D.Ah.remove=function(a){var b=-1;$(D.sg).b(function(c,d){d.key==a&&(b=c)});D.sg.splice(b,1)};D.Ah.get=function(a){var b;$(D.sg).b(function(c,d){d.key==a&&(b=d)});return b};function xa(a,b){return 0==a?0:100*((b-a)/a)}function za(a){return jQuery.extend(!0,{},a)}D.oa="#058DC7 #ED7E17 #50B432 #AF49C5 #EDEF00 #8080FF #A0A424 #E3071C #6AF9C4 #B2DEFF #64E572 #CCCCCC".split(" ");
D.Td="#AADFF3 #F2D5BD #C9E7BE #E1C9E8 #F6F3B1 #DADBFB #E7E6B4 #F4B3BC #AADFF3 #F2D5BD #C9E7BE #EEEEEE".split(" ");D.Ih=[];D.af=[];D.Wa=function(){return D.Ih[0]};D.Ju=function(a){D.Ih=[];D.Ih.push(a)};D.Jy=function(){return D.af[0]};D.Nu=function(a){D.af=[];D.af.push(a)};D.yk;D.state={view:"",Hh:-1,ga:-1,W:-1,Uj:null,Ap:null};D.Xb=!1;
D.bh=function(a){if(D.ji)if(!0==D.Xb)D.debug.log("INFO","jarvis",5,"Skipping save state ("+a+")");else{D.Xb=!0;D.debug.log("INFO","jarvis",5,"Saving state ("+a+")");var b=Ma().replace(/-/g,"");D.state.Py=b;D.yk=b;D.state.timestamp=new Date;if("undefined"==typeof localStorage)alert("Your browser does not support HTML5 localStorage. Try upgrading.");else try{Na(new D.f.jg,{id:b,state:JSON.stringify(D.state)},function(){D.debug.log("INFO","jarvis",5,"State saved ("+b+")");location.hash=b;setTimeout(function(){D.Xb=
!1},500)})}catch(c){c==QUOTA_EXCEEDED_ERR&&alert("Quota exceeded!")}}};D.pt=function(a){if(""==a||!D.ji)return null;D.debug.log("INFO","jarvis",5,"Loading state ("+a+")");D.Xb=!0;try{var b=Ra(new D.f.jg,{id:a});D.yk=a;setTimeout(function(){D.Xb=!1},5E3);return JSON.parse(b.data)}catch(c){return null}};
function Sa(){var a=location.hash,a=location.hash.replace("#","");if(""!=a&&D.ji)if(D.debug.log("INFO","jarvis",5,"Updating state ("+a+")"),a==D.yk)D.debug.log("INFO","jarvis",5,"State hash match.");else{if(a=D.pt(a))D.state=a;D.a.qf()}}function Ma(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}D.dd=0;D.load=f();D.hostname="[[JARVIS-HOST]]";
D.Rm={content:"[[JARVIS-ENDPOINT-CONTENT]]",lu:"[[JARVIS-ENDPOINT-QUERY]]",Cq:"[[JARVIS-ENDPOINT-API]]"};try{if("undefined"==typeof D.hostname||""==D.hostname){var Ta=$("script[src*=jarvis\\.js]").d("src");document.createElement("a").href=Ta;D.hostname=window.location.protocol+"//"+window.location.hostname}}catch(Ua){console.log("Failed to get script source"),console.log(Ua)}$('link[href*="'+this.Nj+'"]').length||$("head").append('<style type="text/css">@import "'+this.Nj+'";</style> ');
D.loaded=[];$(document).ou(function(){$.ub.ui=function(){var a=$.Dz(arguments);this.b(function(){var b=$(this),c=b.d("style");if("string"===typeof c){for(var c=$.trim(c),c=c.split(/;+/),d=c.length,e=a.length,g=0;g<e;g++){var k=a[g];if(k)for(var l=0;l<d;){var n=$.trim(c[l]);!n||0===n.indexOf(k)&&0===$.trim(n.substring(k.length)).indexOf(":")?(c.splice(l,1),d--):l++}}0===c.length?b.Vf("style"):b.d("style",c.join(";"))}})}});D.ba("jarvis.string");D.M.repeat=function(a,b){return Array(b+1).join(a)};D.M.Pt=function(a){a=D.An(3)?a.toFixed(3):String(a);var b=a.indexOf(".");-1==b&&(b=a.length);return D.M.repeat(" ",Math.max(0,4-b))+a};D.M.R=function(a,b,c){a=parseFloat(a);-1<b&&(a=D.M.yi(a,b));if(!0==c){x=(a+"").split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");a=x1+x2}return a};
D.M.yi=function(a,b){if(!b)return Math.round(a);if(0==a){for(var c="",d=0;d<b;d++)c+="0";return"0."+c}c=Math.round(a*Math.pow(10,b)).toString();c=c.slice(0,-1*b)+"."+c.slice(-1*b);1>c&&0<c?c="0"+c:-1<c&&0>c&&(c="-0"+c.replace("-",""));return c};
D.M.$o=function(a){"number"!==typeof a&&(a=Number(a));var b=0>a?"-":"",c="kMGTPEZY".split(""),d=Math.pow(10,3*c.length+3);a=Math.abs(Math.round(a));if(1E3>a)return b+a;if(1E100<=a)return b+"many";if(a>=d)return(b+a).replace(/(\.\d*)?e\+?/i,"e");do if(a=Math.floor(a),d=c.shift(),a/=1E3,!(1E3<=a))return(b+a).replace(/(\.\d\d).*/,"$1")+d;while(c.length);return b+"many"};
D.M.ai=function(a){var b=Math.round(a/60/60-0.5,0).toString(),c=(Math.round(a/60-0.5,0)%60).toString();a=parseInt(a%60).toString();1==b.length&&(b="0"+b);1==c.length&&(c="0"+c);1==a.length&&(a="0"+a);return b+":"+c+":"+a};D.ba("jarvis.date");D.e.cs=function(){return new Date};
D.e.g=function(a,b,c){c&&(a=new Date(a),a.setHours(a.getHours()+3));if(a instanceof Date){c=a.getFullYear();var d=c.toString().substring(2),e=a.getMonth()+1,g=10>e?"0"+e:e,e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[e-1],k=a.getDate(),k=10>k?"0"+k:k,l=a.getHours(),l=10>l?"0"+l:l,n=a.getMinutes(),n=10>n?"0"+n:n;a=a.getSeconds();a=10>a?"0"+a:a;null==b&&(b=D.dr);b=b.replace(/yyyy/i,c);b=b.replace(/yy/i,d);b=b.replace(/mmm/i,e);b=b.replace(/mm/i,g);b=b.replace(/dd/i,k);b=b.replace(/hh/i,
l);b=b.replace(/nn/i,n);return b=b.replace(/ss/i,a)}return""};D.e.J=function(a){a=new Date(a);a.setHours(a.getHours()-a.getTimezoneOffset()/60);return a};D.ba("jarvis.array");D.Fq.min=function(a){return _.min(a)};D.Fq.max=function(a){return _.max(a)};D.ba("jarvis.debug");D.debug.log=function(a,b,c,d){D.Tp&&D.Al>=c&&(a=new Date-D.qt,a=D.M.Pt(a/1E3),c<=D.Al&&console.log("["+a+"s] ["+b+"] "+d))};D.debug.log("INFO","Debug",6,"JS source loaded");D.ba("jarvis.dataaccess");
D.l.m=function(a,b,c,d,e){try{_gaq&&(_gaq.push(["_trackPageview","jarvis/fetch"]),_gaq.push(["_trackEvent","jarvis","fetch",""]))}catch(g){}D.wj&&-1==b.indexOf("://")&&(b=D.pp+b);b=D.Rm.Cq+b;"function"!==typeof d?D.debug.log("INFO","jarvis.dataaccess",5,"Executing Sync: "+b):D.debug.log("INFO","jarvis.dataaccess",5,"Executing Async: "+b);var k=null;b={type:"GET",timeout:e?e:null,dataType:"json",async:"function"===typeof d,url:b,contentType:"application/json;",data:c,Kq:function(a){a.setRequestHeader("jarvis-token",D.Kl);
$(".simpleloading").O("display","block");$(".simpleloading").show()},error:function(b,c,e){console.log("Error during ajax call.",D.Xb,c,e);if(!D.Xb&&(500==b.status||0!=b.readyState))if(D.a.Ei(e),"function"===typeof d)d(a,null,e);else if(!D.Xb)throw e;},np:function(b){try{if(null!=b){if(500==b.Wf)throw{message:b.yu};"function"===typeof d?d(a,b,this):k=b}}catch(c){if(console.log("Exception during ajax call: "+c.message),D.a.Ei(c.message),"function"===typeof d)d(a,b,this);else throw c;}}};try{$.nj(b)}catch(l){throw l;
}return k};
D.l.hu=function(a,b,c){try{_gaq&&(_gaq.push(["_trackPageview","jarvis/fetch"]),_gaq.push(["_trackEvent","jarvis","prepareAjax",""]))}catch(d){}a=D.Rm.lu+a;var e={type:"GET",dataType:"json",url:a,contentType:"application/json;",OB:{withCredentials:!0},data:b,Kq:function(a){a.setRequestHeader("jarvis-token",D.Kl)},error:function(b,c,d){console.log("Error during ajax call.",c,d);500!=b.status&&0==b.readyState||D.a.Ei(d);D.debug.log("ERROR","jarvis.dataaccess",5,"Executing Multi Async: "+a+", error: "+
d)},np:function(a){a.id=b.id;c(a)}};try{return $.nj(e)}catch(g){return console.log(g),null}};D.l.vc=function(a,b,c){var d="/engine/Query.svc/fetch";D.debug.log("INFO","jarvis.dataaccess",5,"Executing Multiple ASync: "+d);D.wj&&(d=D.qh+d);var e=[],g=[];$(b).b(function(a,b){e.push(null);g.push(D.l.hu(d,b,function(b){if("200"!=b.Wf)throw b.yu;e[a]=b}))});var k=g.length;$(g).b(function(b,d){d.Om(function(){0==--k&&c(a,e,null)})})};D.l.A=[];D.l.q=[];D.l.af=[];D.l.Ih=[];D.l.FA=[];
D.l.es=function(a){a=D.l.m(this,"/engine/RealtimePanels.svc/GetWidget",{ma:a},null);return a=$.Y(a.data)};D.l.Pr=function(a){a=D.l.m(this,"/engine/Dashboards.svc/GetWidget",{ma:a},null);return a=$.Y(a.data)};(function(a){var b=a({});a.Yw=function(c){function d(b){e=a.nj(c).oB(b,b).Om(g.IA).my(g.qu)}var e,g=a.$v(),k=g.iu();b.mu(d);k.abort=function(l){if(e)return e.abort(l);var n=b.mu(),h=a.pk(d,n);-1<h&&n.splice(h,1);g.BA(c.Gx||c,[k,l,""]);return k};return k}})(jQuery);
D.debug.log("INFO","jarvis.dataaccess",6,"JS source loaded");D.ba("jarvis.Console");var Va=450,Wa=[],db=10,Va=Math.round($(window).height()-0.26*$(window).height());
D.Sp=function(a){this.Rw="Console";this.vb=a;a="";a='<div class="bottomwrapper"><div class="logwrapper"><div class="logheader" style="display: none"><div class="minimize" style="float:right;margin-right:5px;margin-top:3px;cursor:pointer;"><i class="icon-chevron-down"></i></div></div><div id="log" style="display:block;height:0;"></div></div><div class="jarvisPrompt"></div></div>';$(this.vb).append(a);goog.now();D.a.r.Dc?(D.debug.log("INFO","Subscribing to comet channel (already connected) - tracer",
6,"JS source loaded"),a={sd:PokeIn.td()},D.l.m(this,"/engine/Realtime.svc/trace",a,f())):(D.debug.log("INFO","Subscribing to comet channel (bind) - tracer",6,"JS source loaded"),$(D.r).bind("cometstart",function(){var a={sd:PokeIn.td()};D.l.m(this,"/engine/Realtime.svc/trace",a,f())}));window.Hn=this.Hn;_console=window.console;window.console={log:function(a){_console.log.apply(_console,[a])},error:function(a){b.$A(a)},info:function(a){b.info(a)},aB:f(),oy:f(),py:f(),qy:f()};goog.debug.rw.Ky().UA(goog.debug.cq.pw.Tv);
var b=goog.debug.cq.Fy("Jarvis"),c=new goog.debug.aw(goog.ay.By("log"));c.QA(!0);$(".jarvisPrompt").console({vA:"Jarvis> ",fx:!0,autofocus:!0,uA:!0,Ax:function(a){return""!=a},zx:function(a){var b=!0,g="",k=$.trim(a).toLowerCase().split(" ");if(1==k.length){var l=$.trim(k[0]);if("help"==l)return console.info(eb()),!0;if("clear"==l)return c.clear(),!0;if("stage"!=l)if(-1<l.indexOf("trace"))a=l.split("=")[1],db=parseInt(a),console.info("Trace level set to "+db);else{var n=!1;$(Wa).b(function(a,b){b.name.toLowerCase()==
l&&(n=!0)});n?(b=!1,console.error("Option not specified or incorrect. Please type 'help' for a complete list of commands.")):(b=!1,console.error("Command not found. Please type 'help' for a complete list of commands."));return!0}}else{var l=$.trim(k[0]),h=$.trim(k[1]),m=a.match(/("([^"]*)")/g);$(m).b(function(a,b){b.replace(/"/g,"")});n=!1;$(Wa).b(function(a,c){if(c.name.toLowerCase()==l){n=!0;var d=!1;$(c.ki).b(function(a,k){if(k.name.toLowerCase()==h){d=!0;g=c.xr+"/"+h+"?";try{$(k.mi).b(function(a,
b){b.value=null==m[a]||"undefined"==m[a]?"dateTime"==b.type?"1900-01-01":"TimeResolution"==b.type?"Day":"boolean"==b.type?!1:"":m[a].replace(/"/g,"");g+=b.name+"="+b.value+"&"})}catch(l){return b=!1,console.error("Option not specified or incorrect. Please type 'help' for a complete list of commands - "+l),!0}}});if(!d)return b=!1,console.error("Option not specified or incorrect. Please type 'help' for a complete list of commands."),!0}});if(!n)return console.error("Command not found. Please type 'help' for a complete list of commands."),
!1}if(!b)return!0;"&"==g.substring(g.length-1)&&(g=g.substring(0,g.length-1));$.get(D.qh+g,function(a){var b="";if(null!=a.ib){if("object"==typeof a.ib.data)$(a.ib.data).b(function(a,c){"object"==typeof c?$(c).b(function(a,c){b="object"==typeof c?b+(goog.debug.Tx(c)+"\n"):b+(c+"\n")}):b+=c+"\n"});else try{var c=jQuery.Y(a.ib.data),b=b+"\n";if("object"==typeof c){var d="";$.b(c,function(a,b){d+=fb(a,b,0)});b+=d}else b+=c+"\n"}catch(e){b+=a.ib.data}""!=$.trim(b)&&(console.info(b.replace(/\t/g,"    ")),
$(".consoleobject ul.container:last-of-type").b(function(){var a=$(this).parent();a.D("click");a.s("click",function(a){a.stopPropagation();$(this).Id("on");$($(this).find(".container")[0]).Id("on")})}))}});return!0}}).wA('query fetch ("2012-10-01T00:00:00", "2012-10-30T23:59:59.999", "Game", "Session Count, Player Count", "Day", "true", "", "", "", "0", "false")');$(".jarvisPrompt").le(function(){0==$("#log").height()&&($("#log").T({height:Va},200),$("#log").p("expanded"),$(".logheader").show(),$(".logfooter").show(),
$(this).O({opacity:1}))});$(".jarvisPrompt").click(function(){0==$("#log").height()&&($("#log").T({height:Va},200),$("#log").p("expanded"),$(".logheader").show(),$(".logfooter").show(),$(this).O({opacity:1}))});$(".logwrapper").click(function(a){a.stopPropagation()});$(".minimize").click(function(){$("#log").height()==Va&&($("#log").T({height:0},200),$("#log").G("expanded"),$(".logheader").P(),$(".logfooter").P(),$(".jarvisPrompt").O({opacity:0.8}))});$(document).click(function(){$("#log").height()==
Va&&($("#log").T({height:0},200),$("#log").G("expanded"),$(".logheader").P(),$(".logfooter").P(),$(".jarvisPrompt").O({opacity:0.8}))});gb("/engine/DataSources.svc");gb("/engine/DataTables.svc");gb("/engine/Dimensions.svc");gb("/engine/Metrics.svc");gb("/engine/DBMapper.svc");gb("/engine/Cache.svc");gb("/engine/Query.svc");gb("/engine/Realtime.svc");gb("/engine/RealtimePanels.svc");gb("/engine/Config.svc");gb("/engine/License.svc");gb("/engine/Reports.svc")};
function hb(a,b){for(i=a.length;i<b;i++)a+=" ";return a}D.Sp.prototype.Hn=function(a){$(a).b(function(a,c){var d=c.type,e=c.message;if(c.yB<=db||"Info"!=d)switch(d){case "Info":console.info(e);break;case "Error":console.error(e)}})};
function eb(){var a="< Showing usage\n",a=a+"This console allows you to control and manage Jarvis' different components with a set of optiond and commands.\n\n",a=a+"Usage:\n  command [options] ([parameter], [...])\n\n",a=a+"General commands:\n",a=a+(" "+hb(" help",20)+" prints this help message, then exists.\n"),a=a+(" "+hb(" clear",20)+" resets the console.\n"),a=a+(" "+hb(" state",20)+" shows the engine's current state and stats.\n"),a=a+(" "+hb(" trace=LEVEL",20)+" starts the server's trace with the specified trace level (1-10, 10 being most verbose, current: "+
db+")).\n"),a=a+"\n";Wa=$(Wa).sort(function(a,c){return a.name>c.name?1:-1});$(Wa).b(function(b,c){a+=c.name+" command options: \n";$(c.ki).b(function(b,c){var g=" ",g=g+(" "+hb(c.name,19)+" ");0<c.description.length&&(g+=c.description);g+="\n";0<c.mi.length&&(g+=hb("",5),$(c.mi).b(function(a,b){g+="-"+b.name+":"+b.type+" "}),g+="\n");a+=g});a+="\n"});return a+="\n"}
function gb(a){var b={xr:a,name:a.split("/")[a.split("/").length-1].replace(".svc",""),ki:[]};$.get(D.qh+a+"?xsd=xsd0",function(c){var d=c;c=$.get(D.qh+a+"?wsdl",function(a){$(a).find("operation").b(function(a,c){var e=$(c).find("summary").text(),n=$(c).find("input"),n=n.d("wsaw:Action").split("/")[n.d("wsaw:Action").split("/").length-1],h={name:n,description:e,mi:[]};$(d).find('xs\\:element[name="'+n+'"]').b(function(a,b){$(b).find("element").b(function(){h.mi.push({name:$(this).d("name"),type:$(this).d("type").replace("xs:",
"").replace(/q\d:/,"").replace(/q\d\d:/,"")})})});b.ki.push(h)});Wa.push(b)})})}
function fb(a,b,c){var d="";0==c&&(d='<ul class="consoleobject">');if("function"==typeof b)d+='<li class="node leaf level_'+c+'">',d+='<span class="key">'+a+'</span>: <span class="value '+typeof b+'">'+b+"</span>";else if(b instanceof Object)d+='<li class="node level_'+c+'">',d+='<span class="key">'+a+'</span>: <span class="value Object">Object</span><ul class="container">',$.b(b,function(a,b){d+=fb(a,b,c+1)}),d+="</ul>";else{d+='<li class="node leaf level_'+c+'">';if("string"==typeof b&&-1<b.indexOf("\r\n"))b=
b.replace(/\r\n/g,"<br/>"),b=b.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");else if("string"==typeof b&&-1<b.indexOf("/Date("))try{b=parseInt(b.replace("/Date(","").replace(")/","")),b=new Date(b)}catch(e){}d+='<span class="key">'+a+'</span>: <span class="value '+typeof b+'">'+("string"==typeof b?'"'+b+'"':b)+"</span>"}d+="</li>";0==c&&(d+="</ul>");return d}D.debug.log("INFO","Jarvis.Console",6,"JS source loaded");D.ba("jarvis.tests");D.H.C=f();D.debug.log("INFO","jarvis.tests",6,"JS source loaded");D.H.C();D.ba("jarvis.tests.Base");D.H.rh=function(a,b){var c=$(".testlogger"),d=$('<div class="message"></div>');"header"==b&&d.p("header");"error"==b&&d.p("error");d.u(a);c.append(d)};var ib=!1,jb=0;
D.H.bd=function(){D.H.Ka.end?($(".base_caption_exec").u("Queries Executed"),$(".base_txt_exec").u(D.H.Ka.qd)):$(".base_txt_exec").u(D.H.Ka.Va);$(".base_txt_failed").u(D.H.Ka.hd);$(".base_txt_success").u(D.M.yi(100*(D.H.Ka.se/D.H.Ka.qd),0)+"%");D.H.Qa.end?($(".deep_caption_exec").u("Queries Executed"),$(".deep_txt_exec").u(D.H.Qa.qd)):$(".deep_txt_exec").u(D.H.Qa.Va);$(".deep_txt_failed").u(D.H.Qa.hd);$(".deep_txt_success").u(D.M.yi(100*(D.H.Qa.se/D.H.Qa.qd),0)+"%");D.H.filters.end?($(".filters_caption_exec").u("Queries Executed"),
$(".filters_txt_exec").u(D.H.filters.qd)):$(".filters_txt_exec").u(D.H.filters.Va);$(".filters_txt_failed").u(D.H.filters.hd);$(".filters_txt_success").u(D.M.yi(100*(D.H.filters.se/D.H.filters.qd),0)+"%");ib||(ib=!0,jb=setInterval(function(){D.H.Ka.end?$(".base_txt_duration").u(D.M.R((D.H.Ka.end-D.H.Ka.start)/1E3,0)+" sec."):$(".base_txt_duration").u(D.M.R((new Date-D.H.Ka.start)/1E3,0)+" sec.");D.H.Qa.end?$(".deep_txt_duration").u(D.M.R((D.H.Qa.end-D.H.Qa.start)/1E3,0)+" sec."):$(".deep_txt_duration").u(D.M.R((new Date-
D.H.Qa.start)/1E3,0)+" sec.");D.H.filters.end?$(".filters_txt_duration").u(D.M.R((D.H.filters.end-D.H.filters.start)/1E3,0)+" sec."):$(".filters_txt_duration").u(D.M.R((new Date-D.H.filters.start)/1E3,0)+" sec.");D.H.Ka.end&&(D.H.Qa.end&&D.H.filters.end)&&window.clearInterval(jb)},1E3))};D.H.Ka={};D.H.Qa={};D.H.filters={};D.H.Ka.start=null;D.H.Ka.end=null;D.H.Qa.start=null;D.H.Qa.end=null;D.H.filters.start=null;D.H.filters.end=null;D.H.Ka.qd=0;D.H.Ka.Va=0;D.H.Ka.hd=0;D.H.Ka.se=0;D.H.Qa.qd=0;
D.H.Qa.Va=0;D.H.Qa.hd=0;D.H.Qa.se=0;D.H.filters.qd=0;D.H.filters.Va=0;D.H.filters.hd=0;D.H.filters.se=0;D.H.jp=new Date(2013,0,1);D.H.Qm=new Date(2013,0,1);D.H.Gu=[""];
D.H.m=function(a,b,c){try{switch(a){case "base":0==D.H.Ka.Va&&(D.H.Ka.start=new Date);D.H.Ka.qd++;D.H.Ka.Va++;break;case "deep":0==D.H.Qa.Va&&(D.H.Qa.start=new Date);D.H.Qa.qd++;D.H.Qa.Va++;break;case "filters":0==D.H.filters.Va&&(D.H.filters.start=new Date),D.H.filters.qd++,D.H.filters.Va++}D.l.m(this,D.H.Gu[0]+"/engine/Query.svc/fetch",c,function(c,d,k){b=b.replace("#URL",k.url);b=a+"::"+b;if("200"==d.Wf)switch(a){case "base":D.H.Ka.Va--;D.H.Ka.se++;0==D.H.Ka.Va&&(D.H.Ka.end=new Date);break;case "deep":D.H.Qa.Va--;
D.H.Qa.se++;0==D.H.Qa.Va&&(D.H.Qa.end=new Date);break;case "filters":D.H.filters.Va--,D.H.filters.se++,0==D.H.filters.Va&&(D.H.filters.end=new Date)}else switch(D.H.rh(b+":: FAIL</a>","error"),a){case "base":D.H.Ka.Va--;D.H.Ka.hd++;0==D.H.Ka.Va&&(D.H.Ka.end=new Date);break;case "deep":D.H.Qa.Va--;D.H.Qa.hd++;0==D.H.Qa.Va&&(D.H.Qa.end=new Date);break;case "filters":D.H.filters.Va--,D.H.filters.hd++,0==D.H.filters.Va&&(D.H.filters.end=new Date)}D.H.bd()})}catch(d){switch(a){case "base":D.H.Ka.Va--;
D.H.Ka.hd++;0==D.H.Ka.Va&&(D.H.Ka.end=new Date);break;case "deep":D.H.Qa.Va--;D.H.Qa.hd++;0==D.H.Qa.Va&&(D.H.Qa.end=new Date);break;case "filters":D.H.filters.Va--,D.H.filters.hd++,0==D.H.filters.Va&&(D.H.filters.end=new Date)}D.H.rh(b+":: EXCEPTION</a>","error");D.H.rh(d.message,"error")}0==D.H.Va&&(D.H.end=new Date);D.H.bd()};
D.H.Op.Bw=function(){D.Xb=!0;D.f.w.$();var a=D.H.jp,b=D.H.Qm,c=D.f.ka.$();D.H.rh("Found "+c.length+" reports...","header");$(c).b(function(c,e){$(e.Db).b(function(c,d){$(d.$d).b(function(c,g){var h=[];$(g.B).b(function(c,m){h.push(m);var l={id:"primary",ta:D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:m.c,t:"Day",la:!0,ca:""};try{D.H.m("base",'<a target="_blank" href="#URL">TEST RESULT: Report: '+e.c+", Tab: "+d.c+", MG: "+g.c+", Metric: "+m.c,l)}catch(p){throw p;
}});var m="";$(h).b(function(a,b){m+=b.c+","});0<m.length&&(m=m.substr(0,m.length-1));var p={id:"primary",ta:D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:m,t:"Day",la:!0,ca:""};try{var s='<a target="_blank" href="#URL">TEST RESULT: Report: '+e.c+", Tab: "+d.c+", MG: "+g.c+", Metrics: ALL";D.H.m("base",s,p)}catch(q){throw q;}var u=[];$(d.w).b(function(c,h){u.push(h);var l={id:"primary",ta:D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:h.c,
B:m,t:"Day",la:!0,ca:""};try{D.H.m("base",'<a target="_blank" href="#URL">TEST RESULT: Report: '+e.c+", Tab: "+d.c+", MG: "+g.c+", Metrics: ALL, Dimension: "+h.c,l)}catch(p){throw p;}$(D.f.w).b(function(c,d){d.zl!=d.Dl&&h.c!=d.c&&(D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"))});$(D.f.w).b(function(c,d){d.zl!=d.Dl&&h.c!=d.c&&(D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"))})});var v="";$(u).b(function(a,b){v+=b.c+","});0<v.length&&(v=v.substr(0,v.length-
1));p={id:"primary",ta:D.e.g(a,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:v,B:m,t:"Day",la:!0,ca:""};try{s='<a target="_blank" href="#URL">TEST RESULT: Report: '+e.c+", Tab: "+d.c+", MG: "+g.c+", Metrics: ALL, Dimension: ALL",D.H.m("base",s,p)}catch(r){throw r;}})})});return!1};
D.H.Op.Cw=function(a,b){D.Xb=!0;xb();D.f.w.$();var c=b.jp,d=b.Qm,e=D.f.ka.$();$(e).b(function(a,b){$(b.Db).b(function(a,e){$(e.$d).b(function(a,g){var l=[];$(g.B).b(function(a,h){l.push(h);var s={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:"Day",la:!0,ca:""};try{D.H.m("base",'<a target="_blank" href="#URL">TEST RESULT: Report: '+b.c+", Tab: "+e.c+", MG: "+g.c+", Metric: "+h.c,s)}catch(q){throw q;}});var s="";$(l).b(function(a,b){s+=b.c+","});
0<s.length&&(s=s.substr(0,s.length-1));var q=[];$(e.w).b(function(a,h){q.push(h);var l={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:h.c,B:s,t:"Day",la:!0,ca:""};try{D.H.m("base",'<a target="_blank" href="#URL">TEST RESULT: Report: '+b.c+", Tab: "+e.c+", MG: "+g.c+", Metrics: ALL, Dimension: "+h.c,l)}catch(p){throw p;}})})})});return!1};D.loaded.push("jarvis.tests.Base");D.debug.log("INFO","jarvis.tests.Base",6,"JS source loaded");D.ba("jarvis.objects");D.debug.log("INFO","jarvis.objects",6,"JS source loaded");D.ba("jarvis.objects.Auth");D.f.ic=f();D.loaded.push("jarvis.objects.Auth");D.debug.log("INFO","jarvis.objects.Auth",6,"JS source loaded");D.ba("jarvis.objects.Auth.Roles");D.f.ic.Zi=f();D.f.ic.Zi.prototype.$=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/ListRoles",null,function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/ListRoles",null,null),d=$.Y(d.data));return d};
D.f.ic.Zi.prototype.fj=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/UpdateRole",{xe:b.xe,Yi:b.Yi,Xi:b.Xi},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/UpdateRole",{xe:b.xe,Yi:b.Yi,Xi:b.Xi},null),d=$.Y(d.data));return d};D.f.ic.Zi.prototype.jf=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/DeleteRole",{xe:b.xe},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/DeleteRole",{xe:b.xe},null),d=$.Y(d.data));return d};
D.loaded.push("jarvis.objects.Auth.Roles");D.debug.log("INFO","jarvis.objects.Auth.Roles",6,"JS source loaded");D.ba("jarvis.objects.Auth.Organizations");D.f.ic.Wi=f();D.f.ic.Wi.prototype.$=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/ListOrganizations",null,function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/ListOrganizations",null,null),d=$.Y(d.data));return d};
D.f.ic.Wi.prototype.fj=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/UpdateOrganization",{we:b.we,Vi:b.Vi,Ui:b.Ui},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/UpdateOrganization",{we:b.we,Vi:b.Vi,Ui:b.Ui},null),d=$.Y(d.data));return d};
D.f.ic.Wi.prototype.jf=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/DeleteOrganization",{we:b.we},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/DeleteOrganization",{we:b.we},null),d=$.Y(d.data));return d};D.loaded.push("jarvis.objects.Auth.Organizations");D.debug.log("INFO","jarvis.objects.Auth.Organizations",6,"JS source loaded");D.ba("jarvis.objects.Auth.Users");D.f.ic.hj=f();D.f.ic.hj.prototype.$=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/ListUsers",null,function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/ListUsers",null,null),d=$.Y(d.data));return d};
D.f.ic.hj.prototype.fj=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/UpdateUser",{Ae:b.Ae,ej:b.ej,aj:b.aj,bj:b.bj,cj:b.cj,dj:b.dj},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/UpdateUser",{Ae:b.Ae,ej:b.ej,aj:b.aj,bj:b.bj,cj:b.cj,dj:b.dj},null),d=$.Y(d.data));return d};
D.f.ic.hj.prototype.jf=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/DeleteUser",{Ae:b.Ae},function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/DeleteUser",{Ae:b.Ae},null),d=$.Y(d.data));return d};D.loaded.push("jarvis.objects.Auth.Users");D.debug.log("INFO","jarvis.objects.Auth.Users",6,"JS source loaded");D.ba("jarvis.objects.Auth.Permissions");D.f.ic.eq=f();D.f.ic.eq.prototype.$=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Auth.svc/ListPermissions",null,function(a,b){d=$.Y(b.data);c(a,d)}):(d=D.l.m(this,"/engine/Auth.svc/ListPermissions",null,null),d=$.Y(d.data));return d};D.loaded.push("jarvis.objects.Auth.Permissions");D.debug.log("INFO","jarvis.objects.Auth.Permissions",6,"JS source loaded");D.ba("jarvis.objects.APITokens");D.loaded.push("jarvis.objects.APITokens");D.debug.log("INFO","jarvis.objects.APITokens",6,"JS source loaded");D.ba("jarvis.objects.UserTokens");D.loaded.push("jarvis.objects.UserTokens");D.debug.log("INFO","jarvis.objects.UserTokens",6,"JS source loaded");D.ba("jarvis.objects.WebOrigins");D.loaded.push("jarvis.objects.WebOrigins");D.debug.log("INFO","jarvis.objects.WebOrigins",6,"JS source loaded");D.ba("jarvis.objects.Config");D.f.Rp=f();D.f.Rp.prototype.bc=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Config.svc/GetEx",null,function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Config.svc/GetEx",null,null);return d};D.loaded.push("jarvis.objects.Config");D.debug.log("INFO","jarvis.objects.Config",6,"JS source loaded");D.ba("jarvis.objects.Cache");D.f.Pp=f();function xb(){var a=new D.f.Pp;D.Xb=!0;D.l.m(a,"/engine/Cache.svc/PurgeResults",null,null);setTimeout(function(){D.Xb=!1},5E3)}D.loaded.push("jarvis.objects.Cache");D.debug.log("INFO","jarvis.objects.Cache",6,"JS source loaded");D.ba("jarvis.objects.Query");D.f.Il=f();function yb(){var a=new D.f.Il;if(null!=D.kl)return D.kl;D.Xb=!0;a=D.l.m(a,"/engine/Query.svc/SystemStartDate",null,null);a=a.data;a=new Date(a);D.kl=new Date(a);setTimeout(function(){D.Xb=!1},1E3);return a}function Pb(){var a=new D.f.Il;if(null!=D.jl)return D.jl;D.Xb=!0;a=D.l.m(a,"/engine/Query.svc/SystemEndDate",null,null);a=a.data;a=new Date(a);D.jl=new Date(a);setTimeout(function(){D.Xb=!1},1E3);return a}D.loaded.push("jarvis.objects.Query");
D.debug.log("INFO","jarvis.objects.Query",6,"JS source loaded");D.ba("jarvis.objects.State");D.f.jg=f();function Na(a,b,c){var d;"function"==typeof c?D.l.m(a,"/engine/State.svc/SaveState",{id:b.id,state:b.state},function(a,b){try{d=$.Y(b.data),c(a,d)}catch(k){c(a,null)}}):d=D.l.m(a,"/engine/State.svc/SaveState",{id:b.id,state:b.state},null)}function Ra(a,b){return D.l.m(a,"/engine/State.svc/LoadState",{id:b.id},null)}function Qb(){var a=new D.f.jg;return D.l.m(a,"/engine/State.svc/GetLog",null,null)}D.loaded.push("jarvis.objects.State");
D.debug.log("INFO","jarvis.objects.State",6,"JS source loaded");D.ba("jarvis.objects.Realtime");D.f.hq=f();D.f.hq.prototype.jg=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Realtime.svc/State",null,function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Realtime.svc/State",null,null);return d};D.loaded.push("jarvis.objects.Realtime");D.debug.log("INFO","jarvis.objects.Realtime",6,"JS source loaded");D.ba("jarvis.objects.DataSources");D.f.ph=f();D.f.ph.prototype.$=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataSources.svc/List",null,function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataSources.svc/List",null,null);return d};D.f.ph.prototype.bc=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataSources.svc/Get",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataSources.svc/Get",{id:b.id},null);return d};
D.f.ph.prototype.ye=function(a,b,c){"function"==typeof c&&c(null)};D.f.ph.prototype.jg=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataSources.svc/State",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataSources.svc/State",{id:b.id},null);return d};D.loaded.push("jarvis.objects.DataSources");D.debug.log("INFO","jarvis.objects.DataSources",6,"JS source loaded");D.ba("jarvis.objects.DataTables");D.f.Jd=[];D.f.Jd.$=function(a,b,c){var d;if(0<D.f.Jd.length&&"function"!==typeof c)return D.f.Jd;"function"==typeof c?D.l.m(this,"/engine/DataTables.svc/List",null,function(a,b){d=$.Y(b.data);$(d).b(function(a,b){D.f.Jd.push(b)});c(a,d)}):(d=D.l.m(this,"/engine/DataTables.svc/List",null,null),a=$.Y(d.data),$(a).b(function(a,b){D.f.Jd.push(b)}));return d};
D.f.Jd.bc=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataTables.svc/Get",{fg:b.fg,ig:b.ig,kg:b.kg},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataTables.svc/Get",{fg:b.fg,ig:b.ig,kg:b.kg},null);return d};D.f.Jd.fw=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataTables.svc/GetByID",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataTables.svc/GetByID",{id:b.id},null);return d};
D.f.Jd.hw=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/DataTables.svc/GetSourceTable",{fg:b.fg,ig:b.ig,kg:b.kg},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/DataTables.svc/GetSourceTable",{id:b.id},null);return d};D.f.Jd.ye=function(a,b,c){"function"==typeof c&&c(null)};D.loaded.push("jarvis.objects.DataTables");D.debug.log("INFO","jarvis.objects.DataTables",6,"JS source loaded");D.ba("jarvis.objects.Dimensions");D.f.w=[];D.f.w.$=function(a,b,c){var d;if(0<D.f.w.length&&"function"!==typeof c)return D.f.w;"function"==typeof c?D.l.m(this,"/engine/Dimensions.svc/List",{},function(a,b){d=$.Y(b.data);D.f.w.splice(0,D.f.w.length);$(d).b(function(a,b){D.f.w.push(b)});c(a,d)}):(d=D.l.m(this,"/engine/Dimensions.svc/List",null,null),a=$.Y(d.data),D.f.w.splice(0,D.f.w.length),$(a).b(function(a,b){D.f.w.push(b)}));return d};
D.f.w.bc=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Dimensions.svc/Get",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Dimensions.svc/Get",{id:b.id},null);return d};D.f.w.ye=function(a,b,c){"function"==typeof c&&c(null)};D.f.w.Qp=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Dimensions.svc/Categories_List",{},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Dimensions.svc/Categories_List",null,null);return d};D.loaded.push("jarvis.objects.Dimensions");
D.debug.log("INFO","jarvis.objects.Dimensions",6,"JS source loaded");D.ba("jarvis.objects.Metrics");D.f.B=[];D.f.B.$=function(a,b,c){var d;if(0<D.f.B.length&&"function"!==typeof c)return D.f.B;"function"==typeof c?D.l.m(this,"/engine/Metrics.svc/List",{},function(a,b){d=$.Y(b.data);D.f.B.splice(0,D.f.B.length);$(d).b(function(a,b){D.f.B.push(b);D.l.q.push(b)});c(a,d)}):(d=D.l.m(this,"/engine/Metrics.svc/List",null,null),a=$.Y(d.data),D.f.B.splice(0,D.f.B.length),$(a).b(function(a,b){D.f.B.push(b);D.l.q.push(b)}));return d};
D.f.B.bc=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Metrics.svc/Get",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Metrics.svc/Get",{id:b.id},null);return d};D.f.B.ye=function(a,b,c){"function"==typeof c&&c(null)};D.f.B.Mp=function(a){return D.l.m(this,"/engine/Metrics.svc/AddGroup",{Iw:a.Ua,name:a.name},null)};D.f.B.Vp=function(a){D.l.m(this,"/engine/Metrics.svc/DeleteGroup",{id:a.id},null)};
D.f.B.jq=function(a,b){D.l.m(this,"/engine/Metrics.svc/UpdateGroup",{id:a,Sk:"name",value:b},null)};D.f.B.kq=function(a,b,c){D.l.m(this,"/engine/Metrics.svc/UpdateGroupMetric",{id:a,tt:b,ha:c},null)};D.f.B.Wp=function(a,b){D.l.m(this,"/engine/Metrics.svc/DeleteGroupMetric",{id:a,tt:b},null)};D.f.B.Qp=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Metrics.svc/Categories_List",{},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Metrics.svc/Categories_List",null,null);return d};
D.loaded.push("jarvis.objects.Metrics");D.debug.log("INFO","jarvis.objects.Metrics",6,"JS source loaded");D.ba("jarvis.objects.Dashboards");D.f.wb=[];D.f.wb.$=function(a,b,c){var d;if(0<D.f.wb.length&&"function"!==typeof c)return D.f.wb;"function"==typeof c?D.l.m(this,"/engine/Dashboards.svc/List",null,function(a,b){d=$.Y(b.data);D.f.wb.splice(0,D.f.wb.length);$(d).b(function(a,b){D.f.wb.push(b)});c(a,d)}):(d=D.l.m(this,"/engine/Dashboards.svc/List",null,null),a=$.Y(d.data),D.f.wb.splice(0,D.f.wb.length),$(a).b(function(a,b){D.f.wb.push(b)}));return d};
D.f.wb.bc=function(a,b,c,d){var e;if(0<D.f.wb.length&&"function"!==typeof c&&!d)return _.find(D.f.wb,function(a){return a.ma==b.id});"function"==typeof c?D.l.m(this,"/engine/Dashboards.svc/Get",{id:b.id},function(a,b){e=$.Y(b.data);c(a,e)}):e=D.l.m(this,"/engine/Dashboards.svc/Get",{id:b.id},null);return e};D.loaded.push("jarvis.objects.Dashboards");D.debug.log("INFO","jarvis.objects.Dashboards",6,"JS source loaded");D.ba("jarvis.objects.RealtimePanels");D.f.Lc=[];D.f.Lc.$=function(a,b,c){var d;if(0<D.f.Lc.length&&"function"!==typeof c)return D.f.Lc;"function"==typeof c?D.l.m(this,"/engine/RealtimePanels.svc/List",null,function(a,b){d=$.Y(b.data);$(d).b(function(a,b){D.f.Lc.push(b);D.l.af.push(b)});c(a,d)}):(d=D.l.m(this,"/engine/RealtimePanels.svc/List",null,null),a=$.Y(d.data),$(a).b(function(a,b){D.f.Lc.push(b);D.l.af.push(b)}));return d};
D.f.Lc.bc=function(a,b,c){var d;if(0<D.f.Lc.length&&"function"!==typeof c)return _.find(D.f.Lc,function(a){return a.ma==b.id});"function"==typeof c?D.l.m(this,"/engine/RealtimePanels.svc/Get",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/RealtimePanels.svc/Get",{id:b.id},null);return d};D.loaded.push("jarvis.objects.RealtimePanels");D.debug.log("INFO","jarvis.objects.RealtimePanels",6,"JS source loaded");D.ba("jarvis.objects.Reports");D.f.ka=[];D.f.ka.$=function(a,b,c,d){var e;if(0<D.f.ka.length&&"function"!==typeof c&&!d)return D.f.ka;"function"==typeof c?D.l.m(this,"/engine/Reports.svc/List",null,function(a,b){e=$.Y(b.data);D.f.ka.splice(0,D.f.ka.length);$(e).b(function(a,b){D.f.ka.push(b)});c(a,e)}):(e=D.l.m(this,"/engine/Reports.svc/List",null,null),a=$.Y(e.data),D.f.ka.splice(0,D.f.ka.length),$(a).b(function(a,b){D.f.ka.push(b)}),e=D.f.ka);return e};
D.f.ka.bc=function(a,b,c,d){var e;if(0<D.f.ka.length&&"function"!==typeof c&&!d)return _.find(D.f.ka,function(a){return a.ma==b.id});if("function"==typeof c)D.l.m(this,"/engine/Reports.svc/Get",{id:b.id},function(a,b){e=$.Y(b.data);c(a,e)});else{e=D.l.m(this,"/engine/Reports.svc/Get",{id:b.id},null);a=$.Y(e.data);for(i=0;i<D.f.ka.length;i++)D.f.ka[i].ma==a.ma&&(D.f.ka[i]=a);e=a}return e};
D.f.ka.ye=function(a,b,c,d,e){var g;"function"==typeof e?D.l.m(this,"/engine/Reports.svc/Set",{id:b,Sk:c,value:d},function(a,b){g=$.Y(b.data);e(a,g)}):g=D.l.m(this,"/engine/Reports.svc/Set",{id:b,Sk:c,value:d},null);return g};D.f.ka.jf=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Reports.svc/Delete",{id:b.id},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Reports.svc/Delete",{id:b.id},null);return d};
D.f.ka.Np=function(a){return D.l.m(this,"/engine/Reports.svc/AddTab",{W:a.W,name:a.name,type:a.type},null)};D.f.ka.gj=function(a,b,c){D.l.m(this,"/engine/Reports.svc/UpdateTab",{id:a,Sk:b,value:c},null)};D.f.ka.Xp=function(a){D.l.m(this,"/engine/Reports.svc/DeleteTab",{id:a.id},null)};D.f.ka.lq=function(a,b,c){D.l.m(this,"/engine/Reports.svc/UpdateTabDimension",{lh:a,Mm:b,ha:c},null)};
D.f.ka.Yp=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Reports.svc/DeleteTabDimension",{lh:a,Mm:b},function(a,b){d=$.Y(b.data);c(a,d)}):d=D.l.m(this,"/engine/Reports.svc/DeleteTabDimension",{lh:a,Mm:b},null)};D.f.ka.gw=function(a,b,c){var d;"function"==typeof c?D.l.m(this,"/engine/Reports.svc/List",null,function(a,b){d=$.Y(b.data);d=d[0];c(a,d)}):(d=D.l.m(this,"/engine/Reports.svc/List",null,null),d=$.Y(d.data),d=d[0]);return d};
D.f.ka.$p=function(){return D.l.m(this,"/engine/Reports.svc/GetCategories",null,null)};D.loaded.push("jarvis.objects.Reports");D.debug.log("INFO","jarvis.objects.Reports",6,"JS source loaded");D.ba("jarvis.objects.Update");D.f.fj=f();D.loaded.push("jarvis.objects.Update");D.debug.log("INFO","jarvis.objects.Update",6,"JS source loaded");D.ba("jarvis.visualisation.notice");D.debug.log("INFO","Jarvis.Visualisation.Notice",6,"JS source loaded");D.ba("jarvis.visualisation.notice.Session");D.a.Tg.Jl=function(){this.Z=this;var a={h:$("body"),mk:!1,interval:60};this.h=a.h;this.options=a;this.C(this)};
D.a.Tg.Jl.prototype.C=function(a){var b=(new Date).getMilliseconds(),c=a.h;setInterval(function(){D.l.m(this,"/engine/Auth.svc/CheckSession",{},function(b,e){result=$.Y(e.data);var g=null;!1==eval(result)?(a.mk?g=c.find(".jarvis.notice.session"):(a.mk=!0,g=$(a.Ma(a)),c.append(g),g.find(".modal").s("hidden",function(){location.href="/login.html"})),g.find(".modal").fc("show")):(g=c.find(".jarvis.notice.session"),g.find(".modal").D("hidden"),g.find(".modal").fc("hide"))})},1E3*a.options.interval);D.debug.log("INFO",
"Jarvis.Visualisation.Notice.Session",5,"...init ("+((new Date).getMilliseconds()-b)+"ms)")};
D.a.Tg.Jl.prototype.Ma=function(){var a=$('<div class="jarvis notice session"></div>'),b;b='<div class="modal hide fade" style="width:auto;left:50%;"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';b+="<h3>Session Expired</h3>";b+="</div>";b+='<div class="modal-body">';b+="<p>Your session has expired due to inactivity. Press the Login button to re-login and resume your session.</p>";b+="</div>";b+='<div class="modal-footer">';
b+='<a href="/login.html" class="btn btn-primary">Login</a>';b+="</div>";b+="</div>";a.append(b);return a};D.loaded.push("jarvis.visualisation.notice.Session");D.debug.log("INFO","Jarvis.Visualisation.Notice.Session",6,"JS source loaded");D.ba("jarvis.visualisation.notice.Loading");D.a.Tg.Gl=function(){this.Z=this;var a={h:$("body"),mk:!1};this.h=a.h;this.options=a;this.C(this)};D.a.Tg.Gl.prototype.C=function(){D.debug.log("INFO","Jarvis.Visualisation.notice.Loading",5,"...init ("+((new Date).getMilliseconds()-(new Date).getMilliseconds())+"ms)")};D.a.Tg.Gl.prototype.Ma=function(){var a=$('<div class="jarvis notice session"></div>');a.append("");return a};D.loaded.push("jarvis.visualisation.notice.Loading");
D.debug.log("INFO","Jarvis.Visualisation.Notice.Loading",6,"JS source loaded");D.ba("jarvis.visualisation.picker");D.debug.log("INFO","Jarvis.Visualisation.Picker",6,"JS source loaded");D.ba("jarvis.visualisation.picker.DateBox");
D.a.K.i.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.Ec="base-from";this.Kk=this.Jk=this.Ik=this.Hk=null;this.ao=yb();this.Tn=Pb();this.V=Pb();this.da=c.Ob(this.V,-30);var e=Date.Ge(this.da,this.V);this.ra=c.Ob(this.da,-1);this.ya=c.Ob(this.ra,-1*e);this.Hk=this.da;this.Ik=this.V;this.Jk=this.ya;this.Kk=this.ra;this.og=this.da;this.Pd=this.V;this.pg=this.ya;this.Qd=this.ra;this.ie=this.fa=!1;c.Me(c);this.offsetY=this.offsetX=0;this.tg=[];this.Nj=D.hostname+"/assets/css/datebox.css";
D.Hm||(D.Hm=!0,$("head").append('<style type="text/css">@import "'+this.Nj+'";</style> '));e=null;e=b?$(b):$(".jarvis.picker.datebox");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.picker.DateBox",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-offsetx"),e=$(b).d("data-offsety");d&&(c.offsetX=d);e&&(c.offsetY=e);$(b).empty();c.Oa(b);$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",
function(){$(this).I("clicked",$(this).data().data)})}}),D.debug.log("INFO","jarvis.visualisation.picker.DateBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};D.a.K.i.Ob=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b)};
D.a.K.i.Oa=function(a){var b=this,c=$(a);c.empty();a=$('<div class="container"></div>');a.append('<table class="datetable unselectable"><tr><td class="dates"></td><td class="dropdownmarker"></td></tr></table>');c.append(a);$(".dates").append('<span class="datelabel fromdate">'+D.e.g(b.da)+"</span>");$(".dates").append(" - ");$(".dates").append('<span class="datelabel todate">'+D.e.g(b.V)+"</span>");$(".dates").append('<div class="compare" style="display:none">Compare to: <span class="datelabel compare fromdate">'+
D.e.g(b.ya)+'</span> - <span class="datelabel compare todate">'+D.e.g(b.ra)+"</span></div>");b.fa?$(".dates .compare").show():$(".dates .compare").P();a=$('<div class="picker" style="display:none"></div>');a.append('<table class="wrapper"><tr valign=top><td class="calendars"></td><td class="control"><div class="optionscontainer"></div></td></tr></table>');c.append(a);$(".optionscontainer").append('<div class="customdate">Date Range:<select class="selector"><option value="custom">Custom</option><option value="today">Today</option><option value="yesterday">Yesterday</option><option value="lastweek">Last week</option><option value="lastmonth">Last Month</option></select></div>');
$(".optionscontainer").append('<hr class="divider" style="margin-bottom: 5px;">');$(".optionscontainer").append('<div class="daterange baserange""><input class="dateoption active" type="text" value="Jan 1, 2012"> - <input class="dateoption" type="text" value="Jan 1, 2012"></div>');$(".optionscontainer").append('<div class="compareoption visible""><input type="checkbox" class="checker"/><span style="padding-left:5px;">Compare to past</span></div>');$(".optionscontainer").append('<div class="daterange comparerange""><input class="dateoption active" type="text" value="Jan 1, 2012"> - <input class="dateoption" type="text" value="Jan 1, 2012"></div>');
$(".optionscontainer").append('<hr class="divider"><div class="_buttons"><button class="btn apply" value="Apply">Apply</button><span class="cancel">Cancel</span></div>');c=c.find(".calendars");a=$('<table><tr valign=top><td class="datetable-prev unselectable"></td><td class="datetable"><div class="datepicker"></div></td><td class="datetable"><div class="datepicker"></div></td><td class="datetable"><div class="datepicker"></div></td><td class="datetable-next unselectable"></td></tr></table>');c.append(a);
$(".datetable-prev").append('<div class="prev"><div class="inline-block prev"></div></div>');$(".datetable-prev .prev").D("click");$(".datetable-prev .prev").s("click",function(a){a.stopPropagation();a=$($(".datepicker")[0]).de("getDate");if(!(a.setMonth(a.getMonth())<b.ao)){a=$($(".datepicker")[2]).de("getDate");a=new Date(a);a.setMonth(a.getMonth()-1);var c=new Date(a);$(".datepicker").b(function(a,b){var d=new Date(c);d.setMonth(d.getMonth()-(2-a));$(b).de("setDate",d)})}});$(".datetable-next").append('<div class="next"><div class="inline-block next"></div></div>');
$(".datetable-next .next").D("click");$(".datetable-next .next").s("click",function(a){a.stopPropagation();a=$($(".datepicker")[2]).de("getDate");if(!(a.setMonth(a.getMonth()+1)>b.Tn)){a=new Date(a);var c=new Date(a);$(".datepicker").b(function(a,b){var d=new Date(c);d.setMonth(d.getMonth()-(2-a));$(b).de("setDate",d)})}});$(".datepicker").de({Qx:"SMTWTFS".split(""),sy:0,Jz:b.ao,Fz:b.Tn,mx:function(a){return b.rr(a)},dA:function(a){$(".jarvis .optionscontainer .selector").U("custom");switch(b.Ec){case "base-from":b.Ec=
"base-to";b.da=new Date(a);b.V=new Date(a);$($(".daterange.baserange .dateoption")[0]).U(D.e.g(b.da));$($(".daterange.baserange .dateoption")[0]).G("invalid");$($(".daterange.baserange .dateoption")[1]).U(D.e.g(b.da));$($(".daterange.baserange .dateoption")[1]).G("invalid");break;case "base-to":b.V=new Date(a);$($(".daterange.baserange .dateoption")[1]).U(D.e.g(b.V));$($(".daterange.baserange .dateoption")[1]).G("invalid");b.Ec=b.ie?"compare-from":"base-from";break;case "compare-from":b.ya=new Date(a);
b.ra=new Date(a);$($(".daterange.comparerange .dateoption")[0]).U(b.g(b.ya));$($(".daterange.comparerange .dateoption")[0]).G("invalid");$($(".daterange.comparerange .dateoption")[1]).U(b.g(b.ya));$($(".daterange.comparerange .dateoption")[1]).G("invalid");b.Ec="compare-to";break;case "compare-to":b.ra=new Date(a),$($(".daterange.comparerange .dateoption")[1]).U(b.g(b.ra)),$($(".daterange.comparerange .dateoption")[1]).G("invalid"),b.Ec="base-from"}b.xd()}});$(".datepicker").de({});$(".datepicker").find('a[href="#"]').b(function(){$(this).s("click",
function(a){a.stopPropagation()})});$(".datepicker").b(function(a,c){var g=new Date(b.V.getFullYear(),b.V.getMonth(),1);g.setMonth(g.getMonth()-(2-a));$(c).de("setDate",g)});$($(".daterange.baserange .dateoption")[0]).focus(function(){b.Ec="base-from";b.xd()});$($(".daterange.baserange .dateoption")[0]).le(function(){"Invalid Date"==new Date($(this).U())?$(this).p("invalid"):($(this).G("invalid"),b.da=new Date($(this).U()))});$($(".daterange.baserange .dateoption")[1]).focus(function(){b.Ec="base-to";
b.xd()});$($(".daterange.baserange .dateoption")[1]).le(function(){"Invalid Date"==new Date($(this).U())?$(this).p("invalid"):($(this).G("invalid"),b.V=new Date($(this).U()))});$($(".daterange.comparerange .dateoption")[0]).focus(function(){b.Ec="compare-from";b.xd()});$($(".daterange.comparerange .dateoption")[0]).le(function(){"Invalid Date"==new Date($(this).U())?$(this).p("invalid"):($(this).G("invalid"),b.ya=new Date($(this).U()))});$($(".daterange.comparerange .dateoption")[1]).focus(function(){b.Ec=
"compare-to";b.xd()});$($(".daterange.comparerange .dateoption")[1]).le(function(){"Invalid Date"==new Date($(this).U())?$(this).p("invalid"):($(this).G("invalid"),b.ra=new Date($(this).U()))});$(".jarvis .optionscontainer .cancel").click(function(){b.da=b.Hk;b.V=b.Ik;b.ya=b.Jk;b.ra=b.Kk;$(".compareoption .checker").Qe(":checked")&&($(".compareoption .checker").click(),$(".compareoption .checker").Rk("checked",!1));$($(".daterange.baserange .dateoption")[0]).U(b.g(b.da));$($(".daterange.baserange .dateoption")[1]).U(b.g(b.V));
$($(".daterange.comparerange .dateoption")[0]).U(b.g(b.ya));$($(".daterange.comparerange .dateoption")[1]).U(b.g(b.ra));b.xd();$(".jarvis.datebox .container").click()});$(".jarvis .optionscontainer .selector").ux(function(){switch(this.value){case "today":b.V=b.Eg();b.da=b.Ob(b.V,-0);break;case "yesterday":b.V=b.Eg();b.V=b.Ob(b.V,-1);b.da=b.Ob(b.V,-0);break;case "lastweek":b.da=b.Eg();b.da=b.Ob(b.da,-1*(b.da.getDay()+7));b.V=b.Ob(b.da,6);break;case "lastmonth":var a=b.Eg(),a=b.Ob(a,-1*a.getDate());
b.Ob(a,-1*(a.getDate()-1));b.V=b.Eg();b.V=b.Ob(b.V,-1*b.V.getDate());b.da=b.Ob(b.V,-1*(b.V.getDate()-1))}a=Date.Ge(b.da,b.V);b.ra=b.Ob(b.da,-1);b.ya=b.Ob(b.ra,-1*a);$($(".daterange.baserange .dateoption")[0]).U(b.g(b.da));$($(".daterange.baserange .dateoption")[1]).U(b.g(b.V));$($(".daterange.comparerange .dateoption")[0]).U(b.g(b.ya));$($(".daterange.comparerange .dateoption")[1]).U(b.g(b.ra));b.xd()});$($(".daterange.baserange .dateoption")[0]).U(b.g(b.da));$($(".daterange.baserange .dateoption")[1]).U(b.g(b.V));
$($(".daterange.comparerange .dateoption")[0]).U(b.g(b.ya));$($(".daterange.comparerange .dateoption")[1]).U(b.g(b.ra));$(".jarvis.datebox .container").D("click");$(".jarvis.datebox .container").s("click",function(){$(this).Ea("expanded")?($(this).G("expanded"),$(".jarvis.picker.datebox .picker").P()):($(D).I("jarvis-picker-metrics-popup",[b]),$(this).p("expanded"),b.da=b.og,b.V=b.Pd,b.ya=b.pg,b.ra=b.Qd,b.Hk=b.og,b.Ik=b.Pd,b.Jk=b.pg,b.Kk=b.Qd,$(".jarvis.picker.datebox .picker").show(),$(".jarvis.picker.datebox .picker").offset({top:$(".jarvis.picker.datebox .picker").offset().top,
left:$(".jarvis.picker.datebox .container").offset().left-$(".jarvis.picker.datebox .picker").outerWidth()+$(".jarvis.picker.datebox .container").outerWidth()}),$(".metricscontainer").P(),$(".metricscontainer").G("on"),$(".metricswrapper .jbtn").G("active"))});$(".jarvis.datebox").click(function(a){a.stopPropagation()});$("body").click(function(){$(".jarvis.datebox .container").G("expanded");$(".jarvis.datebox .picker").P()});$(".jarvis.datebox .optionscontainer .apply").click(function(){$(".jarvis.datebox .container").G("expanded");
$(".jarvis.picker.datebox .picker").P();b.fa=b.ie;b.Up()});this.fa&&(this.ie=!0);this.pu(this.Dp);this.xd()};
D.a.K.i.rr=function(a){if(a>=new Date||"base-to"==this.Ec&&a<this.da)return[!1,"daycell disabled"];if("compare-to"==this.Ec&&a<this.ya)return[!1,"daycell compare disabled"];if(this.ie){if(a==this.ya)return[!0,"daycell compare inrange selected fromdate"];if(a==this.ra)return[!0,"daycell compare inrange selected todate"];if(a>=this.da&&a<=this.V&&a>=this.ya&&a<=this.ra)return[!0,"daycell basencompare inrange"];if(a>=this.ya&&a<=this.ra)return[!0,"daycell compare inrange"]}return a==this.da?[!0,"daycell inrange selected fromdate"]:
a==this.V?[!0,"daycell inrange selected todate"]:a>=this.da&&a<=this.V?[!0,"daycell inrange"]:[!0,"daycell"]};D.a.K.i.Eg=function(){var a=new Date,b=a.getUTCFullYear(),c=a.getUTCMonth()+1,d=a.getUTCDate(),e=a.getUTCHours(),e=e+-1*(a.getTimezoneOffset()/60),a=null,a=new Date(b+"-"+c+"-"+d+" 00:00 GMT");"Invalid Date"==a&&(a=new Date,a.setFullYear(b,c-1,d),a.setHours(parseInt(e)),a.setMinutes(0),a.setSeconds(0));return a};D.a.K.i.g=function(a){return D.e.g(a)};
D.a.K.i.xd=function(){var a=this;$(".datepicker").Ft(this).b(function(){$(this).de("refresh")});$($(".daterange.baserange .dateoption")[1]).G("active");$($(".daterange.comparerange .dateoption")[0]).G("active");$($(".daterange.comparerange .dateoption")[1]).G("active");switch(this.Ec){case "base-from":$($(".daterange.baserange .dateoption")[0]).p("active");$($(".daterange.baserange .dateoption")[1]).G("active");$($(".daterange.comparerange .dateoption")[0]).G("active");$($(".daterange.comparerange .dateoption")[1]).G("active");
break;case "base-to":$($(".daterange.baserange .dateoption")[0]).G("active");$($(".daterange.baserange .dateoption")[1]).p("active");$($(".daterange.comparerange .dateoption")[0]).G("active");$($(".daterange.comparerange .dateoption")[1]).G("active");break;case "compare-from":$($(".daterange.baserange .dateoption")[0]).G("active");$($(".daterange.baserange .dateoption")[1]).G("active");$($(".daterange.comparerange .dateoption")[0]).p("active");$($(".daterange.comparerange .dateoption")[1]).G("active");
break;case "compare-to":$($(".daterange.baserange .dateoption")[0]).G("active"),$($(".daterange.baserange .dateoption")[1]).G("active"),$($(".daterange.comparerange .dateoption")[0]).G("active"),$($(".daterange.comparerange .dateoption")[1]).p("active")}this.ie?($(".jarvis .optionscontainer .checker").Rk("checked",!0),$(".jarvis .optionscontainer .daterange.comparerange").show()):($(".jarvis .optionscontainer .checker").Rk("checked",!1),$(".jarvis .optionscontainer .daterange.comparerange").P());
$(".jarvis .optionscontainer .checker").D("click");$(".jarvis .optionscontainer .checker").s("click",function(){a.ie=!a.ie;a.Ec=a.ie?"compare-from":"base-from";var b=Date.Ge(a.da,a.V);a.ra=a.Ob(a.da,-1);a.ya=a.Ob(a.ra,-1*b);$($(".daterange.comparerange .dateoption")[0]).U(a.g(a.ya));$($(".daterange.comparerange .dateoption")[1]).U(a.g(a.ra));a.xd()})};
D.a.K.i.Dp=function(a,b){$(".dates .datelabel.fromdate").text(D.e.g(b.da));$(".dates .datelabel.todate").text(D.e.g(b.V));$(".dates .datelabel.compare.fromdate").text(D.e.g(b.ya));$(".dates .datelabel.compare.todate").text(D.e.g(b.ra));b.ob?($(".jarvis.picker.datebox").p("compare"),$(".jarvis.picker.datebox .picker").p("compare"),$(".jarvis.picker.datebox .dates .compare").show()):($(".jarvis.picker.datebox").G("compare"),$(".jarvis.picker.datebox .picker").G("compare"),$(".jarvis.picker.datebox .dates .compare").P())};
D.a.K.i.Up=function(){var a=this,b={};a.og=this.da;a.Pd=this.V;a.pg=this.ya;a.Qd=this.ra;b={da:this.og,V:this.Pd,ya:this.pg,ra:this.Qd,ob:this.fa};$(this.tg).b(function(c){a.tg[c].ed(a,b)});a.cb(a);$(a).I("datechange",b);$(D).I("datechange",b)};D.a.K.i.cb=function(a){D.state.Uj=a.da;D.state.Ap=a.V;D.state.fa=a.fa;D.state.ya=a.ya;D.state.ra=a.ra};D.a.K.i.Me=function(a){null!=D.state.Uj&&(a.da=new Date(D.state.Uj),a.V=new Date(D.state.Ap),a.fa=D.state.fa,a.ya=new Date(D.state.ya),a.ra=new Date(D.state.ra))};
D.a.K.i.pu=function(a){this.tg.push({ed:a,sender:void 0})};D.a.K.i.getDate=function(){var a={};this.Pd.setHours(23);this.Pd.setMinutes(59);this.Pd.setSeconds(59);this.Pd.setMilliseconds(999);this.Qd.setHours(23);this.Qd.setMinutes(59);this.Qd.setSeconds(59);this.Qd.setMilliseconds(999);return a={da:this.og,V:this.Pd,ya:this.pg,ra:this.Qd,ob:this.fa}};
D.a.K.i.setDate=function(a,b,c){a.da=b;a.V=c;b=Date.Ge(a.da,a.V);a.ra=a.Ob(a.da,-1);a.ya=a.Ob(a.ra,-1*b);b={da:a.da,V:a.V,ya:a.ya,ra:a.ra,ob:a.fa};a.xd();a.Dp(0,b)};D.debug.log("INFO","jarvis.visualisation.picker.DateBox",6,"JS source loaded");D.ba("jarvis.visualisation.picker.metrics");
D.a.K.B=function(a){this.type="metricpicker";this.Zk=null;this.Z=this;var b={h:null,kb:"Choose a metric...",type:"button",selected:"",Mb:!1,Ce:!1,q:null,bf:!0,Le:[]};if("undefined"==typeof a)throw"Container not specified";b.h=$(a.h);"undefined"!=typeof a.kb?b.kb=a.kb:"undefined"!=typeof b.h.d("data-placeholdertext")&&(b.kb=b.h.d("data-placeholdertext"));"undefined"!=typeof a.type?b.type=a.type:"undefined"!=typeof b.h.d("data-type")&&(b.type=b.h.d("data-type"));"undefined"!=typeof a.selected?b.selected=
a.selected:"undefined"!=typeof b.h.d("data-selected")&&(b.selected=b.h.d("data-selected"));"undefined"!=typeof a.Mb?b.Mb=a.Mb:"undefined"!=typeof b.h.d("data-showgrip")&&(b.Mb=b.h.d("data-showgrip"));"undefined"!=typeof a.Ce?b.Ce=a.Ce:"undefined"!=typeof b.h.d("data-allowremove")&&(b.Ce=b.h.d("data-allowremove"));"undefined"!=typeof a.bf?b.bf=a.bf:"undefined"!=typeof b.h.d("data-showlist")&&(b.bf=b.h.d("data-showlist"));"undefined"!=typeof a.Le?b.Le=a.Le:"undefined"!=typeof b.h.d("data-exclude")&&
(b.Le=b.h.d("data-exclude"));"undefined"!=typeof a.q&&(b.q=a.q);this.h=b.h;this.options=b;b.q||(D.f.B.$(),b.q=D.f.B);this.C(this)};A=D.a.K.B.prototype;A.C=function(a){var b=a.h;b.empty();b.u(a.Ma(a));""!=a.options.selected&&a.qe(a,a.options.selected)};A.sf=function(a){a.options.bf||($(a.h.find(".node.level_0")).G("on"),$(a.h.find(".jcontainer ")).G("on"))};A.Dg=function(a){$(a.h.find(".node.level_0")).p("on");$(a.h.find(".jcontainer ")).p("on")};
A.qe=function(a,b,c){var d=this;this.sf(this);c||$(d.h.find("li[data-metricname]")).G("on");$(d.h.find('li[data-metricname="'+b+'"]')).Id("on");d.Ke(d,b);""!=b?($(d.h.find(".jbtn")[0]).u((21<b.length?b.substring(0,21)+"...":b)+'<span class="caret"></span>'),$(d.h).Ea("on")||($(d.h).p("on"),d.options.Ce&&$(d.h).append('<button class="close">&times;</button>'),$($(this.h).find(".close")).D("click"),$($(this.h).find(".close")).s("click",function(){d.qe(d,"");$(this).remove()}))):($(d.h).G("on"),c=' + add metric <span class="caret"></span>',
"button"==d.options.type&&(c=d.options.kb+'<span class="caret"></span>'),$(d.h.find(".jbtn")[0]).u(c));$(this.h).cc(".pickerwrapper").d("data-id",b);c=$(d.h.find(".metricscontainer"));c.Ea("on")&&(c.P(),c.G("on"),$(d.h.find(".jbtn")[0]).G("active"));d.options.selected=b;a.type==d.type&&$(d).I("select",b);$(D.f.B).b(function(a,c){c.c==b&&(d.Zk=c)})};
function Rb(a,b){$(a.h[0]).find(".key").b(function(a,d){if($(d).text()==b.c){$(d).cc(".node").D("click");$(d).cc(".node").s("click",function(a){a.stopPropagation()});var e=$(d).cc(".node");$(e).p("disabled")}else $(d).cc(".node").G("disabled")})}A.Ke=function(a,b){""==b&&null!=a.options.selected&&(b=a.options.selected);$(a.h.find('li[data-metricname="'+b+'"]').b(function(a,b){var e=$(b);e.parent().Ea("on")||e.parent().p("on");e.cc(".node.level_0").p("on")}))};
A.Ma=function(a){function b(b,c){(""==c||2>c.length)&&13!=b.which?(a.options.bf?(a.Dg(a),d.find(".category").P(),d.find(".node.level_0").O({"background-image":"none","padding-left":0})):(a.sf(a),d.find(".category").show(),d.find(".node.level_0").G("on"),d.find(".node.level_0").O("background-image","url('"+D.hostname+"/assets/img/collapse.png') no-repeat 0px 8px;"),d.find(".node.level_0").O("padding-left","10px"),d.find(".node.level_0").ui("background"),d.find(".node.level_0").ui("background-image")),
a.Ke(a,a.options.selected),d.find(".node.leaf.level_1").find(".key").b(function(){$(this).cc(".level_1").show()})):(a.Dg(a),d.find(".category").P(),d.find(".node.level_0").O({"background-image":"none","padding-left":0}),d.find(".node.leaf.level_1").P(),d.find(".node.leaf.level_1").find(".key").b(function(){var a=$(this);if(-1<a.text().toLowerCase().indexOf(c.toLowerCase())){var b=!1;d.find(".node.leaf.level_1").find(".key").b(function(c,d){var e=$(d);e!=a&&e.text()==a.text()&&e.Qe(":visible")&&(b=
!0)});b?a.cc(".level_1").P():a.cc(".level_1").show()}else a.cc(".level_1").P()}))}var c=$('<div class="metricswrapper"></div>');"button"==a.options.type?c.append('<a class="btn jbtn">'+a.options.kb+'<span class="caret"></span></a>'):(a.options.Mb&&c.append('<div class="grip"></div>'),c.append('<div class="customadd metric jbtn"> + add metric <span class="caret"></span></div>'));c.append('<div class="metricscontainer"><div>');var d=$(c.find(".metricscontainer")),e=$('<div class="search input-prepend"><input type="text" class="quicksearch span2"><span class="add-on"><i class="searchicon icon-search"></i></span></div>');
e.le(function(a){var c=e.find(".quicksearch").U();b(a,c)});e.find(".icon-search").D("click");e.find(".icon-search").s("click",function(a){var c=e.find(".quicksearch").U();b(a,c)});d.append(e);var g=_.dk(a.options.q,function(a){return a.Hb});d.append('<ul class="categorylist"></ul>');var k=$(d.find(".categorylist"));_.b(g,function(b){var c=$('<li class="node  level_0"></li>');c.append('<div class="category">'+b[0].Hb+"</div>");c.append('<ul class="jcontainer"></ul>');$.b(b,function(b,d){if(-1==a.options.Le.indexOf(d.c)){var e=
'<li class="node leaf level_1" data-metricname="'+d.c+'" data-metricid="'+d.Nb+'">',e=e+'<div class="box"><div class="keyvaluepair">',e=e+('<div class="key">'+d.c+"</div>"),e=e+('<div class="help"> <i class="tipsy icon-question-sign icon-white" data-caption="'+d.c+'" data-text="'+d.Ti+'" data-title="'+(""==d.Ti?"Information not available.":d.Ti)+'"></i> </div>'),e=e+"</div>",e=e+"</div>",e=e+"</li>",e=$(e);$(c.find(".jcontainer:last-of-type")).append(e)}});k.append(c)});$(d).find(".icon-question-sign").b(function(a,
b){try{$(b).Sf({Vd:"right",I:"hover",Vb:0,title:"<strong>"+$(b).d("data-caption")+"</strong>",content:$(b).d("data-text")})}catch(c){}});$(c.find(".jbtn")[0]).D("click");$(c.find(".jbtn")[0]).s("click",function(){$(d).Qe(":visible")?$(d).P():($(D).I("jarvis-picker-metrics-popup",[a]),$(d).show());a.options.bf&&(a.Dg(a),d.find(".category").P(),d.find(".node.level_0").O({"background-image":"none","padding-left":0}));e.find(".quicksearch").U("");e.le();e.find(".quicksearch").focus();a.Ke(a,a.options.selected);
$(this).Id("active")});$("body").click(function(){$(d).Qe(":visible")&&(d.P(),$(c.find(".jbtn")[0]).G("active"))});c.click(function(a){a.stopPropagation()});$(d).find(".node.level_0").b(function(){var a=$(this);a.D("click");a.s("click",function(){$(".metricscontainer").P();$(".jbtn").G("active")})});$(d).find(".node.level_1").b(function(){var b=$(this);b.D("click");b.s("click",function(){$(".metricscontainer").P();$(".jbtn").G("active");a.qe(a,$(this).d("data-metricname"))})});d.bind("mousewheel",
function(a,b){0<b&&0==$(this).scrollTop()?a.preventDefault():0>b&&$(this).scrollTop()==$(this).get(0).scrollHeight-$(this).innerHeight()&&a.preventDefault()});return c};$(D).bind("jarvis-picker-metrics-popup",function(){$(".metricscontainer").P();$(".metricscontainer").G("on");$(".metricswrapper .jbtn").G("active");$(".jarvis.picker.datebox .picker").P();$(".jarvis.picker.datebox .container").G("expanded");$(".resolutionpicker-wrapper").P();$(".resolutionwrapper .jbtn").G("active")});D.loaded.push("jarvis.visualisation.picker.metrics");
D.debug.log("INFO","Jarvis.Visualisation.Picker.Metrics",6,"JS source loaded");D.ba("jarvis.visualisation.picker.dimensions");D.ba("jarvis.visualisation.picker.dimensions");
D.a.K.w=function(a){this.Z=this;var b={h:null,kb:"Choose a dimension...",prefix:"",multiple:!1,type:"button",Mb:!1,selected:"",ag:!0,A:null};if("undefined"==typeof a)throw"Container not specified";b.h=$(a.h);"undefined"!=typeof a.kb?b.kb=a.kb:"undefined"!=typeof b.h.d("data-placeholdertext")&&(b.kb=b.h.d("data-placeholdertext"));"undefined"!=typeof a.prefix?b.prefix=a.prefix:"undefined"!=typeof b.h.d("data-prefix")&&(b.prefix=b.h.d("data-prefix"));"undefined"!=typeof a.type?b.type=a.type:"undefined"!=
typeof b.h.d("data-type")&&(b.type=b.h.d("data-type"));"undefined"!=typeof a.Mb?b.Mb=a.Mb:"undefined"!=typeof b.h.d("data-showgrip")&&(b.Mb=b.h.d("data-showgrip"));"undefined"!=typeof a.selected?b.selected=a.selected:"undefined"!=typeof b.h.d("data-selected")&&(b.selected=b.h.d("data-selected"));"undefined"!=typeof a.multiple?b.multiple=a.multiple:"undefined"!=typeof b.h.d("data-multiple")&&(b.multiple=b.h.d("data-multiple"));"undefined"!=typeof a.ag?b.ag=a.ag:"undefined"!=typeof b.h.d("data-showselected")&&
(b.ag=b.h.d("data-showselected"));"undefined"!=typeof a.A&&(b.A=a.A);this.h=b.h;this.options=b;b.A||(D.f.w.$(),b.A=D.f.w);this.C(this)};A=D.a.K.w.prototype;A.C=function(a){var b=a.h;b.empty();b.u(a.Ma(a));""!=a.options.selected&&a.qe(a,a.options.selected,a.options.multiple)};A.sf=function(a){$(a.h.find(".node.level_0")).G("on");$(a.h.find(".jcontainer ")).G("on")};A.Dg=function(a){$(a.h.find(".node.level_0")).p("on");$(a.h.find(".jcontainer ")).p("on")};
A.qe=function(a,b,c){a.sf(a);c||$(a.h.find("li[data-dimensionname]")).G("on");$(a.h.find('li[data-dimensionname="'+b+'"]')[0]).Id("on");a.Ke(a,b);""!=b&&a.options.ag?($(a.h.find(".jbtn")[0]).u(b+'<span class="caret"></span>'),$(a.h).Ea("on")||($(a.h).p("on"),a.options.Ce&&$(a.h).append('<button class="close">&times;</button>'),$($(this.h).find(".close")).D("click"),$($(this.h).find(".close")).s("click",function(){a.qe(a,"");$(this).remove()}))):($(a.h).G("on"),c=' + add dimension <span class="caret"></span>',
"button"==a.options.type&&(c=a.options.kb+'<span class="caret"></span>'),$(a.h.find(".jbtn")[0]).u(c));$(this.h).cc(".pickerwrapper").d("data-id",b);c=$(a.h.find(".dimensionscontainer"));c.Ea("on")&&(c.P(),c.G("on"),$(a.h.find(".jbtn")[0]).G("active"));a.options.selected=b;$(a).I("select",b)};A.Ke=function(a,b){""==b&&null!=a.options.selected&&(b=a.options.selected);var c=$(a.h.find('li[data-dimensionname="'+b+'"]')[0]);c.parent().Ea("on")||c.parent().p("on");c.cc(".node.level_0").p("on")};
A.Ma=function(a){function b(b,c){(""==c||2>c.length)&&13!=b.which?(a.sf(a),a.Ke(a,a.options.selected),d.find(".category").show(),d.find(".node.level_0").O("background-image","url('"+D.hostname+"/assets/img/collapse.png') no-repeat 0px 8px;"),d.find(".node.level_0").O("padding-left","10px"),d.find(".node.level_0").ui("background"),d.find(".node.level_0").ui("background-image"),d.find(".node.leaf.level_1").find(".key").b(function(){$(this).cc(".level_1").show()})):(a.Dg(a),d.find(".category").P(),d.find(".node.level_0").O({"background-image":"none",
"padding-left":0}),d.find(".node.leaf.level_1").find(".key").b(function(){var a=$(this);-1<a.text().toLowerCase().indexOf(c.toLowerCase())?a.cc(".level_1").show():a.cc(".level_1").P()}))}var c=$('<div class="dimensionswrapper"></div>');"button"==a.options.type?c.append('<a class="btn jbtn">'+a.options.kb+' <b class="caret"></b></a>'):"none"==a.options.type?c.append('<bb class="jbtn">'+a.options.kb+' <b class="caret"></b></bb>'):(a.options.Mb&&c.append('<div class="grip"></div>'),c.append('<div class="customadd dimension jbtn"> + add dimension </div>'));
c.append('<div class="dimensionscontainer"><div>');var d=$(c.find(".dimensionscontainer")),e=$('<div class="search input-prepend"><input type="text" class="quicksearch span2"><span class="add-on"><i class="searchicon icon-search"></i></span></div>');e.le(function(a){var c=e.find(".quicksearch").U();b(a,c)});e.find(".icon-search").D("click");e.find(".icon-search").s("click",function(a){var c=e.find(".quicksearch").U();b(a,c)});d.append(e);var g=_.dk(D.f.w,function(a){return a.Hb?a.Hb.c:"(not set)"}),
g=_.Vc(g,function(a){return a[0].Hb.ae});d.append('<ul class="categorylist"></ul>');var k=$(d.find(".categorylist"));_.b(g,function(a){if(a[0].Hb&&"(not set)"!=a[0].Hb.c){var b=$('<li class="node  level_0"></li>');b.append('<div class="category">'+(a[0].Hb?a[0].Hb.c:"(not set)")+"</div>");b.append('<ul class="jcontainer"></ul>');var c=!1;$.b(a,function(a,d){if(d.zl!=d.Dl||-1>=d.Nb){var e='<li class="node leaf level_1" data-dimensionname="'+d.c+'" data-dimensionid="'+d.Nb+'">',e=e+'<div class="box"><div class="keyvaluepair">',
e=e+('<div class="key">'+d.c+"</div>"),e=e+('<div class="help"> <i class="icon-question-sign icon-white" data-caption="'+d.c+'" data-text="'+d.Ti+'"></i> </div>'),e=e+"</div>",e=e+"</div>",e=e+"</li>",e=$(e);$(b.find(".jcontainer:last-of-type")).append(e);c=!0}});c&&k.append(b)}});$(d).find(".icon-question-sign").b(function(a,b){$(b).Sf({Vd:"right",I:"hover",Vb:0,title:"<strong>"+$(b).d("data-caption")+"</strong>",content:$(b).d("data-text")})});$(c.find(".jbtn")[0]).D("click");$(c.find(".jbtn")[0]).s("click",
function(){d.toggle();d.Id("on");a.sf(a);e.find(".quicksearch").U("");e.le();e.focus();a.Ke(a,a.options.selected);$(this).Id("active")});$("body").click(function(){d.Ea("on")&&(d.toggle(),d.Id("on"),$(c.find(".jbtn")[0]).Id("active"))});c.click(function(a){a.stopPropagation()});$(d).find(".node.level_0").b(function(){var a=$(this);a.D("click");a.s("click",function(a){a.stopPropagation();$(this).Id("on");$($(this).find(".jcontainer")[0]).Id("on")})});$(d).find(".node.level_1").b(function(){var b=$(this);
b.D("click");b.s("click",function(b){b.stopPropagation();a.qe(a,$(this).d("data-dimensionname"),a.options.multiple)})});d.bind("mousewheel",function(a,b){0<b&&0==$(this).scrollTop()?a.preventDefault():0>b&&$(this).scrollTop()==$(this).get(0).scrollHeight-$(this).innerHeight()&&a.preventDefault()});return c};D.loaded.push("jarvis.visualisation.picker.dimensions");D.debug.log("INFO","Jarvis.Visualisation.Picker.Dimensions",6,"JS source loaded");D.ba("jarvis.visualisation.container");D.debug.log("INFO","Jarvis.Visualisation.Container",6,"JS source loaded");D.ba("jarvis.visualisation.container.metrics");D.a.h.B=function(a){this.Z=this;this.id=-1;var b={h:null,title:"New metric group",q:[],Sb:-1};if("undefined"==typeof a)throw"Container not specified";b.h=$(a.h);b.title=a.title;a.q&&(b.q=a.q);a.id&&(this.id=a.id);a.Sb&&(b.Sb=a.Sb);a.Xh&&(b.Xh=a.Xh);this.h=b.h;this.options=b;this.C(this)};D.a.h.B.prototype.C=function(a){var b=a.h;b.empty();b.u(a.Ma(a));0<a.options.q.length&&$(this.options.q).b(f())};
D.a.h.B.prototype.Ma=function(a){var b=$(""),c=$('<div class="metricscontainer"></div>'),b=$('<div class="well "></div>');b.append('<button type="button" class="close">&times;</button>');b.find(".close").D("click");b.find(".close").s("click",function(){c.remove();$(a).I("group-removed",a.id)});c.append(b);if(!a.options.Xh){b.append('<input class="input_mgroup_title" type="text" placeholder="New metric group" value="'+a.options.title+'">');var d=$(b.find(".input_mgroup_title"));d.D("keyup");d.s("keyup",
function(){$(a).I("rename",$(this).U())})}var e=$('<div class="metricscollection"></div>');b.append(e);$(a.options.q).b(function(b,c){if(!c.Ya){var d=$('<div class="pickerwrapper"><div class="jarvis picker metrics" data-type="placeholder"></div><button type="button" class="close">&times;</button></div>'),g=d.find(".close");g.D("click");g.s("click",function(){d.remove();$(a).I("metric-removed",c.c)});var k=new D.a.K.B({h:$(d.find(".picker")),Mb:!0,selected:c.c});$(k).bind("select",function(b,d){""!=
d?(g.d("data-id",d),Sb(a),$(a).I("metric-removed",c.c),$(a).I("metric-added",d)):(k.options.h.remove(),k=null)});e.append(d)}});var g=$('<div class="pickerwrapper"><div class="jarvis picker metrics" data-type="placeholder"></div><button type="button" class="close">&times;</button></div>'),k=g.find(".close");k.D("click");k.s("click",function(){g.remove();$(a).I("metric-removed",$(this).d("data-id"))});var l=new D.a.K.B({h:$(g.find(".picker")),Mb:!0});$(l).bind("select",function(b,c){""!=c?(k.d("data-id",
c),Sb(a),$(a).I("metric-added",c)):(l.options.h.remove(),l=null)});e.append(g);b=c;b.find(".metricscollection").gl({Jj:".pickerwrapper",handle:".grip",Rd:-250,update:function(){$(a).I("metric-reorder")},stop:f()}).Pj();return b};
function Sb(a){var b=a.h.find(".metricscollection");if(!(b.find(".pickerwrapper").length>=a.options.Sb&&-1<a.options.Sb||0<b.find(".jarvis.picker.metrics:not(.on)").length)){var c=$('<div class="pickerwrapper"><div class="jarvis picker metrics" data-type="placeholder" ></div><button type="button" class="close">&times;</button></div>'),d=c.find(".close");d.D("click");d.s("click",function(){c.remove();$(a).I("metric-removed",$(this).d("data-id"))});var e=new D.a.K.B({h:c.find(".picker"),Mb:!0});$(e).bind("select",
function(b,c){""!=c?(d.d("data-id",c),Sb(a),$(a).I("metric-added",c)):(e.options.h.remove(),e=null)});b.append(c)}}D.loaded.push("jarvis.visualisation.container.metrics");D.debug.log("INFO","Jarvis.Visualisation.Container.Metrics",6,"JS source loaded");D.ba("jarvis.visualisation.container.dimensions");D.a.h.w=function(a){this.Z=this;var b={h:null,kb:"Choose a dimension...",type:"button",selected:"",Sb:4,A:[]};if("undefined"==typeof a)throw"Container not specified";b.h=$(a.h);a.A&&(b.A=a.A);a.Sb&&(b.Sb=a.Sb);this.h=b.h;this.options=b;this.C(this)};D.a.h.w.prototype.C=function(a){var b=a.h;b.empty();b.u(a.Ma(a))};
D.a.h.w.prototype.Ma=function(a){var b=$(""),b=$('<div class="dimensioncontainer"></div>'),c=$('<div class="well"></div>');b.append(c);var d=$('<div class="dimensionscollection"></div>');c.append(d);0<a.options.A.length&&$(a.options.A).b(function(b,c){if(!c.Ya){var e=$('<div class="pickerwrapper"><div class="jarvis picker dimensions" data-type="placeholder"></div><button type="button" class="close">&times;</button></div>'),g=e.find(".close");g.D("click");g.s("click",function(){e.remove();$(a).I("dimension-removed",
c.c)});var k=new D.a.K.w({h:$(e.find(".picker")),Mb:!0,selected:c.c});$(k).bind("select",function(b,d){""!=d?(g.d("data-id",d),a.nf(a,""),$(a).I("dimension-removed",c.c),$(a).I("dimension-added",d)):(k.options.h.remove(),k=null)});d.append(e)}});var e=$('<div class="pickerwrapper"><div class="jarvis picker dimensions" data-type="placeholder"></div><button type="button" class="close">&times;</button></div>'),g=e.find(".close");g.D("click");g.s("click",function(){e.remove();$(a).I("dimension-removed",
$(this).d("data-id"))});var k=new D.a.K.w({h:$(e.find(".picker")),Mb:!0});$(k).bind("select",function(b,c){""!=c?(g.d("data-id",c),a.nf(a,""),$(a).I("dimension-added",c)):(k.options.h.remove(),k=null)});d.append(e);b.find(".dimensionscollection").gl({Jj:".pickerwrapper",handle:".grip",Rd:-250,update:function(){$(a).I("dimension-reorder")},stop:f()}).Pj();return b};
D.a.h.w.prototype.nf=function(a){var b=a.h.find(".dimensionscollection");if(!(b.find(".pickerwrapper").length>=a.options.Sb&&-1<a.options.Sb||0<b.find(".jarvis.picker.dimensions:not(.on)").length)){var c=$('<div class="pickerwrapper"><div class="jarvis picker dimensions" data-type="placeholder" ></div><button type="button" class="close">&times;</button></div>'),d=c.find(".close");d.D("click");d.s("click",function(){c.remove();$(a).I("dimension-removed",$(this).d("data-id"))});var e=new D.a.K.w({h:c.find(".picker"),
Mb:!0});$(e).bind("select",function(b,c){""!=c?(d.d("data-id",c),a.nf(a,""),$(a).I("dimension-added",c)):(e.options.h.remove(),e=null)});b.append(c)}};D.loaded.push("jarvis.visualisation.container.dimensions");D.debug.log("INFO","Jarvis.Visualisation.Container.Dimensions",6,"JS source loaded");D.ba("jarvis.visualisation.container.Filter");D.a.h.ca=function(a){this.Z=this;var b={h:null};if("undefined"==typeof a)throw"Container not specified";b.h=$(a.h);a.A&&(b.A=a.A);a.Sb&&(b.Sb=a.Sb);this.h=b.h;this.options=b;this.C(this)};D.a.h.ca.prototype.C=function(a){var b=a.h;b.empty();b.u(a.Ma(a))};
D.a.h.ca.prototype.Ma=function(a){$("");var b=$('<div class="search_filter_wrapper"></div>'),c=$('<div class="condition_wrapper"></div>'),d=$('<div class="condition_group_wrapper"></div>'),e=$('<div class="condition_group"></div>'),g=$('<div class="conditions"><div class="close">&times;</div></div>'),k=$('<div class="condition condition_include "><div class="btn-group"><a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Include<span class="caret"></span></a><ul class="dropdown-menu"><li class="active"><a>Include</a></li><li class=""><a>Exclude</a></li></ul></div></div>'),
l=$('<div class="condition condition_picker"><div class="jarvis picker dimensions"></div></div>'),n=new D.a.K.w({h:l.find(".picker"),Mb:!1,type:"placeholder"});$(n).bind("select",function(b,c){""!=c?($close.d("data-id",c),a.nf(a,""),$(a).I("dimension-added",c)):(n.options.h.remove(),n=null)});var h=$('<div class="condition condition_type"><div class="btn-group"><a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Containing<span class="caret"></span></a><ul class="dropdown-menu"><li class=""><a>Excatly matching</a></li><li class=""><a>Matching RegExp</a></li><li class=""><a>Begins with</a></li><li class=""><a>Ends with</a></li><li class="active"><a>Containing</a></li></ul></div></div>'),
m=$('<div class="condition condition_term"><div><input type="text" class="advancedsearch_text input-medium"></div></div>');g.append(k);g.append(l);g.append(h);g.append(m);e.append(g);d.append(e);c.append(d);d=$('<div class="condition_sep_and">and</div>');e=$('<div class="condition_group_wrapper"></div>');g=$('<div class="conditions"></div>');k=$('<div class="addnewconditionbutton" style=""><span><span class="pluscaption">+</span>&nbsp;Add another <span class="dimensioncaption">filter</span></span></div>');
g.append(k);e.append(g);c.append(d);c.append(e);b.append(c);return b};
D.a.h.ca.prototype.nf=function(a){var b=a.h.find(".dimensionscollection");if(!(b.find(".pickerwrapper").length>=a.options.Sb&&-1<a.options.Sb||0<b.find(".jarvis.picker.dimensions:not(.on)").length)){var c=$('<div class="pickerwrapper"><div class="jarvis picker dimensions" data-type="placeholder" ></div><button type="button" class="close">&times;</button></div>'),d=c.find(".close");d.D("click");d.s("click",function(){c.remove();$(a).I("dimension-removed",$(this).d("data-id"))});var e=new D.a.K.w({h:c.find(".picker"),
Mb:!0});$(e).bind("select",function(b,c){""!=c?(d.d("data-id",c),a.nf(a,""),$(a).I("dimension-added",c)):(e.options.h.remove(),e=null)});b.append(c)}};D.loaded.push("jarvis.visualisation.container.Filter");D.debug.log("INFO","jarvis.visualisation.container.Filter",6,"JS source loaded");D.ba("jarvis.visualisation.realtime");D.a.r.Dc=!1;D.a.r.paused=!1;D.a.r.Xe=null;D.a.r.Fu=!1;D.a.r.kp=[];D.a.r.Hd=[];D.a.r.vd="";D.a.r.kd="";D.a.r.L="";D.a.r.filters=[];D.a.r.Oo;D.a.r.C=function(){var a=(new Date).getMilliseconds();window.ei=D.a.r.gq;D.debug.log("INFO","Realtime",5,"...realtime init ("+((new Date).getMilliseconds()-a)+"ms)")};D.a.r.gq=function(a){D.a.r.Oo=new Date(a)};
D.a.r.ti=function(){D.a.r.L="";var a=D.a.r.filters;D.a.r.filters=[];$(D.a.r.kd.split("[AND]")).b(function(a,b){var e=b.split("=")[0],g=b.split("=")[1];e&&D.a.r.filters.push({caption:e,value:g})});$(D.a.r.vd.split("[AND]")).b(function(a,b){var e=b.split("=")[0],g=b.split("=")[1];e&&D.a.r.filters.push({caption:e,value:g})});D.a.r.L=D.a.r.kd+D.a.r.vd;D.a.r.filters!=a&&$(D.a.r).I("filterchange");var b=$(".jarvis.realtime.panel").find(".filtersWrapper");b&&(b.empty(),0==D.a.r.filters.length?b.P():($(D.a.r.filters).b(function(a,
d){var e;e=""+('<div class="filterWrapper"><div class="filterContainer"><span class="caption">'+d.caption+':</span><span class="value">'+d.value+'</span><button type="button" class="close">\u00d7</button></div></div>');e=$(e);var g=$(e.find(".close"));g.D("click");g.s("click",function(){var a=d.caption+"="+d.value+"[AND]";D.a.r.kd=D.a.r.kd.replace(a,"");D.a.r.vd=D.a.r.vd.replace(a,"");D.a.r.ti()});b.append(e)}),b.show()))};D.a.r.zr=function(a){$(D.a.r).I("backintime",a)};
D.a.r.Ar=function(){$(D.a.r).I("backtotime",void 0)};D.a.r.start=function(){D.a.r.Dc||D.l.m(PokeIn,"/engine/Realtime.svc/Start",null,null)};D.a.r.Wk=function(){D.a.r.Dc?$(D.a.r).I("cometstart"):(D.debug.log("INFO","Realtime",5,"Restarting Comet"),PokeIn.yw(),document.tw=function(){D.a.r.start()})};D.a.r.stop=function(){D.a.r.Dc&&(D.debug.log("INFO","Realtime",5,"Comet Stopped"),PokeIn.Yv(),D.a.r.Dc=!1);$(D.a.r).I("cometstop")};D.debug.log("INFO","Jarvis.Realtime.Visualisation",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.Status");
D.a.r.ze.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];var e=null,e=b?$(b):$(".jarvis.realtime.status");0!=e.length&&($(e).b(function(){$(this).parent().Ea("prettyprint")||(D.debug.log("INFO","jarvis.visualisation.realtime.Status",6,"Applying to container ('"+this.id+"')"),$(this).u(c.Ma()),$(this).bind("isConnected",function(a,b){b.data=D.a.r.Dc}),$(this).find(".alert .close").bind("click",function(){$(this).I("dismissed",$(this).data().data)}),
c.S.push(this),D.a.r.kp.push(this))}),c.Dd(),$(D.r).bind("cometstart",function(){c.Dd()}),$(D.r).bind("cometstop",function(){c.Dd()}),D.f.w.$(),D.f.B.$(),D.debug.log("INFO","jarvis.visualisation.realtime.Status",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
D.a.r.ze.Dd=function(){$(D.a.r.ze.S).b(function(){var a=null,b=null,c=null,a=$(this).d("data-connected")?eval($(this).d("data-connected")):D.a.r.Dc,b=$(this).d("data-paused")?eval($(this).d("data-paused")):D.a.r.paused,c=$(this).d("data-showwhenworking")?eval($(this).d("data-showwhenworking")):!1,d="",e="";D.a.r.Fu?a?(e="alert-success",d="<strong>Realtime working!</strong> All systems seem to be working correctly.",c||$(this).P()):a||b?!a&&b&&(e="alert-info",d=null!=D.a.r.Xe?"Realtime is currently paused at <strong>"+
D.e.g(D.a.r.Xe,"hh:nn",!0)+"</strong>":"<strong>Realtime paused!</strong> Realtime view is currently paused",$(this).show()):(e="alert-error",d="<strong>Realtime error!</strong> Realtime appears to be stopped.",$(this).show()):(e="alert-error",d="<strong>Realtime error!</strong> The Realtime system appears to be offline.",$(this).show());$(this).find(".content").u(d);$(this).find(".alert").G("alert-success");$(this).find(".alert").G("alert-error");$(this).find(".alert").G("alert-info");$(this).find(".alert").p(e);
$(this).data({data:d})})};D.a.r.ze.ei=function(a){D.a.r.ze.Dd(new Date(a))};D.a.r.ze.Ma=function(){var a=$('<div class="alert" ></div>');a.append('<button class="close" data-dismiss="alert">\u00d7</button>');a.append('<span class="content"></span>');return a};D.a.r.ze.Ra=function(a,b){b||(b="mmm dd, yyyy hh:nn:ss");return D.e.g(a,b)};D.debug.log("INFO","jarvis.visualisation.realtime.Status",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.StartStop");
D.a.r.iq.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];D.f.w.$();D.f.B.$();var e=null,e=b?$(b):$(".jarvis.realtime.startstop");0!=e.length&&($(e).b(function(){$(this).parent().Ea("prettyprint")||(D.debug.log("INFO","jarvis.visualisation.realtime.StartStop",6,"Applying to container ('"+this.id+"')"),$(this).Ea("start")?($(this).p("btn btn-large btn-primary"),$(this).D("click"),$(this).bind("click",function(){D.a.r.Wk()}),D.a.r.Dc&&$(this).p("disabled")):
$(this).Ea("stop")&&($(this).p("btn btn-large"),$(this).D("click"),$(this).bind("click",function(){D.a.r.stop()}),D.a.r.Dc||$(this).p("disabled")),$(this).find(".alert .close").bind("click",function(){$(this).I("dismissed",$(this).data().data)}),c.S.push(this))}),$(D.r).bind("cometstart",function(){$(c.S).b(function(){$(this).Ea("start")?$(this).p("disabled"):$(this).Ea("stop")&&$(this).G("disabled")})}),$(D.r).bind("cometstop",function(){$(c.S).b(function(){$(this).Ea("start")?$(this).G("disabled"):
$(this).Ea("stop")&&$(this).p("disabled")})}),D.debug.log("INFO","jarvis.visualisation.realtime.StartStop",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};D.debug.log("INFO","Jarvis.Realtime.Visualisation.Status",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.DateBox");
D.a.r.i.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];D.a.r.start();var e=null,e=b?$(b):$(".jarvis.realtime.datebox");0!=e.length&&($(e).b(function(){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.realtime.DateBox",6,"Applying to container ('"+this.id+"')");$(this).u(c.Ma());$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)});
if(0==$(this).find(".datebox").length)throw"Could not find a valid .datebox in container "+b;c.S.push(this)}}),c.Dd(c.Ra(D.e.cs())),0<e.length&&(window.ei=D.a.r.i.ei),D.debug.log("INFO","jarvis.visualisation.realtime.DateBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};D.a.r.i.Dd=function(a){$(D.a.r.i.S).b(function(){var b=$(this).find(".datebox"),c=D.a.r.i.Ra(a,$(this).d("data-format"));$(b[0]).text(c);$(this).data({data:a})})};D.a.r.i.ei=function(a){D.a.r.i.Dd(new Date(a))};
D.a.r.i.Ma=function(){var a=$('<div class="wrapper"></div>');a.append('<div class="datebox"></div>');return a};D.a.r.i.Ra=function(a,b){b||(b="mmm dd, yyyy hh:nn:ss");return D.e.g(a,b)};D.debug.log("INFO","jarvis.visualisation.realtime.DateBox",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.Timeline");function Tb(a){this.Z=this;this.options=a;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.hm=this.gm=this.Vk=this.Uk=!1;this.bp=!0;this.al="#1a87d5";D.a.r.start();D.f.w.$();D.f.B.$()}A=Tb.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];var e=null,e=b?$(b):$(".jarvis.realtime.timeline");0!=e.length&&($(e).b(function(){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.realtime.Timeline",6,"Applying to container ('"+this.id+"')");var a=$(this).d("data-metrics");if(null==a)throw"You must specify a metric for the timeline";var b=$(this).d("data-seriescolor");b&&(c.al=b);if(b=$(this).d("data-showseconds"))c.bp=
eval(b);$(this).u(c.Ma());c.Ve.Pa();c.dh.Pa();c.gm=!0;c.hm=!0;$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)});b="_"+a+"_"+D.a.r.L+"_Timeline_1_1___0";b=b.replace(/ /g,"").replace(/,/g,"").replace(/\./g,"");c.key=b;if(D.a.r.Dc){D.debug.log("INFO","Subscribing to comet channel (already connected) - "+b,6,"");var d={sd:PokeIn.td(),w:"",B:a,ca:D.a.r.L,t:"Timeline",jc:1,gb:1,la:!1,ed:"jarvisResponse_Realtime_Response"};
D.l.m(this,"/engine/Realtime.svc/subscribe",d,f())}else D.debug.log("INFO","Subscribing to comet channel (bind) - "+b,6,""),$(D.r).bind("cometstart",function(){var b={sd:PokeIn.td(),w:"",B:a,ca:D.a.r.L,t:"Timeline",jc:1,gb:1,la:!1,ed:"jarvisResponse_Realtime_Response"};D.l.m(this,"/engine/Realtime.svc/subscribe",b,f())});D.a.r.Hd.push({key:b,sender:c});window.sz=c.Gn}}),D.a.r.paused&&c.Gn(null,c,new Date(D.a.r.Oo)),$(this).bind("click",function(a,b){b.selected?(D.a.r.zr(b.timestamp),D.a.r.paused=
!0,D.a.r.Xe=b.timestamp,D.a.r.stop(),$(D.a.r.kp).b(function(a,b){$(b).bind("dismissed",function(){c.Yb=!1;c.Wb=!1;c.Qb=[];c.Rb=null;D.a.r.paused=!1;D.a.r.Xe=null;D.a.r.Wk()})}),c.Ze(c,b)):(D.a.r.Ar(),c.Yb=!1,c.Wb=!1,c.Qb=[],c.Rb=null,D.a.r.paused=!1,D.a.r.Xe=null,D.a.r.Wk())}),D.debug.log("INFO","jarvis.visualisation.realtime.Timeline",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.Ze=function(a,b){var c=new Date(b.timestamp);c.setSeconds(59);c.setMilliseconds(999);var d=new Date(c);d.setSeconds(d.getSeconds()-59);c={ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(c,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:"Bet Count",t:"Timeline",la:!1,ca:D.a.r.L,We:!1};D.l.m(a,"/engine/Query.svc/fetch",c,a.wn)};
A.Gn=function(a,b,c){function d(){$(a).b(function(a,b){var c={y:parseFloat(b.value),name:new Date(b.timestamp)};e=c.y;g=new Date(c.name);l.mg(c,!0,!0,!0)});if(g){l=k.Ve.j[0];var b=g;0==b.getSeconds()?l.mg({y:e,name:b},!0,!0,!0):((l.data[l.data.length-1].name="test")&&b.setSeconds(0),l.data[l.data.length-1].name=b,l.data[l.data.length-1].update(l.data[l.data.length-1].y+e,!0,!1))}}var e,g,k=null;if(a){$(D.a.r.Hd).b(function(b,c){c.key==a[0].key&&(k=c.sender)});g=e=void 0;var l=k.dh.j[0]}else k=b;!k.Yb||
D.a.r.paused?(k.Qb.push(d),k.Wb||(k.Wb=!0,k.Rb=a?new Date(a[0].timestamp):c,b=new Date(k.Rb),b.setSeconds(b.getSeconds()-1),b.setMilliseconds(999),b.setMinutes(b.getMinutes()-1),b.setSeconds(b.getSeconds()-1),c=new Date(b),c.setMinutes(c.getMinutes()-30),b={ta:D.e.g(c,"yyyy-mm-dd hh:nn:00.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:"Bet Count",t:"Minute",la:!1,ca:D.a.r.L,We:!0},D.l.m(k,"/engine/Query.svc/fetch",b,k.Gs),b=function(){var a=[],b;for(b=-29;0>=b;b++)a.push({y:0,name:"test"});return a}(),
k.Ve.j[0].setData(b,!0),b=function(){var a=[],b;for(b=-59;0>=b;b++)a.push({y:0});return a}(),k.dh.j[0].setData(b,!0))):d()};
A.Gs=function(a,b){500!=b.Wf&&(b=$.Y(b.data),$(b.va.Q).b(function(b,c){a.Ve.j[0].mg({y:parseFloat(c.k[1]),name:new Date(c.k[0])},!0,!0,!0)}),a.Ve.Pa());var c=new Date(a.Rb);c.setSeconds(c.getSeconds()-1);c.setMilliseconds(999);var d=new Date(c);d.setSeconds(d.getSeconds()-59);c={ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(c,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:"Bet Count",t:"Timeline",la:!1,ca:D.a.r.L,We:!0};D.l.m(a,"/engine/Query.svc/fetch",c,a.wn)};
A.wn=function(a,b){b=$.Y(b.data);$(b.va.Q).b(function(b,d){var e,g,k=a.dh.j[0],l={y:parseFloat(d.k[1]),name:new Date(d.k[0])};e=l.y;g=new Date(l.name);k.mg(l,!1,!0,!0);if(!D.a.r.paused&&g)if(k=a.Ve.j[0],59==g.getSeconds()){var n=new Date(g),l={y:e,name:g};n.setSeconds(0);k.data[k.data.length-1].name=n;k.mg(l,!0,!0,!0)}else(k.data[k.data.length-1].name="test")&&g.setSeconds(0),k.data[k.data.length-1].name=g,k.data[k.data.length-1].update(k.data[k.data.length-1].y+e,!0,!1)});a.dh.Pa();D.a.r.paused||
a.Ve.Pa();a.Yb=!0;D.a.r.paused||($(a.Qb).b(function(a,b){b()}),a.Qb=[])};
A.Ma=function(){var a=this,b=$('<div class="wrapper"></div>');b.append('<div class="row-fluid"><div class="span12"><div class="row-fluid chartcontainer"></div></div></div>');a.bp?(b.find(".chartcontainer").append($('<div class="span7 minutesChart">&nbsp;</div>')),b.find(".chartcontainer").append('<div class="span5 secondsChart">&nbsp;</div>')):(b.find(".chartcontainer").append($('<div class="span12 minutesChart">&nbsp;</div>')),b.find(".chartcontainer").append('<div class="span0 secondsChart" style="display:none;">&nbsp;</div>'));
var c=b.find(".minutesChart"),d=b.find(".secondsChart");a.Ve=new Highcharts.fb({F:{backgroundColor:$(c).O("backgroundColor"),height:235,marginTop:40,marginLeft:0,marginRight:0,marginBottom:0,Xc:0,Zc:15,Yc:0,Wc:0,Tb:$(c).get(0),ab:{duration:300,transition:"easeOutBounce"},type:"column",Eb:{load:f(),Pa:function(){if(a.Uk||a.gm)a.Uk=!1;else{a.Uk=!0;var b=$(".minutesChart").width();this.Wd(b,235)}}}},title:{text:"Per minute",align:"left",style:{color:"#666",fontSize:"13px"},y:0,x:3},Ta:{labels:{enabled:!1,
style:{fontSize:"10px;",color:"#2d96ca"}},mh:0},$a:{Yd:!1,Fd:!0,Rc:!0,title:{text:null},labels:{style:{fontFamily:"Arial",fontSize:"10px",color:"#979797",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},align:"left",x:5,y:15},Wg:[{value:0,width:1,color:"#808080"}]},lb:{cd:!0,Ra:function(){var a=new Date(this.v.name);a.setHours(a.getHours()+3);var b=jQuery.tB(a),a=D.e.g(a,"hh:nn");return"<div><b>"+b+"</b></div><div>"+a+'</div><div style="margin-top:5px;">Events: '+
this.y+"</div>"}},pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!1},j:[{name:"Minute-by-minute data",data:function(){var a=[],b;for(b=-29;0>=b;b++)a.push({y:0,name:"test"});return a}(),cursor:"pointer",v:{Eb:{click:function(){$(a).I("click",{timestamp:this.name,value:this.y,selected:this.selected?!1:!0})}}}}],md:{tf:{of:!0},j:{color:a.al,Yg:0.1,Jg:0,borderWidth:0,Na:!1}}});$(c).append('<div class="row"><div class="span2 charttick "></div><div class="span2 charttick ">-25 min</div><div class="span2 charttick ">-20 min</div><div class="span2 charttick ">-15 min</div><div class="span2 charttick ">-10 min</div><div class="span2 charttick ">-5 min</div></div>');
a.dh=new Highcharts.fb({F:{backgroundColor:$(d).O("backgroundColor"),height:235,marginTop:40,marginBottom:0,Zc:15,Xc:0,Yc:0,Wc:0,OA:"#932D22",Tb:$(d).get(0),ab:{duration:300,transition:"easeOutBounce"},type:"column",Eb:{load:f(),Pa:function(){if(a.Vk||a.hm)a.Vk=!1;else{a.Vk=!0;var b=$(".secondsChart").width();this.Wd(b,235)}}}},title:{text:"Per second",align:"left",style:{color:"#666",fontSize:"13px"},y:0,x:3},Ta:{labels:{enabled:!1,style:{fontSize:"10px;",color:"#2d96ca"}},mh:0},$a:{Yd:!1,Fd:!0,
Rc:!0,title:{text:null},labels:{style:{fontFamily:"Arial",fontSize:"10px",color:"#979797",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},align:"left",x:5,y:15},Wg:[{value:0,width:1,color:"#808080"}]},lb:{cd:!0,Ra:function(){var a=new Date(this.v.name);a.setHours(a.getHours()+3);var b=Math.floor((new Date-a)/1E3)+" seconds ago",a=D.e.g(a,"hh:nn:ss");return"<div><b>"+b+"</b></div><div>"+a+'</div><div style="margin-top:5px;">Events: '+this.y+"</div>"}},pb:{enabled:!1},
Oc:{enabled:!1},fe:{enabled:!1},j:[{name:"Second-by-second Base data",data:function(){var a=[],b;for(b=-59;0>=b;b++)a.push({y:0});return a}()}],md:{j:{color:a.al,Yg:0.2,Jg:0,borderWidth:0,Na:!1}}});$(d).append('<div class="row"><div class="span3 charttick ">-60 sec</div><div class="span3 charttick ">-45 sec</div><div class="span3 charttick ">-30 sec</div><div class="span3 charttick ">-15 sec</div></div>');return b};D.debug.log("INFO","jarvis.visualisation.realtime.Timeline",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.MetricBox");function Ub(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.S=[];D.f.w.$();D.f.B.$()}
Ub.prototype.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];D.a.r.start();$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.realtime.metricbox");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.realtime.MetricBox",6,"Applying to container ('"+this.id+"')");var d=$(this).d("data-metrics");if(null==d)throw"You must specify a metric for the metricbox";$(this).u(c.Ma(b));
$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)});var e="_"+d+"_"+D.a.r.L+"_Timeline_3_60___0",e=e.replace(/ /g,"").replace(/,/g,"").replace(/\./g,"");c.key=e;if(D.a.r.Dc){D.debug.log("INFO","Subscribing to comet channel (already connected) - "+e,6,"");var h={sd:PokeIn.td(),w:"",B:d,ca:D.a.r.L,t:"Timeline",jc:3,gb:60,la:!0,We:!0,ed:"jarvisResponse_Realtime_Response_MetricBox"};D.l.m(this,"/engine/Realtime.svc/subscribe",
h,f())}else D.debug.log("INFO","Subscribing to comet channel (bind) - "+e,6,""),$(D.r).bind("cometstart",function(){var a={sd:PokeIn.td(),w:"",B:d,ca:D.a.r.L,t:"Timeline",jc:3,gb:60,la:!0,We:!0,ed:"jarvisResponse_Realtime_Response_MetricBox"};D.l.m(this,"/engine/Realtime.svc/subscribe",a,f())});D.a.r.Hd.push({key:e,sender:c,h:b});$(c).bind("newdata",f());window.tz=c.dt;$(D.a.r).bind("backintime",function(a,e){var h=new Date(e);h.setSeconds(59);h.setMilliseconds(999);var g=new Date(h);g.setSeconds(g.getSeconds()-
59);h={ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(h,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:d,ca:D.a.r.L,t:"Timeline",jc:3,gb:30,la:!0,We:!1};D.l.m(c,"/engine/Query.svc/fetch",h,function(a,d){if("500"!=d.Wf){d=$.Y(d.data).va;var e=parseFloat(d.Q[0].k[0]),h=c.Qc;$(b).d("data-useaverage")&&(h=eval($(b).d("data-useaverage")));e=h?D.M.R(e/30,0,!1):D.M.R(e,0,!0);h=$(b).find(".value");h.T({co:100},{duration:100});h.text(e);h.T({eo:100},{duration:200})}})});$(D.r).bind("backtotime",f());c.S.push(b)}}),D.debug.log("INFO",
"jarvis.visualisation.realtime.MetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};$.Rh.step.co=function(a){$(a.Cg).O({textShadow:"0 0 "+Math.floor(a.now)+"px rgb(111,255,111)"})};$.Rh.step.eo=function(a){$(a.Cg).O({textShadow:"0 0 "+Math.floor(a.now)+"px rgb(255,255,255)"})};
Ub.prototype.dt=function(a){var b=null;$(D.a.r.Hd).b(function(c,d){if(d.key==a[0].key){b=d.sender;var e=parseFloat(a[0].value),g=b.Qc;$(d.h).d("data-useaverage")&&(g=eval($(d.h).d("data-useaverage")));e=g?D.M.R(e/30,0,!1):D.M.R(e,0,!0);g=$(d.h).find(".value");g.T({co:100},{duration:100});g.text(e);g.T({eo:100},{duration:200});$(b).I("newdata",e)}})};
Ub.prototype.Ma=function(a){var b=this.fd,c=this.Pc;$(a).d("data-caption")&&(b=$(a).d("data-caption"));$(a).d("data-subcaption")&&(c=$(a).d("data-subcaption"));a=$('<div class="wrapper"></div>');a.append('<div class="row-fluid"><div class="span12 caption">'+b+'</div></div><div class="row-fluid"><div class="span12 value">0</div></div><div class="row-fluid"><div class="span12 subcaption">'+c+"</div></div>");return a};D.debug.log("INFO","jarvis.visualisation.realtime.MetricBox",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.Table");function Vb(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.T=!0;this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.S=[];D.a.r.start();D.f.w.$();D.f.B.$()}
Vb.prototype.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];var e=null,e=b?$(b):$(".jarvis.realtime.table");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.realtime.Table",6,"Applying to container ('"+this.id+"')");var d=5;try{d=parseInt($(this).d("data-limit")),isNaN(d)&&(d=5)}catch(e){d=5}var h=60;try{h=parseInt($(this).d("data-period")),isNaN(h)&&(h=60)}catch(m){h=60}var p=
$(this).d("data-animate");p&&(c.T=eval(p));var s=$(this).d("data-dimensions");if(null==s)throw"You must specify a dimensions for the table";var q=$(this).d("data-metrics");if(null==q)throw"You must specify a metric for the table";$(this).u(c.Ma(b));$(this).find(".settings").D("click");$(this).find(".settings").s("click",function(){D.a.r.Ja.gc({Z:D.a.r.Ja,h:D.a.r.Ja.h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})});$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",
function(){$(this).I("clicked",$(this).data().data)});p=s+"_"+q+"_"+D.a.r.L+"_Timeline_3_"+h+"_DESC_"+q+"_"+d;p=p.replace(/ /g,"").replace(/,/g,"").replace(/\./g,"");c.key=p;if(D.a.r.Dc){D.debug.log("INFO","Subscribing to comet channel (already connected) - "+p,6,"");var u={sd:PokeIn.td(),w:s,B:q,ca:D.a.r.L,t:"Timeline",jc:3,gb:h,la:!0,ed:"jarvisResponse_Realtime_Response_Table",Kd:d,Ld:"DESC",Md:q};D.l.m(this,"/engine/Realtime.svc/subscribe",u,f())}else D.debug.log("INFO","Subscribing to comet channel (bind) - "+
p,6,""),$(D.a.r).bind("cometstart",function(){var a={sd:PokeIn.td(),w:s,B:q,ca:D.a.r.L,t:"Timeline",jc:3,gb:h,la:!0,ed:"jarvisResponse_Realtime_Response_Table",Kd:d,Ld:"DESC",Md:q};D.l.m(this,"/engine/Realtime.svc/subscribe",a,f())});D.a.r.Hd.push({key:p,sender:c,h:$(b)});$(c).bind("newdata",f());window.uz=c.et;$(D.r).bind("backintime",function(a,e){c.Ze(c,e,b,s,q,d)});$(D.r).bind("backtotime",f());c.S.push(b)}}),D.debug.log("INFO","jarvis.visualisation.realtime.Table",5,"...init ("+((new Date).getMilliseconds()-
d)+"ms)"))};
Vb.prototype.Ze=function(a,b,c,d,e,g){b=new Date(b);b.setSeconds(59);b.setMilliseconds(999);var k=new Date(b);k.setSeconds(k.getSeconds()-59);d={ta:D.e.g(k,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:d,B:"Bet Count",t:"Timeline",la:!0,ca:D.a.r.L,We:!1,Kd:g,Ld:"DESC",Md:e};D.l.m(a,"/engine/Query.svc/fetch",d,function(b,d){if("500"!=d.Wf){d=$.Y(d.data).va;var e=$(c).find(".table");if(0<d.Q.length)e.find("tr.empty").remove();else if(0==d.Q.length&&0<e.find("tr.empty").length){e.append('<tr class="empty"><td colspan="4">There is no data for this view.</td></tr>');return}try{if(e.find("tr").length-
1>d.Q.length)for(var g=e.find("tr").length;g>d.Q.length;g--)e.find("tr")[g].remove()}catch(k){}$(d.Q).b(function(b,c){if(e.find("tr").length-1>b){var d=$(e.find("tr")[b+1]);if(d.find(".dimension").text()==c.o[0]){if(d.find(".metric").text()!=c.o[1]){if(0==b%2)try{a.T&&d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow")}catch(g){}else try{a.T&&d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},"slow")}catch(k){}d.find(".metric").text(c.o[1])}}else{if(0==
b%2)try{a.T&&d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow")}catch(m){}else try{a.T&&d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},"slow")}catch(l){}d.find(".dimension").text(c.o[0]);d.find(".metric").text(c.o[1])}}else e.append('<tr><td class="index">'+(b+1)+'.</td><td class="dimension">'+c.o[0]+'</td><td colspan="2" class="metric">'+c.o[1]+"</td></tr>")});e.find("tr").b(function(a){$(this).find(".index").text(a+
".")})}})};
Vb.prototype.et=function(a){var b=null;try{$(D.a.r.Hd).b(function(c,e){if(e.key==a[0].key){b=e.sender;var g=$($(e.h).find(".table"));if(0<a.length)g.find("tr.empty").remove();else if(0==a.length&&0<g.find("tr.empty").length){g.append('<tr class="empty"><td colspan="4">There is no data for this view.</td></tr>');return}try{if(g.find("tr").length>a.length)for(var k=g.find("tr").length;k<a.length;k--)g.find("tr")[k].remove()}catch(l){}$(a).b(function(a,c){if(g.find("tr").length-1>a){var d=$(g.find("tr")[a+
1]);if(d.find(".dimension").text()==c.Ie){if(d.find(".metric").text()!=c.Tj){try{b.T&&(0==a%2?d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow"):d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},"slow"))}catch(e){}d.find(".metric").text(c.Tj)}}else{try{b.T&&(0==a%2?d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow"):d.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},
"slow"))}catch(k){}d.find(".dimension").text(c.Ie);d.find(".metric").text(c.Tj)}}else g.append('<tr><td class="index">'+(a+1)+'.</td><td class="dimension">'+c.Ie+'</td><td colspan="2" class="metric">'+c.Tj+"</td></tr>")});g.find(".dimension").b(function(){$(this).D("click");$(this).s("click",function(){var a=$($(this).cc(".jarvis.realtime.table")).d("data-dimensions"),b=$(this).text(),a=a+"="+b+"[AND]";-1==D.a.r.L.indexOf(a)&&-1==D.a.r.vd.indexOf(a)&&(D.a.r.vd+=a,D.a.r.ti())})});g.find("tr").b(function(a){$(this).find(".index").text(a+
".")})}})}catch(c){throw console.log(c.message),console.log(c.stack),c;}};$.Rh.step.Vz=function(a){$(a.Cg).O({backgroundColor:"rgb(215,222,186)"})};$.Rh.step.Wz=function(a){$(a.Cg).O({backgroundColor:"inherit"})};
Vb.prototype.Ma=function(a){var b="TITLE",c="DIMENSION",d=this.Pc;$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&(c=$(a).d("data-dimensions"));$(a).d("data-metrics")&&(d=$(a).d("data-metrics"));a=$('<div class="wrapper"></div>');a.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><table class="table table-bordered table-striped"><thead><tr><th colspan=2>'+c+'</th><th class="metric" colspan=2>'+d+'</th></tr></thead><tbody><tr class="empty"><td colspan="4">There is no data for this view.</td></tr></tbody></table></div>');
$();return a};D.debug.log("INFO","jarvis.visualisation.realtime.Table",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.Geo");function Wb(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.S=[];D.a.r.start();D.f.w.$();D.f.B.$()}
Wb.prototype.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.mode="map";this.S=this.S||[];var e=null,e=b?$(b):$(".jarvis.realtime.geo");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.realtime.Geo",6,"Applying to container ('"+this.id+"')");var d=5;try{d=parseInt($(this).d("data-limit")),isNaN(d)&&(d=5)}catch(e){d=5}var h=60;try{h=parseInt($(this).d("data-period")),isNaN(h)&&(h=60)}catch(m){h=
60}var p=$(this).d("data-dimensions");if(null==p)throw"You must specify a dimensions for the table";var s=$(this).d("data-metrics");if(null==s)throw"You must specify a metric for the table";$(this).u(c.Ma(b));var q=$(this);if("map"==c.mode)google.load("visualization","1.0",{packages:["corechart","geochart"]}),google.WA(function(){var a=[];a.push(["Latitude","Longitude","Caption","Event Count"]);a.push([0,0,"Name",0]);var b=$(q.find(".innercontainer")).get(0);c.Ym=new google.ue.ew(b);c.Vj=google.ue.Gq(a);
c.Ym.Oa(c.Vj,{or:"markers",Tq:{oa:["#1a87d5"]}})});else try{google.tr.Jx($(b).find(".innercontainer").get(0),function(a){Xb=a;Xb.Ly().ZA(!0);Xb.Vr().vr(Xb.lw,!0);Xb.Vr().vr(Xb.mw,!0);for(a=Xb.Qr();a.Xj();)a.removeChild(a.Xj());try{var b=Xb.bk().Wq(Xb.Lp);b.XA(b.Iy()/3);b.Ro(0);b.So(0);Xb.bk().Hu(b)}catch(c){}google.tr.addEventListener(Xb.Dy(),"click",function(a){a.Ay()})},function(a){throw a;})}catch(u){throw u;}$(this).find(".settings").D("click");$(this).find(".settings").s("click",function(){D.a.r.Ja.gc({Z:D.a.r.Ja,
h:D.a.r.Ja.h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})});$(this).find(".globe").D("click");$(this).find(".globe").s("click",function(){$(b).find(".container").empty();c.mode="map"==c.mode?"globe":"map"});$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)});var v=p+"_"+s+"_"+D.a.r.L+"_Timeline_3_"+h+"_DESC_"+s+"_"+d,v=v.replace(/ /g,"").replace(/,/g,"").replace(/\./g,"");c.key=v;if(D.a.r.Dc){D.debug.log("INFO",
"Subscribing to comet channel (already connected) - "+v,6,"JS source loaded");var r={sd:PokeIn.td(),w:p,B:s,ca:D.a.r.L,t:"Timeline",jc:3,gb:h,la:!0,ed:"jarvisResponse_Realtime_Response_Geo",Kd:d,Ld:"DESC",Md:s};D.l.m(this,"/engine/Realtime.svc/subscribe",r,f())}else D.debug.log("INFO","Subscribing to comet channel (bind) - "+v,6,"JS source loaded"),$(D.r).bind("cometstart",function(){var a={sd:PokeIn.td(),w:p,B:s,ca:D.a.r.L,t:"Timeline",jc:3,gb:h,la:!0,ed:"jarvisResponse_Realtime_Response_Geo",Kd:d,
Ld:"DESC",Md:s};D.l.m(this,"/engine/Realtime.svc/subscribe",a,f())});D.a.r.Hd.push({key:v,sender:c,h:b});$(c).bind("newdata",f());window.Fn=c.Fn;$(D.r).bind("backintime",function(a,e){c.Ze(c,e,b,p,s,d)});$(D.r).bind("backtotime",f());c.S.push(b)}}),D.debug.log("INFO","jarvis.visualisation.realtime.Geo",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
Wb.prototype.Ze=function(a,b,c,d,e,g){b=new Date(b);b.setSeconds(59);b.setMilliseconds(999);var k=new Date(b);k.setSeconds(k.getSeconds()-59);d={ta:D.e.g(k,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(b,"yyyy-mm-dd hh:nn:ss.999"),w:d,B:"Event Count",t:"Timeline",la:!0,ca:D.a.r.L,We:!1,Kd:g,Ld:"DESC",Md:e};D.l.m(a,"/engine/Query.svc/fetch",d,function(a,b){if("500"!=b.Wf){b=$.Y(b.data).va;var d=$(c).find(".table");if(0<b.Q.length)d.find("tr.empty").remove();else if(0==b.Q.length&&0<d.find("tr.empty").length){d.append('<tr class="empty"><td colspan="4">There is no data for this view.</td></tr>');
return}try{if(d.find("tr").length-1>b.Q.length)for(var e=d.find("tr").length;e>b.Q.length;e--)d.find("tr")[e].remove()}catch(g){}$(b.Q).b(function(a,b){if(d.find("tr").length-1>a){var c=$(d.find("tr")[a+1]);if(c.find(".dimension").text()==b.o[0]){if(c.find(".metric").text()!=b.o[1]){if(0==a%2)try{c.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow")}catch(e){}else try{c.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},
"slow")}catch(g){}c.find(".metric").text(b.o[1])}}else{if(0==a%2)try{c.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"white"},"slow")}catch(k){}else try{c.children().T({backgroundColor:"#E6E8DC"},{duration:1E3}).T({backgroundColor:"#f5f5f5"},"slow")}catch(m){}c.find(".dimension").text(b.o[0]);c.find(".metric").text(b.o[1])}}else d.append('<tr><td class="index">'+(a+1)+'.</td><td class="dimension">'+b.o[0]+'</td><td colspan="2" class="metric">'+b.o[1]+"</td></tr>")});
d.find("tr").b(function(a){$(this).find(".index").text(a+".")})}})};
Wb.prototype.Fn=function(a){var b=null;$(D.a.r.Hd).b(function(c,d){if(d.key==a[0].key){b=d.sender;var e=[];"map"==b.mode&&e.push(["Latitude","Longitude","Caption","Event Count"]);$(a).b(function(a,b){if("(not set)"!=b.Ie){b.Ie.split(",");var c=parseFloat(b.Ie.split(",")[1]),d=parseFloat(b.Ie.split(",")[2]),h=b.Ie.split(",")[3];e.push([c,d,h,b.value])}});$($(d.h).find(".innercontainer")).get(0);if("map"==b.mode)b.Vj=google.ue.Gq(e),b.Ym.Oa(b.Vj,{or:"markers",Tq:{oa:["#1a87d5"]}});else{for(var g=Xb.Qr();g.Xj();)g.removeChild(g.Xj());
var k=0,l=0;$(e).b(function(a,b){try{var c=Xb.Kx("");c.VA(b[2]+"<br/>Event Count: "+b[3]);var d=Xb.Ix("");d.SA("http://maps.google.com/mapfiles/kml/paddle/red-circle.png");var e=Xb.Nx("");e.Sr().TA(d);e.Sr().Bi(3);c.YA(e);var h=Xb.Lx(b[2]);h.Ro(b[0]);h.So(b[1]);c.RA(h);g.appendChild(c);k=b[0];l=b[1]}catch(n){throw n;}});if(0<e.length)try{var n=Xb.bk().Wq(Xb.Lp);n.Ro(l);n.So(k);Xb.bk().Hu(n)}catch(h){}}$table.find(".dimension").b(function(){$(this).D("click");$(this).s("click",function(){var a=$($(this).cc(".jarvis.realtime.table")).d("data-dimensions"),
b=$(this).text(),a=a+"="+b+"[AND]";-1==D.a.r.L.indexOf(a)&&-1==D.a.r.vd.indexOf(a)&&(D.a.r.vd+=a,D.a.r.ti())})});$table.find("tr").b(function(a){$(this).find(".index").text(a+".")});$(b).I("newdata",value)}})};
Wb.prototype.Ma=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");a=$('<div class="wrapper"></div>');a.append('<div class="row-fluid"><div class="header"><div class="move"></div><div class="globe"></div><h3>'+b+'</h3></div><div class="innercontainer" style="height:400px;"></div></div>');$();return a};var Xb;D.debug.log("INFO","jarvis.visualisation.realtime.Geo",6,"JS source loaded");D.ba("jarvis.visualisation.realtime.Panel");
D.a.r.ud=function(a){D.Nu(this);var b=this;this.Z=this;this.options=a;try{this.ga=a.ga}catch(c){try{this.ga=D.l.af[0].ma}catch(d){this.ga=-1}}this.S=[];var e=null,e=$(".jarvis.realtime.widgets");0<e.length&&(D.debug.log("INFO","jarvis.visualisation.realtime.Panel",6,"Building Initial Panel ('"+this.id+"')"),a=$("body").find(".panel-edit"),a.D("click"),a.s("click",function(){b.Di({h:e,hb:!1,Z:b})}),a=$("body").find(".widget-add"),a.D("click"),a.s("click",function(){b.gc({h:e,hb:!0,Z:b})}));a=$("body").find(".widget-add");
a.show();$(D).Fa("realtimepanelchange");$(D).bind("realtimepanelchange",function(a,c){b.ga=c;e=$(".jarvis.realtime.widgets");var d=$("body").find(".panel-edit");d.D("click");d.s("click",function(){b.Di({h:e,hb:!1,Z:b})});d=$("body").find(".widget-add");d.D("click");d.s("click",function(){b.gc({h:e,hb:!0,Z:b})});b.Uc();b.C(b,e,!0,!0,!1);b.Je(b,$(".jarvis.realtime.widgets"),!0,!0);D.state.view="realtime";D.state.ga=b.ga;D.bh("Realtime Panel Click")});this.h=e;D.a.r.Ja=this;D.a.r.start();D.f.Lc.$();
D.f.w.$();D.f.B.$()};A=D.a.r.ud.prototype;
A.C=function(a,b,c,d,e){D.debug.log("INFO","jarvis.visualisation.realtime.Panel",6,"Building panel for ID ('"+this.ga+"')");var g=this;try{-1<a.ga?this.ga=a.ga:-1==this.ga&&(this.ga=a.ga)}catch(k){-1==this.ga&&(this.ga=D.f.Lc[0].ma)}g.Uc();D.a.r.start();if("undefined"==typeof e||!0==e)D.state.view="realtime",D.state.ga=g.ga,D.bh("Realtime Panel Init");try{-1==this.ga&&(this.ga=a.ga)}catch(l){this.ga=D.f.Lc[0].ma}g.Ja=g.get(g,g.ga);this.Ja&&(d||(D.a.r.kd=g.Ja.Gw,D.a.r.ti()),c=null,c=b?$(b):$(".jarvis.realtime.widgets"),
0!=c.length&&$(c).b(function(b,c){null==a&&(a={});a.ga=g.ga;a.h=c;a.Z=g;g.bd(a);g.Je(g,c,!0);$(D.r).Fa("filterchange");$(D.r).bind("filterchange",function(){D.debug.log("INFO","Realtime.Visualisation.RealtimePanel",6,"Applying Filter");$(D.a.r.Hd).b(function(){D.debug.log("INFO","Realtime.Visualisation.RealtimePanel",6,"Unsubscribing '"+g.key+"'");var a={sd:PokeIn.td(),key:this.key};D.l.m(this,"/engine/Realtime.svc/unsubscribe",a,f())});D.a.r.Hd=[];g.C(g,c,!0,!0)});D.debug.log("INFO","jarvis.visualisation.realtime.Panel",
6,"Applying to container ('"+this.id+"')")}))};A.Uc=f();
A.Je=function(a,b,c){a=a.Ja.nq;var d="";$(b).empty();d='<div class="jarvis realtime row-top row fluid-row">&nbsp;</div>';d+='<div class="row fluid-row"><div class="jarvis realtime column-left span4 columns ">&nbsp;</div><div class="jarvis realtime column-right span8 columns">&nbsp;</div></div>';$(b).append(d);$(".jarvis.realtime.column-left, .jarvis.realtime.column-right").gl({Jj:".columns",handle:".header .move",placeholder:{element:function(a){return $('<div class="droptarget">'+$(a).d("data-title")+
"</div>")[0]},update:f()},update:function(){var a=1,a=-1<$(this).d("class").indexOf("left")?1:2;$(this).children().b(function(b){var c=$(this).d("data-widgetid");D.l.m(this,"/engine/RealtimePanels.svc/UpdateWidgetPosition",{ma:c,Ib:a,ae:b+1},function(a,b){$.Y(b.data)})})},stop:f()}).Pj();$(a).b(function(a,c){D.debug.log("INFO","jarvis.visualisation.realtime.Panel",6,"Drawing widget ('"+c.c+"')");switch(c.lf){case "Realtime Timeline":d='<div class="span3 columns maincounter"><div id="metricbox" class="jarvis realtime metricbox" data-metrics="'+
c.Jb.c+'"></div></div><div class="span9 columns"><div id="timeline" class="jarvis realtime timeline" data-metrics="'+c.Jb.c+'"></div></div>';$(b).find(".row-top").append(d);break;case "Realtime Table":1==c.Ib?(d='<div class="jarvis realtime table" data-widgetid="'+c.ma+'" data-title="'+c.c+'" data-dimensions="'+c.Bb.c+'" data-metrics="'+c.Jb.c+'" data-period="'+c.gb+'" data-limit="'+c.wa+'"></div>',$(b).find(".column-left").append(d)):(d='<div  class="jarvis realtime table" data-widgetid="'+c.ma+
'" data-title="'+c.c+'" data-dimensions="'+c.Bb.c+'" data-metrics="'+c.Jb.c+'" data-period="'+c.gb+'" data-limit="'+c.wa+'"></div>',$(b).find(".column-right").append(d));break;case "Realtime GeoChart":1==c.Ib?(d='<div class="jarvis realtime geo" data-widgetid="'+c.ma+'" data-title="'+c.c+'" data-dimensions="'+c.Bb.c+'" data-metrics="'+c.Jb.c+'" data-period="'+c.gb+'" data-limit="'+c.wa+'"></div>',$(b).find(".column-left").append(d)):(d='<div  class="jarvis realtime geo" data-widgetid="'+c.ma+'" data-title="'+
c.c+'" data-dimensions="'+c.Bb.c+'" data-metrics="'+c.Jb.c+'" data-period="'+c.gb+'" data-limit="'+c.wa+'"></div>',$(b).find(".column-right").append(d))}});!0==c&&((new Ub).C(),(new Tb).C(),(new Vb).C())};A.get=function(a,b){if(-1!=b){var c=D.f.Lc[0];a.ga=c.ma;return c}};A.bd=function(a){$(a.h);a=a.Z.Ja;$("body").find(".jarvis.caption").text(a.c);$("body").find(".jarvis.description").text(a.Zd);$("body").d("class")?$("body").d("class").indexOf(a.c)||$("body").p(a.c):$("body").p(a.c)};
A.Di=function(a){var b=a.Z;$(a.h);var c=a.hb,d;d='<div class="panel-modal modal" style="left:50%;">';d+='<div class="modal-header">';d+='<button type="button" class="close" data-dismiss="modal">\u00d7</button>';if(!0==a.hb)d+="<h3>Add a new Realtime Panel</h3>",d+="</div>",d+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">',d+='<form class="form-horizontal">',d+="<fieldset>",d+='<div class="control-group"><label class="control-label" for="panel-edit-name">Name</label><div class="controls"><input type="text" class="input-xlarge" id="panel-edit-name" placeholder="Enter a name for the new Realtime Panel"></div></div>',
d+='<div class="control-group"><label class="control-label" for="panel-edit-description">Description</label><div class="controls"><textarea class="input-xlarge" id="panel-edit-description" rows="3" placeholder="Describe the new Realtime Panel with a few words."></textarea></div></div>',d+='<div class="row-fluid"><div class="span6"><label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios1" value="fiftyfifty" checked="true"><h6>Two column layout</h6></label><div class="mini-layout fluid"><div class="mini-layout-header"></div><div class="mini-layout-column-fiftyfifty"></div><div class="mini-layout-column-fiftyfifty"></div></div></div><div class="span6"><label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios2" value="wideleft"><h6>Wide left column layout</h6></label><div class="mini-layout fluid"><div class="mini-layout-header"></div><div class="mini-layout-body" style="margin-right: 2.5%;margin-left:0;"></div><div class="mini-layout-sidebar"></div></div></div></div>',
d+="</fieldset>",d+="</form>",d+="</div>",d+='<div class="modal-footer">';else{var e=b.Ja;d+="<h3>Customize Realtime Panel</h3>";d+="</div>";d+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">';d+='<form class="form-horizontal">';d+="<fieldset>";d+='<div class="control-group"><label class="control-label" for="panel-edit-name">Name</label><div class="controls"><input type="text" class="input-xlarge" id="panel-edit-name" value="'+e.c+'"></div></div>';d+='<div class="control-group"><label class="control-label" for="panel-edit-description">Description</label><div class="controls"><textarea class="input-xlarge" id="panel-edit-description" rows="3">'+
e.Zd+"</textarea></div></div>";d+='<div class="row-fluid"><div class="span6"><label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios1" value="fiftyfifty" checked="true"><h6>Two column layout</h6></label><div class="mini-layout fluid"><div class="mini-layout-header"></div><div class="mini-layout-column-fiftyfifty"></div><div class="mini-layout-column-fiftyfifty"></div></div></div><div class="span6"><label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios2" value="wideleft"><h6>Wide left column layout</h6></label><div class="mini-layout fluid"><div class="mini-layout-header"></div><div class="mini-layout-body" style="margin-right: 2.5%;margin-left:0;"></div><div class="mini-layout-sidebar"></div></div></div></div>';
d+="</fieldset>";d+="</form>";d+="</div>";d+='<div class="modal-footer">';d+='<a class="panel-edit-delete" style="float:left;margin-top:5px;">Delete</a>'}d+='<a class="btn" data-dismiss="modal">Close</a>';d+='<a class="btn btn-primary panel-edit-save">Save changes</a>';d+="</div>";d+="</div>";var g=$(d);$("body").append(g);g.fc();g.find(".panel-edit-delete").D("click");g.find(".panel-edit-delete").s("click",function(){D.l.m(this,"/engine/RealtimePanels.svc/Delete",{ma:b.ga},function(a,c){$.Y(c.data);
D.l.ot(!0);b.ga=-1;b.C(null,null,!0);g.fc("hide")})});g.find(".panel-edit-save").D("click");g.find(".panel-edit-save").s("click",function(){var d="",e="",d=g.find("#panel-edit-name").U(),e=g.find("#panel-edit-description").U(),n=-1;c||(n=b.ga);D.l.m(this,"/engine/RealtimePanels.svc/Update",{ma:n,c:d,Zd:e},function(c,d){d=$.Y(d.data);var e=$(".jarvis.realtime.widgets");a={};b.ga=d;b.C(null,e,!0);D.l.ot(!0);g.fc("hide")})});g.s("hidden",function(){g.remove()})};
A.gc=function(a){var b=a.Z;$(a.h);var c=-1,d=-1,e=-1,g="",g=g+"",g=g+'<div class="widget-modal modal" style="left:50%;">',g=g+'<div class="modal-header">',g=g+'<button type="button" class="close" data-dismiss="modal">\u00d7</button>';if(!0==a.hb){var g=g+"<h3>Add a new Widget</h3>",g=g+"</div>",g=g+'<div class="modal-body" style="padding:30px;padding-bottom: 0;">',g=g+'<form class="form-horizontal">',g=g+"<fieldset>",g=g+'<div class="control-group"><label class="control-label" for="widget-edit-name">Caption</label><div class="controls"><input type="text" class="input-xlarge" id="widget-edit-name" placeholder="Enter a caption for the new Widget"></div></div>',
g=g+'<div class="control-group"><label class="control-label" for="widget-edit-type">Type</label><div class="controls"><select id="widget-edit-type"><option value=1>Table</option>\x3c!--<option value=2>GeoMap</option>--\x3e</select></div></div>',g=g+"<hr >",g=g+'<div class="control-group"><label class="control-label" for="widget-edit-interval">Dimension</label><div class="controls"><select id="widget-edit-dimension">',k=D.l.A;$(k).b(function(a,b){g+='<option value="'+b.Nb+'">'+b.c+"</option>"});g+=
"</select></div></div>";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Metric</label><div class="controls"><select id="widget-edit-metric">';k=D.l.q;$(k).b(function(a,b){g+='<option value="'+b.Nb+'">'+b.c+"</option>"});g+="</select></div></div>";g+="<hr >";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Show a Table with</label><div class="controls"><select id="widget-edit-limit"><option value=3>3 rows</option><option value=5>5 rows</option><option value=10>10 rows</option><option value=20>20 rows</option></select></div></div>';
g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Interval</label><div class="controls"><select id="widget-edit-interval"><option value=1>1 sec</option><option value=3 selected>3 sec</option><option value=5>5 sec</option><option value=10>10 sec</option><option value=30>30 sec</option><option value=60>60 sec</option></select><p class="help-block">The number of seconds between each Refresh.</p></div></div>';g+='<div class="control-group"><label class="control-label" for="widget-edit-period">Period</label><div class="controls"><select id="widget-edit-period"><option value=1>1 sec</option><option value=3 selected>3 sec</option><option value=5>5 sec</option><option value=10>10 sec</option><option value=30>30 sec</option><option value=60>60 sec</option></select><p class="help-block">The time Period to be queried every Interval.</p></div></div>';
g+="</fieldset>";g+="</form>";g+="</div>";g+='<div class="modal-footer">'}else{var c=a.Jc,l=D.l.es(c);try{d=l.Ib,e=l.ae}catch(n){e=d=-1}g+="<h3>Widget Settings</h3>";g+="</div>";g+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">';g+='<form class="form-horizontal">';g+="<fieldset>";g+='<div class="control-group"><label class="control-label" for="widget-edit-name">Caption</label><div class="controls"><input type="text" class="input-xlarge" id="widget-edit-name" placeholder="Enter a caption for the new Widget" value="'+
l.c+'"></div></div>';g+='<div class="control-group"><label class="control-label" for="widget-edit-type">Type</label><div class="controls"><select id="widget-edit-type"><option value=1>Table</option></select></div></div>';g+="<hr >";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Dimension</label><div class="controls"><select id="widget-edit-dimension">';k=D.l.A;$(k).b(function(a,b){g+='<option value="'+b.Nb+'" '+(b.Nb==l.Bb.Nb?"selected":"")+">"+b.c+"</option>"});
g+="</select></div></div>";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Metric</label><div class="controls"><select id="widget-edit-metric">';k=D.l.q;$(k).b(function(a,b){g+='<option value="'+b.Nb+'" '+(b.Nb==l.Jb.Nb?"selected":"")+">"+b.c+"</option>"});g+="</select></div></div>";g+="<hr >";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Show a Table with</label><div class="controls"><select id="widget-edit-limit"><option value="3" '+
(3==l.wa?"selected":"")+'>3 rows</option><option value="5" '+(5==l.wa?"selected":"")+'>5 rows</option><option value="10" '+(10==l.wa?"selected":"")+'>10 rows</option><option value="20" '+(20==l.wa?"selected":"")+">20 rows</option></select></div></div>";g+='<div class="control-group"><label class="control-label" for="widget-edit-interval">Interval</label><div class="controls"><select id="widget-edit-interval"><option value="1" '+(1==l.jc?"selected":"")+'>1 sec</option><option value="3" '+(3==l.jc?
"selected":"")+'>3 sec</option><option value="5" '+(5==l.jc?"selected":"")+'>5 sec</option><option value="10" '+(10==l.jc?"selected":"")+'>10 sec</option><option value="30" '+(30==l.jc?"selected":"")+'>30 sec</option><option value="60" '+(60==l.jc?"selected":"")+'>60 sec</option></select><p class="help-block">The number of seconds between each Refresh.</p></div></div>';g+='<div class="control-group"><label class="control-label" for="widget-edit-period">Period</label><div class="controls"><select id="widget-edit-period"><option value="1" '+
(1==l.gb?"selected":"")+'>1 sec</option><option value="3" '+(3==l.gb?"selected":"")+'>3 sec</option><option value="5" '+(5==l.gb?"selected":"")+'>5 sec</option><option value="10" '+(10==l.gb?"selected":"")+'>10 sec</option><option value="30" '+(30==l.gb?"selected":"")+'>30 sec</option><option value="60" '+(60==l.gb?"selected":"")+'>60 sec</option></select><p class="help-block">The time Period to be queried every Interval.</p></div></div>';g+="</fieldset>";g+="</form>";g+="</div>";g+='<div class="modal-footer">';
g+='<a class="widget-edit-delete" style="float:left;margin-top:5px;">Delete</a>'}var g=g+'<a class="btn" data-dismiss="modal">Close</a>',g=g+'<a class="btn btn-primary widget-edit-save">Save changes</a>',g=g+"</div>",g=g+"</div>",h=$(g);$("body").append(h);h.fc();h.find(".widget-edit-delete").D("click");h.find(".widget-edit-delete").s("click",function(){D.l.m(this,"/engine/RealtimePanels.svc/DeleteWidget",{ma:c},function(b,c){$.Y(c.data);$(a.pc).remove();h.fc("hide")})});h.find(".widget-edit-save").D("click");
h.find(".widget-edit-save").s("click",function(){var k="",l=1,n="",q="",u="",v="",r=3,z=3,w=5,k=h.find("#widget-edit-name").U(),l=h.find("#widget-edit-type").U(),n=h.find("#widget-edit-dimension").U(),q=h.find("#widget-edit-dimension option:selected").text(),u=h.find("#widget-edit-metric").U(),v=h.find("#widget-edit-metric option:selected").text(),r=h.find("#widget-edit-interval").U(),z=h.find("#widget-edit-period").U(),w=h.find("#widget-edit-limit").U();D.l.m(this,"/engine/RealtimePanels.svc/UpdateWidget",
{ga:b.ga,ma:c,c:k,lf:l,Bb:n,dq:u,jc:r,gb:z,Kd:w,Ib:d,ae:e},function(b,c){c=$.Y(c.data);if(a.hb){g='<div class="jarvis realtime table" data-widgetid="'+c+'" data-title="'+k+'" data-dimensions="'+q+'" data-metrics="'+v+'"data-period="'+z+'" data-limit="'+w+'"></div>';g=$(g);$(".jarvis.realtime.panel").find(".column-left").Zg(g);var d=new Vb;d.C(null,g);D.a.r.paused&&d.Ze(d,D.a.r.Xe,g,q,v,w)}else b=a.sender,d=a.pc,$(d).d("data-title",k),$(d).d("data-dimensions",q),$(d).d("data-metrics",v),$(d).d("data-period",
z),$(d).d("data-limit",w),b.C(null,d),D.a.r.paused&&b.Ze(b,D.a.r.Xe,d,q,v,w);h.fc("hide")})});h.s("hidden",function(){h.remove()})};D.debug.log("INFO","Realtime.Visualisation.RealtimePanel",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard");D.a.ja.kd="";D.a.ja.L="";D.a.ja.filters=[];D.a.ja.C=function(){D.debug.log("INFO","Dashboard",5,"...dashboard init ("+((new Date).getMilliseconds()-(new Date).getMilliseconds())+"ms)")};
D.a.ja.Ed=function(a){D.a.ja.L="";D.a.ja.filters=[];a&&""!=a&&$(a.split("[AND]")).b(function(a,b){var e=b.split("=")[0],g=b.split("=")[1];e&&D.a.ja.filters.push({caption:e,value:g})});$(D.a.ja.kd.split("[AND]")).b(function(a,b){var e=b.split("=")[0],g=b.split("=")[1];e&&D.a.ja.filters.push({caption:e,value:g})});D.a.ja.L=D.a.ja.kd+(a?a:"");$(D.a.ja).I("filter");var b=$(".jarvis.dashboard.panel").find(".filtersWrapper");b&&(b.empty(),0==D.a.ja.filters.length?b.P():($(D.a.ja.filters).b(function(a,d){var e;
e=""+('<div class="filterWrapper"><div class="filterContainer"><span class="caption">'+d.caption+':</span><span class="value">'+d.value+'</span><button type="button" class="close">\u00d7</button></div></div>');e=$(e);var g=$(e.find(".close"));g.D("click");g.s("click",function(){D.a.ja.kd=D.a.ja.kd.replace(d.caption+"="+d.value+"[AND]","");D.a.ja.Ed()});b.append(e)}),b.show()))};D.a.ja.lg=function(a){$(D.a.ja).I("addpartialfilter",a)};D.a.ja.nd=function(a){$(D.a.ja).I("removepartialfilter",a)};
D.debug.log("INFO","Jarvis.Visualisation.Dashboard",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.Timeline");function kc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.wa=10;this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}A=kc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=$.extend({height:235},a);this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.dashboard.timeline");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.Timeline",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-height");d&&(c.options.height=d);if(d=$(b).d("data-limit"))c.wa=
d;var e=$(b).d("data-metrics");e&&(e=e.split(","),$(e).b(function(a){e[a]=$.trim(e[a]);c.q.push(e[a])}),$(D.l.q).b(function(a,b){-1<e.indexOf(b.c)&&(c.q[e.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,
Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","Jarvis.Visualisation.Dashboard.Timeline",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){a||(a=D.ja.a.fq);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-metrics"),n=l;if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.l.q).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.l.q[d];c.q.push(l[a])});$(D.l.q).b(function(a,b){-1<l.indexOf(b.c)&&(c.q[l.indexOf(b.c)]=b)});if(!l)return"";var h=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),
w:"",B:n,t:c.t,la:!1,ca:D.a.ja.L,Gc:l[l.length-1].c,za:"DESC"};h.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:n,t:c.t,la:!1,ca:D.a.ja.L,Gc:l[l.length-1].c,za:"DESC"},h.push(d));D.l.vc(c,h,function(a,d){var e=[];$(d).b(function(a,b){try{var c=b.data.va;if(2==c.na.length)b.data.va.id=b.id,e.push(b.data.va);else{var d={};jQuery.extend(!0,d,c);d.na.splice(2,1);d.id=b.id;$(d.Q).b(function(a){d.Q[a].o.splice(2,1);d.Q[a].k.splice(2,
1)});e.push(d);d={};jQuery.extend(!0,d,c);d.na.splice(1,1);d.id=b.id;$(d.Q).b(function(a){d.Q[a].o.splice(1,1);d.Q[a].k.splice(1,1)});e.push(d)}}catch(h){}});lc(e);c.update(a,l,e,b)})};function lc(a){var b=[];$(a).b(function(a,d){$(d.na).b(function(a,c){"Date"==c&&b.push(a)});if(0==b.length)return d;$(d.Q).b(function(a,c){var d=c.k[b[0]],d=D.e.J(d);c.k[b[0]]=d;c.o[b[0]]=d})})}
A.update=function(a,b,c,d){if(c[0]){var e=$(d);if(b=$(d).d("data-limit"))a.wa=b;d=$($(d).find(".chart"));var g=c[0].na,k=c[0].Q;$(k).b(f());var l=new Highcharts.fb({F:{height:a.options.height,marginTop:0,marginLeft:-15,marginRight:-20,marginBottom:50,Xc:0,Zc:15,Yc:0,Wc:0,Tb:d.get(0),ab:!1,type:"area",Eb:{load:f(),Pa:function(){e.find(".jarvis.legend").empty();$(l.j).b(function(a,b){var c="",d="",c=b.name,d='<span style="border: 5px solid white; border-color: '+b.color+'; border-radius: 5px;height: 0px; display: inline-block; width: 0px;margin-left:10px;"></span>&nbsp;',
d=d+('<span class="jarvis legendseries" data-id="0">'+c+"</span>");e.find(".jarvis.legend").append(d)})},selection:f()}},title:{text:null},Ta:{type:"datetime",Ag:{Jh:"%e %b"},labels:{Ra:function(){var a=new Date(this.value),b="";return b=0!=a.getHours()+a.getTimezoneOffset()/60?D.e.g(a,"mmm dd hh:nn"):D.e.g(a,"mmm dd")},fontFamily:"Signika",enabled:!0,style:{fontSize:"11px;",color:"#999"},y:30},mh:0,Hi:!1,Rc:!1,Yd:!1,Fd:!1},$a:[{Ig:"#efefef",min:0,Yd:!1,Fd:!0,Rc:!0,title:{text:null},labels:{Ra:function(){var a=
"";try{a=c[0].na[1].Ba}catch(b){a=""}if("seconds"==a){var d=this.value,a=Math.round(d/60/60-0.5,0),e=Math.round(d/60-0.5,0)%60,d=d%60;10>a&&(a="0"+a);10>e&&(e="0"+e);10>d&&(d="0"+d);return a+":"+e+":"+d}return D.M.R(this.value,0,!0)},style:{fontFamily:"Signika",fontSize:"11px",color:"#999",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},align:"left",x:20,y:15},Wg:[{value:0,width:1,color:"#ffffff"}]},{Ig:"#efefef",min:0,Yd:!1,Fd:!0,Rc:!0,title:{text:null},
labels:{Ra:function(){var a="";try{a=c[1].na[1].Ba}catch(b){a=""}if("seconds"==a){var d=this.value,a=Math.round(d/60/60-0.5,0),e=Math.round(d/60-0.5,0)%60,d=d%60;10>a&&(a="0"+a);10>e&&(e="0"+e);10>d&&(d="0"+d);return a+":"+e+":"+d}return D.M.R(this.value,0,!0)},style:{fontFamily:"Signika",fontSize:"11px",color:"#999",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},x:-25,y:15,align:"right"},Ad:!0}],lb:{Xd:!0,cd:!0,borderColor:"#333333",Ra:function(){var b=
this.aa,c="";if(1==this.aa.length){var d=0;if("Hour"==a.t||"Minute"==a.t)c=Highcharts.Ga("%A, %B %d, %Y %H:%M",this.aa[0].v.x);else if("Month"==a.t)if($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length){if(d==b[0].j.X.length-1)var c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0));else c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1);c+=" - "+D.e.g(e)}else e=D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x);
else"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x);return'<div style="padding-bottom:5px;"><b>'+c+'</b></div><div><div style="border: 3px solid white; border-color: #058DC7; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;"></div><div style="padding-left:3px;display:inline">'+
this.aa[0].v.name.replace("_x0020_"," ")+": "+this.aa[0].v.Fb+"</div></div>"}if(this.aa[1].v.ob){"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1)),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==
b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x);var g='<div style="padding-bottom:5px;"><b>'+c+"</b></div>",g=g+"<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob||(g+='<div><div style="border: 3px solid white; border-color: '+b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',
g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")});g+="</div>";d=0;"Month"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?d==b[1].j.aa.length-1?(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1)):(e=D.e.J(b[1].v.Da),e.setDate(1),c=D.e.g(e),e=D.e.J(new Date(e.getFullYear(),e.getMonth()+
1,0))),c+=" - "+D.e.g(e)):"Week"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[1].v.Da),c=D.e.g(e),c+=" - "+D.e.g(a.i.ra))):c=D.e.g(b[1].v.Da);g+='<div style="padding-bottom:5px;margin-top:10px;"><b>'+c+"</b></div>";g+="<div>";c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob&&(g+='<div><div style="border: 3px solid white; border-color: '+
b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")})}else"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1)),c+=" - "+
D.e.g(e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x),g='<div style="padding-bottom:5px;"><b>'+c+"</b></div>",g+="<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha}),$.b(this.aa,function(a,b){g+='<div><div style="border: 3px solid white; border-color: '+
b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">';g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>"});return g+="</div>"}},pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!0},md:{tf:{of:!0},gi:{Na:!0},j:{Na:!0,Ij:!0,Rj:0.1,mb:{eb:"circle",enabled:90<Math.abs(Date.Ge(a.i.getDate().da,a.i.getDate().V))?"false":"true",$c:{uc:{enabled:!0}}}}},j:[{name:function(){var a="";return a=g[g.length-1].c}(),
data:function(){var a=[];$(k).b(function(b,c){a.push({x:new Date(c.o[0]),y:parseFloat(c.k[c.k.length-1]),name:g[g.length-1].c,Fb:c.o[1],ob:!1})});return a}(),$a:0}]}),n=[];$(c).b(function(b,d){if(0<b){var e=[];$(d.Q).b(function(a,b){try{var c=l.options.j[0].data[a].x,h=parseFloat(b.k[b.k.length-1]),k=D.e.J(b.o[0]);e.push({x:c,y:h,name:g[g.length-1].c,Fb:b.o[1],ob:-1<d.id.indexOf("compare")?!0:!1,Da:k})}catch(n){D.debug.log("ERROR","jarvis.visualisation.dashboard.Timeline",6,"Failed to draw x point: "+
n.message)}});var k,q=0;1<b&&4==c.length?(q=3==b?1:0,k=D.Td[b-2]):1==b&&2==c.length?a.i.fa?(q=1,k=D.Td[b-1]):(q=1,k=D.oa[b]):(q=1,k=D.oa[b]);n.push({name:d.na[1].c,lineWidth:2,type:"line",$a:q,Na:!0,data:e,color:k})}});4==c.length?(l.Od(n[1],!1),l.Od(n[0],!1),l.Od(n[2],!1)):$(n).b(function(a,b){l.Od(b,!1)});l.Pa()}};
A.Ma=function(a){var b=$('<div class="wrapper"></div>');b.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+a.title+'</h3></div><div class="content"><div class="jarvis legend"></div><div class="chart"></div></div></div>');return b};A.Oa=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-metrics")&&$(a).d("data-metrics");this.title=b;b=this.Ma(this);$(a).append(b)};
D.debug.log("INFO","Jarvis.Visualisation.Dashboard.Timeline",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.MetricBox");function mc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];this.i=D.a.K.i;D.f.w.$();D.f.B.$()}A=mc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=$.extend({Ue:{height:18,width:75}},a);this.S=this.S||[];this.q=[];var e=null,e=b?$(b):$(".jarvis.dashboard.metricbox");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.MetricBox",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-minichart-height");d&&(c.options.Ue.height=d);if(d=$(b).d("data-minichart-width"))c.options.Ue.width=
d;var e=$(b).d("data-metrics");e&&(e=e.split(","),$(e).b(function(a){e[a]=$.trim(e[a]);c.q.push(e[a])}),$(D.l.q).b(function(a,b){-1<e.indexOf(b.c)&&(c.q[e.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,
Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","Jarvis.Visualisation.Dashboard.MetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){a||(a=mc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-metrics");if(!l)return"";l=l.split(",");$(l).b(function(a,b){var c=-1;$(D.l.q).b(function(a,d){d.c==$.trim(b)&&(c=a)});l[a]=D.l.q[c]});if("undefined"==typeof l[0])return"";$(l).b(function(a,h){var m=[],l={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:D.a.ja.L};m.push(l);l=
{id:"primary_total",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!0,ca:D.a.ja.L};m.push(l);c.i.fa&&(l={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:D.a.ja.L},m.push(l),l={id:"compare_primary_total",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!0,ca:D.a.ja.L},m.push(l));D.a.ja.L&&""!=D.a.ja.L&&(l={id:"total",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),
ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:""},m.push(l));c.i.fa&&(D.a.ja.L&&""!=D.a.ja.L)&&(l={id:"compare_total",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:""},m.push(l));D.l.vc(c,m,function(a,d){var e=[];$(d).b(function(a,b){try{if("primary"==b.id||"compare_primary"==b.id){var c=b.data.va.Q,g={total:0,xb:0,data:[],id:d.id};$(c).b(function(a,b){var c={value:b.k[1],Bf:b.o[1]};g.total+=parseFloat(c.value);g.data.push(c)});
"AVG"==h.N&&(g.be=g.total/c.length);$(d).b(function(a,c){0==c.id.indexOf(b.id+"_total")&&$(c.data.va.Q[0]).b(function(a,b){g.total=parseFloat(b.k[0])})});e.push(g)}}catch(k){}});$(b).D("click");$(b).s("click",function(){$(D).I("jarvis-dashboard-metricbox-click",[h])});!1==c.i.fa?c.update(a,h,e,b):c.qc(a,h,e,b)})})};
A.update=function(a,b,c,d){c[0]&&($(c).b(function(a,c){c.xb=D.M.R(c.total,0,!0);b.Ba&&""!=b.Ba&&(c.xb+=b.Ba);b.Cb&&""!=b.Cb&&(c.xb=b.Cb+c.xb)}),$(c[0]).b(function(e,g){$(d).find(".compare").P();var k=$(d).find(".base"),l=new google.ue.Bl;l.lj("number");l.Xl(g.data.length);var n=g.total;$(g.data).b(function(a,b){l.dl(a,0,Math.round(parseFloat(b.value)))});var h=D.a.K.i,m;"AVG"==b.N?(m=0,0<c[0].total&&(m=xa(1==c.length?c[0].total:c[1].total,c[0].total)),1==c.length?k.find(".site").u('Overall Avg: <span class="summaryvalue">'+
("seconds"==b.Ba?D.M.ai(g.total):g.xb)+"</span><br> ("+D.M.R(m,2)+"%)"):k.find(".site").u('% of Total: <span class="summaryvalue">'+D.M.R(m,2)+"%</span><br> ("+c[1].xb+")")):(m=100,0<n&&(m=100*(c[0].total/(1==c.length?c[0].total:c[1].total))),D.a.ja.L&&""!=D.a.ja.L?k.find(".site").u('% of Total: <span class="summaryvalue">'+D.M.R(m,0)+"%</span><br> ("+c[1].xb+")"):k.find(".site").u(D.M.R(m,0)+'% of Total <span class="summaryvalue"></span><br>('+g.xb+")"));n=1E6<n||-1E6>n?D.M.$o(n):"INT"==b.Cl?"seconds"==
b.Ba?D.M.ai(c[0].total):D.M.R(n,0,!0):D.M.R(n,0,!0);b.Ba&&(""!=b.Ba&&"seconds"!=b.Ba)&&(n+=b.Ba);b.Cb&&""!=b.Cb&&(n=b.Cb+n);k.find(".daterange").u(h.g(h.getDate().da)+" - "+h.g(h.getDate().V));"AVG"==b.N&&"seconds"!=b.Ba?(g.be=D.M.R(g.be,2),b.Ba&&""!=b.Ba&&(g.be+=b.Ba),b.Cb&&""!=b.Cb&&(g.be=b.Cb+g.be),k.find(".value").u(g.be)):k.find(".value").u(n);k.find(".value").d("title",n);k.find(".value").G("negative");k.find(".value").G("positive");try{0<$(k.find(".minichart")).length&&(new google.ue.Fl($(k.find(".minichart")).get(0))).Oa(l,
{pm:"ls",om:a.options.Ue.width+"x"+a.options.Ue.height,km:"0077CC",lm:"b",mm:"2",nm:"B,E6F2FA,0,0,0",rm:"",qm:""})}catch(p){throw"(drawSpark) Exception: "+p.message;}}))};
A.qc=function(a,b,c,d){if(c[0]){a=xa(c[1].total,c[0].total);var e="neutral";-1==b.Ha&&0>Math.round(parseFloat(a))&&(e="positive");-1==b.Ha&&0<Math.round(parseFloat(a))&&(e="negative");1==b.Ha&&0<Math.round(parseFloat(a))&&(e="positive");1==b.Ha&&0>Math.round(parseFloat(a))&&(e="negative");$(c).b(function(a,c){c.xb=D.M.R(c.total,0,!0);b.Ba&&""!=b.Ba&&(c.xb+=b.Ba);b.Cb&&""!=b.Cb&&(c.xb=b.Cb+c.xb)});d=$(d).find(".base");a=D.M.R(a,0)+"%";d.find(".value").u(a);d.find(".value").G("negative").G("positive");
d.find(".value").p(e);d.find(".site").u(("seconds"==b.Ba?D.M.ai(c[0].total):c[0].xb)+" vs "+("seconds"==b.Ba?D.M.ai(c[1].total):c[1].xb))}};
A.Ma=function(a){var b=$('<div class="wrapper"></div>');b.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+a.title+'</h3></div><div class="content"><div class="base"><div class="daterange"></div><div class="value"></div><div class="minichart"></div><div class="site"></div></div><div class="compare" style="display:none;"><div class="daterange"></div><div class="value"></div><div class="minichart"></div><div class="site"></div></div></div></div>');$();
return b};A.Oa=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");this.title=b;b=this.Ma(this);$(a).append(b)};D.debug.log("INFO","Jarvis.Visualisation.Dashboard.MetricBox",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.Table");function nc(a){this.Z=this;this.options=a;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}A=nc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.options=a;this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.dashboard.jtable");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.Table",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-metrics");d&&(c.wa=$(b).d("data-limit"),c.wa||(c.wa=10),d=d.split(","),$(d).b(function(a){d[a]=$.trim(d[a]);
c.q.push(d[a])}),$(D.l.q).b(function(a,b){-1<d.indexOf(b.c)&&(c.q[d.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",
function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","Jarvis.Visualisation.Realtime.MetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){var c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(a.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;var k=$(b).d("data-dimensions"),l=k;if(!k)return"";var n=$(b).d("data-limit");n||(n=10);k=k.split(",");$(k).b(function(b,c){var d=-1;$(D.l.A).b(function(a,b){b.c==$.trim(c)&&(d=a)});k[b]=D.l.A[d];a.A.push(k[b])});$(D.l.A).b(function(b,c){-1<k.indexOf(c.c)&&(a.A[k.indexOf(c.c)]=c)});var h=$(b).d("data-metrics"),m=h;if(!h)return"";h=h.split(",");$(h).b(function(b,c){var d=-1;
$(D.l.q).b(function(a,b){b.c==$.trim(c)&&(d=a)});h[b]=D.l.q[d];a.q.push(h[b])});$(D.l.q).b(function(b,c){-1<h.indexOf(c.c)&&(a.q[h.indexOf(c.c)]=c)});if(!h)return"";var p=[],c={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:l,B:m,t:a.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"};p.push(c);a.i.fa&&(c={id:"compare_primary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:l,B:m,t:a.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"},
p.push(c));D.l.vc(a,p,function(c,d){var e=[];$(d).b(function(a,b){try{if(b.data.va.Q.length>n-1){for(var c=0,d=0,h=za(b.data.va.Q[b.data.va.Q.length-1]),g=n;g<b.data.va.Q.length;g++)c+=parseFloat(b.data.va.Q[g].k[1]),2<h.k.length&&(d+=parseFloat(b.data.va.Q[g].k[2]));h.k[0]="Other";h.o[0]="Other";h.k[1]=c;c=D.M.R(c,0,!0);""!=b.data.va.na[1].Cb&&(c=b.data.va.na[1].Cb+c);""!=b.data.va.na[1].Ba&&(c+=b.data.va.na[1].Ba);h.o[1]=c;2<h.k.length&&(h.k[2]=d,d=D.M.R(d,0,!0),""!=b.data.va.na[2].Cb&&(d=b.data.va.na[2].Cb+
c),""!=b.data.va.na[2].Ba&&(d+=b.data.va.na[2].Ba),h.o[2]=d);b.data.va.Q.splice(n-1,b.data.va.Q.length);b.data.va.Q.push(h)}e.push(b.data.va)}catch(k){}});!1==a.i.fa?a.update(c,k,h,e,b):a.qc(c,k,h,e,b)})};
A.update=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.empty();var k=$("<tr></tr>");$(d[0].na).b(function(a,b){var c=$("<th>"+b.c+"</th>");b.N?c.p("metric"):c.p("dimension");k.append(c)});g.append(k);$(d[0].Q).b(function(a,b){var c=$("<tr></tr>");$(b.o).b(function(a,b){var e=$("<td>"+b+"</td>");d[0].na[a].N?e.p("metric"):e.p("dimension");c.append(e)});g.append(c)})}};
A.qc=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.empty();var k=$("<tr></tr>");$(d[0].na).b(function(a,b){var c=$("<th>"+b.c+"</th>");b.N?c.p("metric"):c.p("dimension");k.append(c)});g.append(k);$(d[0].Q).b(function(a,b){var c=$("<tr></tr>"),e="";$(b.k).b(function(a,g){if(d[0].na[a].N){var k,l=g;$(d[1].Q).b(function(b,c){c.o[0]==e&&(z=c.k[a])});if(0<z){l=xa(z,l);l=D.M.R(l,2);k=$("<td>"+l+"%</td>");k.p("metric strong");var v="",r=d[0].na[a];-1==r.Ha&&0>l&&(v="positive");-1==r.Ha&&0<
l&&(v="negative");1==r.Ha&&0<l&&(v="positive");1==r.Ha&&0>l&&(v="negative");""==v&&(v="neutral")}else k=$("<td>N/A</td>"),k.p("metric"),v="neutral";k.p(v)}else{k=$('<td><div class="">'+g+"</div></td>");e=g;var l=b.o[1],z=0;$(d[1].Q).b(function(a,b){b.o[0]==e&&(z=b.o[1])});k.append('<div class="values">'+z+" vs "+l+"</div>");k.p("dimension")}c.append(k)});g.append(c)})}};
A.Oa=function(a){var b="Widget Title";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var c=$('<div class="wrapper"></div>');c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table table-striped widgettable"></table></div></div>');$();$(a).append(c)};
D.debug.log("INFO","Jarvis.Visualisation.Dashboard.BarTable",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.Pie");function oc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.wa=10;this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}
oc.prototype.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=$.extend({pb:!0},a);this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;var e=null,e=b?$(b):$(".jarvis.dashboard.pie");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.Pie",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-legend");d&&(c.options.pb=eval(d));if(d=$(b).d("data-limit"))c.wa=d;var e=$(b).d("data-metrics");
e&&(e=e.split(","),$(e).b(function(a){e[a]=$.trim(e[a]);c.q.push(e[a])}),$(D.l.q).b(function(a,b){-1<e.indexOf(b.c)&&(c.q[e.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),
sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","Jarvis.Dashboard.Visualisation.Pie",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
oc.prototype.m=function(a,b){a||(a=oc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-dimensions"),n=l;if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.l.A).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.l.A[d];c.A.push(l[a])});$(D.l.A).b(function(a,b){-1<l.indexOf(b.c)&&(c.A[l.indexOf(b.c)]=b)});var h=$(b).d("data-metrics"),m=h;if(!h)return"";h=h.split(",");$(h).b(function(a,b){var d=-1;$(D.l.q).b(function(a,
c){c.c==$.trim(b)&&(d=a)});h[a]=D.l.q[d];c.q.push(h[a])});$(D.l.q).b(function(a,b){-1<h.indexOf(b.c)&&(c.q[h.indexOf(b.c)]=b)});if(!h)return"";var p=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"};p.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"},p.push(d));D.l.vc(c,
p,function(a,d){var e=[];$(d).b(function(a,b){try{e.push(b.data.va)}catch(c){}});c.update(a,l,h,e,b)})};
oc.prototype.update=function(a,b,c,d,e){if(d[0]){if(b=$(e).d("data-limit"))a.wa=b;b=$($(e).find(".piechart"));var g=d[0].na,k=d[0].Q,l=0;$(k).b(function(a,b){l+=parseFloat(b.k[b.k.length-1])});new Highcharts.fb({F:{ab:!1,Tb:b.get(0),backgroundColor:null,ni:null,Qf:null,oi:!1,type:"pie",width:"230",height:"230",marginTop:0,marginLeft:0,marginRight:5,marginBottom:0,Xc:0,Zc:0,Yc:0,Wc:0},title:{text:null},lb:{Ra:function(){return"<b>"+this.v.name+"</b><br/>"+this.j.name+": "+D.M.R(this.ld,2)+" %"}},pb:{enabled:!1},
Oc:{enabled:!1},fe:{enabled:!1},md:{Ye:{$f:!0,size:"100%",ab:!1}},j:[{name:function(){var a="";return a=g[g.length-1].c}(),type:"pie",data:function(){var b=[],c=0;$(k).b(function(d,e){if(d<a.wa){var h="";$(g).b(function(a,b){b.N||(h+=g[a].c+": "+e.o[a])});var h=h.substring(0,h.length-5),k=0,k=100*(e.k[e.k.length-1]/l);c+=k;b.push({name:h,y:k,color:D.oa[d]})}});0<100-Math.floor(c)&&b.push({name:"Other",y:100-c,color:D.oa[11]});return b}(),lc:{Ra:function(){return 5<this.y?this.v.name:null},color:"white",
Rd:-30,enabled:!1}},{name:function(){var a="inner";return a=g[g.length-1].c}(),type:"pie",$h:"70%",data:function(){var b=[];if(1<d.length){var c=0,e=0,h=d[1].Q;$(h).b(function(a,b){e+=parseFloat(b.k[b.k.length-1])});$(k).b(function(d,k){if(d<a.wa){var m=k.o[0];$(h).b(function(a,d){if(d.o[0]==m){var h="";$(g).b(function(a,b){b.N||(h+=g[a].c+": "+d.o[a])});var k=0,k=100*(d.k[d.k.length-1]/e);c+=k;b.push({name:h,y:k})}})}});0<100-Math.floor(c)&&b.push({name:"Other",y:100-c,color:D.oa[11]})}return b}(),
lc:{Ra:function(){return 1<this.y?"<b>"+this.v.name+":</b> "+this.y+"%":null},enabled:!1}}]});var n=0,h=[],m=0,p=0;$(k).b(function(b,c){if(b<a.wa){var d="";$(g).b(function(a,b){b.N||(d+=c.o[a]+"<br/>")});var d=d.substring(0,d.length-5),e=0,e=100*(c.k[c.k.length-1]/l);n+=e;m+=parseFloat(c.k[c.k.length-1]);h.push({eh:g[g.length-1].c,name:d,y:e,value:c.o[c.k.length-1],color:D.oa[b]})}p+=parseFloat(c.k[c.k.length-1])});0<p-m&&h.push({name:"Other",y:100-n,color:D.oa[11],value:D.M.R(p-m,0,!0),eh:g[g.length-
1].c});if(a.options.pb){var s=$($(e).find(".legend"));s.empty();if(1<d.length){var q=d[1].Q,h=[];$(k).b(function(b,c){if(b<a.wa){var d=c.o[0];$(q).b(function(a,b){b.o[0]==d&&h.push({name:d,Ka:c.o[1],ob:b.o[1],gd:xa(b.k[1],c.k[1])})})}});$(h).b(function(a,b){var c="",e=d[0].na[1];-1==e.Ha&&0>b.gd&&(c="positive");-1==e.Ha&&0<b.gd&&(c="negative");1==e.Ha&&0<b.gd&&(c="positive");1==e.Ha&&0>b.gd&&(c="negative");""==c&&(c="neutral");e=$('<div class="legenditem"></div>');e.append('<div class="caption"><div class="colorbox" style="background-color: '+
D.oa[a]+'"></div><span class="'+c+'">'+D.M.R(b.gd,2)+"%</span> "+b.name+'</div><div class="summary">'+b.Ka+" vs "+b.ob+"</div>");s.append(e)})}else $(h).b(function(a,b){var c=$('<div class="legenditem"></div>');c.append('<div class="caption"><div class="colorbox" style="background-color: '+b.color+'"></div>'+D.M.R(b.y,2)+"% "+b.name+'</div><div class="summary">'+b.value+" "+b.eh+"</div>");s.append(c)})}}};
oc.prototype.Oa=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var c=$('<div class="wrapper"></div>');-1<$($(a).parent()).d("class").indexOf("span5")?c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table" ><tr class="row row-fluid"><td class="span6"><div class="piechart"></div></td><td class="span6"><div class="legend"></div></td></tr></table></div></div>'):
c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table" ><tr class="row row-fluid"><td class="span12"><div class="piechart"></div></td></tr><tr class="row row-fluid"><td class="span12" style="padding-left:10px;"><div class="legend"></div></td></table></table></div></div>');$(a).append(c)};D.debug.log("INFO","Jarvis.Dashboard.Visualisation.Pie",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.Panel");
D.a.ja.ud=function(a){D.debug.log("INFO","jarvis.visualisation.dashboard.Panel",6,"Creating Dashboard Panel Object...");var b=this;this.Z=this;this.options=$.extend({Gb:{ad:{height:235},Qg:{Ue:{height:18,width:75}},Ye:{pb:!1}}},a);D.a.ja.kd="";this.ga=-1;try{this.ga=a.ga}catch(c){}if(-1==this.ga)try{this.ga=D.f.wb[0].ma}catch(d){this.ga=-1}D.f.wb.$();D.f.w.$();D.f.B.$();D.Ju(this);this.S=[];$("body").find(".widget-add").show();$(D.ja).bind("filter",function(){D.debug.log("INFO","Dashboard.Visualisation.Panel",
6,"Applying Filter");matchedContainers=$(".jarvis.dashboard.widgets");b.Uc();b.C(b,matchedContainers,!0,!0);b.Je(b,$(".jarvis.dashboard.widgets"),!0,!0)});this.h=matchedContainers=$(".jarvis.dashboard.panel");this.S.push(this.h);D.a.ja.Ja=this;return b};A=D.a.ja.ud.prototype;A.xf=function(){D.debug.log("INFO","jarvis.visualisation.dashboard.Panel",6,"Disposing");$(".jarvis.dashboard.column-left, .jarvis.dashboard.column-mid, .jarvis.dashboard.column-right").empty();$(".jarvis.dashboard.widgets").empty()};
A.C=function(a,b,c,d,e){var g=this;try{-1<a.ga?g.ga=a.ga:-1==g.ga&&(g.ga=a.ga)}catch(k){}-1==g.ga&&(g.ga=D.f.wb[0].ma);D.debug.log("INFO","jarvis.visualisation.dashboard.Panel",6,"Building panel for ID ('"+g.ga+"')");g.Uc();g.Ja=g.get(g,g.ga);if(!this.Ja)throw"failed to locate panel";if("undefined"==typeof e||!0==e)D.state.view="dashboard",D.state.Hh=g.ga,D.bh("Dashboard Panel Init");var l=null,l=b?$(b):$(".jarvis.dashboard.widgets");if(0==l.length)throw"failed to locate panel";$(l).b(function(b,
d){null==a&&(a={});a.ga=g.ga;a.h=d;a.Z=g;g.bd(a);g.Je(g,d,c);D.debug.log("INFO","jarvis.visualisation.dashboard.Panel",6,"Applying to container ('"+this.id+"')")});b=$("body").find(".panel-edit");b.D("click");b.s("click",function(){g.Di({h:l,hb:!1,Z:g})});b=$("body").find(".widget-add");b.D("click");b.s("click",function(){g.gc({h:l,hb:!0,Z:g})});return g};A.Uc=function(){$("body").find(".jarvis.report.panel").P()};
A.Je=function(a,b,c){var d=a.Ja.nq,e=a.Ma();$(b).empty();$(b).append(e);$(".jarvis.dashboard.column-left, .jarvis.dashboard.column-mid, .jarvis.dashboard.column-right").gl({Jj:".columns",handle:".header",placeholder:{element:function(a){return $('<div class="droptarget">'+$(a).d("data-title")+"</div>")[0]},update:f()},update:function(){var a=1,a=-1<$(this).d("class").indexOf("left")?1:-1<$(this).d("class").indexOf("mid")?2:3;$(this).children().b(function(b){var c=$(this).d("data-widgetid");-1<$(this).d("class").indexOf("pie")&&
(new oc).C(null,$(this));-1<$(this).d("class").indexOf("timeline")&&(new kc).C(null,$(this));D.l.m(this,"/engine/Dashboards.svc/UpdateWidgetPosition",{ma:c,Ib:a,ae:b+1},function(a,b){$.Y(b.data)})})},stop:f()}).Pj();$(d).b(function(c,d){D.debug.log("INFO","Jarvis.Dashboards.Visualisation.Panel",6,"Drawing widget ('"+d.c+"')");switch(d.lf){case "Timeline":if(null==d.Jb.c)break;var l=d.Jb.c;d.rc&&(null!=d.rc.c&&""!=d.rc.c)&&(l+=", "+d.rc.c);e='<div class="jarvis dashboard timeline widget" data-widgetid="'+
d.ma+'" data-title="'+d.c+'" data-metrics="'+l+'" data-period="'+d.gb+'" data-limit="'+d.wa+'" data-height="'+a.options.Gb.ad.height+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):2==d.Ib?$(b).find(".column-mid").append(e):$(b).find(".column-right").append(e);break;case "Bar":if(null==d.Jb.c)break;if(null==d.Bb||null==d.Bb.c)break;e='<div class="jarvis dashboard bar widget" data-widgetid="'+d.ma+'" data-title="'+d.c+'" data-metrics="'+d.Jb.c+'" data-dimensions="'+d.Bb.c+'" data-period="'+
d.gb+'" data-limit="'+d.wa+'" data-height="'+a.options.Gb.ad.height+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):2==d.Ib?$(b).find(".column-mid").append(e):$(b).find(".column-right").append(e);break;case "Metric Box":if(null==d.Jb.c)break;e='<div class="jarvis dashboard metricbox widget" data-widgetid="'+d.ma+'" data-title="'+d.c+'" data-dimensions="" data-metrics="'+d.Jb.c+'" data-period="'+d.gb+'" data-limit="'+d.wa+'" data-minichart-height="'+a.options.Gb.Qg.Ue.height+'" data-minichart-width="'+
a.options.Gb.Qg.Ue.width+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):2==d.Ib?$(b).find(".column-mid").append(e):$(b).find(".column-right").append(e);break;case "Table":if(null==d.Jb.c)break;if(null==d.Bb||null==d.Bb.c)break;l=d.Jb.c;d.rc&&(null!=d.rc.c&&""!=d.rc.c)&&(l+=", "+d.rc.c);e='<div class="jarvis dashboard jtable widget" data-widgetid="'+d.ma+'" data-title="'+d.c+'" data-dimensions="'+d.Bb.c+'" data-metrics="'+l+'" data-period="'+d.gb+'" data-limit="'+d.wa+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):
2==d.Ib?$(b).find(".column-mid").append(e):$(b).find(".column-right").append(e);break;case "BarTable":if(null==d.Jb.c)break;if(null==d.Bb||null==d.Bb.c)break;l=d.Jb.c;d.rc&&(null!=d.rc.c&&""!=d.rc.c)&&(l+=", "+d.rc.c);e='<div class="jarvis dashboard bartable widget" data-widgetid="'+d.ma+'" data-title="'+d.c+'" data-dimensions="'+d.Bb.c+'" data-metrics="'+l+'" data-period="'+d.gb+'" data-limit="'+d.wa+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):2==d.Ib?$(b).find(".column-mid").append(e):
$(b).find(".column-right").append(e);break;case "Pie Chart":if(null==d.Jb.c)break;if(null==d.Bb||null==d.Bb.c)break;e='<div class="jarvis dashboard pie widget" data-widgetid="'+d.ma+'" data-title="'+d.c+'" data-dimensions="'+d.Bb.c+'" data-metrics="'+d.Jb.c+'" data-period="'+d.gb+'" data-limit="'+d.wa+'" data-legend="'+a.options.Gb.Ye.pb+'"></div>';1==d.Ib?$(b).find(".column-left").append(e):2==d.Ib?$(b).find(".column-mid").append(e):$(b).find(".column-right").append(e)}});!0==c&&(D.debug.log("INFO",
"Jarvis.Dashboards.Visualisation.Panel",6,"Redraw"),(new mc).C(),(new kc).C(),(new nc).C(),(new oc).C(),(new pc).C(),(new qc).C(),$(D).I("jarvis-dashboard-draw"))};A.Ma=function(){return'<div class="jarvis realtime row-top row fluid-row"></div><div class="row fluid-row"><div class="jarvis dashboard column-left span3 columns ">&nbsp;</div><div class="jarvis dashboard column-mid span5 columns">&nbsp;</div><div class="jarvis dashboard column-right span4 columns ">&nbsp;</div></div>'};A.show=function(){$(".jarvis.dashboard.panel").show()};
A.P=function(){$(".jarvis.dashboard.panel").P()};A.get=function(a,b){if(-1!=b){var c=D.f.wb.bc(null,{id:b});a.ga=c.ma;return c}};A.bd=function(a){$(a.h);a=a.Z.Ja;$("body").find(".jarvis.caption").text(a.c).I("contentchange");$("body").find(".jarvis.description").text(a.Zd).I("contentchange");$("body").d("class")?$("body").d("class").indexOf(a.c)||$("body").p(a.c):$("body").p(a.c)};
A.Di=function(a){var b=a.Z;$(a.h);var c=a.hb,d;d='<div class="panel-modal modal" style="left:50%;">';d+='<div class="modal-header">';d+='<a type="button" class="close" data-dismiss="modal">\u00d7</a>';if(!0==a.hb)d+="<h3>Add a new Dashboard Panel</h3>",d+="</div>",d+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">',d+='<form class="form-horizontal">',d+="<fieldset>",d+='<div class="control-group"><label class="control-label" for="panel-edit-name">Name</label><div class="controls"><input type="text" class="input-xlarge" id="panel-edit-name" placeholder="Enter a name for the new Dashboard"></div></div>',
d+='<div class="control-group"><label class="control-label" for="panel-edit-description">Description</label><div class="controls"><textarea class="input-xlarge" id="panel-edit-description" rows="3" placeholder="Describe the new Dashboard with a few words."></textarea></div></div>',d+="</fieldset>",d+="</form>",d+="</div>",d+='<div class="modal-footer">';else{var e=b.Ja;d+="<h3>Customize Dashboard Panel</h3>";d+="</div>";d+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">';d+='<form class="form-horizontal">';
d+="<fieldset>";d+='<div class="control-group"><label class="control-label" for="panel-edit-name">Name</label><div class="controls"><input type="text" class="input-xlarge" id="panel-edit-name" value="'+e.c+'"></div></div>';d+='<div class="control-group"><label class="control-label" for="panel-edit-description">Description</label><div class="controls"><textarea class="input-xlarge" id="panel-edit-description" rows="3">'+e.Zd+"</textarea></div></div>";d+="</fieldset>";d+="</form>";d+="</div>";d+='<div class="modal-footer">';
d+='<a class="panel-edit-delete" style="cursor:pointer;float:left;margin-top:5px;">Delete</a>'}d+='<a class="btn" data-dismiss="modal">Close</a>';d+='<a class="btn btn-primary panel-edit-save">Save changes</a>';d+="</div>";d+="</div>";var g=$(d);$("body").append(g);g.fc();g.find(".panel-edit-delete").D("click");g.find(".panel-edit-delete").s("click",function(){D.l.m(this,"/engine/Dashboards.svc/Delete",{ma:b.ga},function(a,c){$.Y(c.data);D.f.wb.$(null,null,null,!0);buildContentMenu_Dashboards();b.ga=
D.f.wb[0].ma;b.C(null,null,!0);g.fc("hide")})});g.find(".panel-edit-save").D("click");g.find(".panel-edit-save").s("click",function(){var d="",e="",d=g.find("#panel-edit-name").U(),e=g.find("#panel-edit-description").U(),n=-1;c||(n=b.ga);D.l.m(this,"/engine/Dashboards.svc/Update",{ma:n,c:d,Zd:e},function(c,d){d=$.Y(d.data);var e=$(".jarvis.dashboard.widgets");a={};b.ga=d;b.C(null,e,!0);D.f.wb.$(null,null,null,!0);buildContentMenu_Dashboards();g.fc("hide")})});g.s("hidden",function(){g.remove()})};
function rc(a,b){var c="",d="",e="",g="";b&&(b.Bb&&(d=b.Bb.c),e=b.Jb.c,b.rc&&(g=b.rc.c));if("Table"==a||"Pie Chart"==a)c+='<div class="control-group"><label class="control-label" for="widget-edit-dimension">Dimension</label><div class="controls"><select id="widget-edit-dimension">',$(D.f.w).b(function(a,b){c+='<option value="'+b.Nb+'" '+(d==b.c?"selected":"")+" >"+b.c+"</option>"}),c+="</select></div></div>";var c=c+'<div class="control-group"><label class="control-label" for="widget-edit-metric">Metric</label><div class="controls"><select id="widget-edit-metric">',
k=D.f.B;$(k).b(function(a,b){c+='<option value="'+b.Nb+'" '+(e==b.c?"selected":"")+">"+b.c+"</option>"});c+="</select></div></div>";if("Table"==a||"Timeline"==a)c+='<div class="control-group"><label class="control-label" for="widget-edit-secondarymetric">Secondary Metric</label><div class="controls"><select id="widget-edit-secondarymetric"><option value="-1">Please select</option>',k=D.f.B,$(k).b(function(a,b){c+='<option value="'+b.Nb+'" '+(g==b.c?"selected":"")+">"+b.c+"</option>"}),c+="</select></div></div>";
"Table"==a&&(c+='<div class="control-group"><label class="control-label" for="widget-edit-limit">Show a Table with</label><div class="controls"><select id="widget-edit-limit"><option value=5>5 rows</option><option value=6>6 rows</option><option value=7>7 rows</option><option value=8>8 rows</option><option value=9>9 rows</option><option value=10 selected>10 rows</option></select></div></div>');"Pie Chart"==a&&(c+='<div class="control-group"><label class="control-label" for="widget-edit-limit">Show up to</label><div class="controls"><select id="widget-edit-limit"><option value=3>3 slices</option><option value=4>4 slices</option><option value=5>5 slices</option><option value=6 selected>6 slices</option></select></div></div>');
return c}
A.gc=function(a){var b=a.Z;$(a.h);var c=-1,d=-1,e=-1,g="Table",k="",k=k+"",k=k+'<div class="widget-modal modal" style="left:50%;">',k=k+'<div class="modal-header">',k=k+'<a type="button" class="close" data-dismiss="modal">\u00d7</a>';if(!0==a.hb)k+="<h3>Add a new Dashboard Widget</h3>",k+="</div>",k+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">',k+='<form class="form-horizontal">',k+="<fieldset>",k+='<div class="control-group"><label class="control-label" for="widget-edit-name">Caption</label><div class="controls"><input type="text" class="input-xlarge" id="widget-edit-name" placeholder="Enter a caption for the new Widget"></div></div>',k+=
'<div class="control-group"><label class="control-label" for="widget-edit-type">Type</label><div class="controls"><select id="widget-edit-type"><option value="Metric Box" '+("Metric Box"==g?"selected":"")+'>Metric Box</option><option value="Table" '+("Table"==g?"selected":"")+'>Table</option><option value="Pie Chart" '+("Pie Chart"==g?"selected":"")+'>Pie Chart</option><option value="Timeline" '+("Timeline"==g?"selected":"")+">Timeline</option></select></div></div>",k+="<hr>",k+='<div class="specificsettings">',
k+=rc(g,null),k+="</div>",k+="</fieldset>",k+="</form>",k+="</div>",k+='<div class="modal-footer">';else{var c=a.Jc,l=D.l.Pr(c),g=l.lf;try{d=l.Ib,e=l.ae}catch(n){e=d=-1}k+="<h3>Widget Settings</h3>";k+="</div>";k+='<div class="modal-body" style="padding:30px;padding-bottom: 0;">';k+='<form class="form-horizontal">';k+="<fieldset>";k+='<div class="control-group"><label class="control-label" for="widget-edit-name">Caption</label><div class="controls"><input type="text" class="input-xlarge" id="widget-edit-name" placeholder="Enter a caption for the new Widget" value="'+
l.c+'"></div></div>';k+='<div class="control-group"><label class="control-label" for="widget-edit-type">Type</label><div class="controls"><select id="widget-edit-type"><option value="Metric Box" '+("Metric Box"==g?"selected":"")+'>Metric Box</option><option value="Table" '+("Table"==g?"selected":"")+'>Table</option><option value="Pie Chart" '+("Pie Chart"==g?"selected":"")+'>Pie Chart</option><option value="Timeline" '+("Timeline"==g?"selected":"")+">Timeline</option></select></div></div>";k+="<hr >";
k+='<div class="specificsettings">';k+=rc(g,l);k+="</div>";k+="</fieldset>";k+="</form>";k+="</div>";k+='<div class="modal-footer">';k+='<a class="widget-edit-delete" style="cursor:pointer;float:left;margin-top:5px;">Delete</a>'}var k=k+'<a class="btn" data-dismiss="modal">Close</a>',k=k+'<a class="btn btn-primary widget-edit-save">Save changes</a>',k=k+"</div>",k=k+"</div>",h=$(k);h.find("#widget-edit-type").D("change");h.find("#widget-edit-type").s("change",function(){h.find(".specificsettings").u(rc(h.find("#widget-edit-type").U(),
l))});$("body").append(h);h.fc();h.find(".widget-edit-delete").D("click");h.find(".widget-edit-delete").s("click",function(){D.l.m(this,"/engine/Dashboards.svc/DeleteWidget",{ma:c},function(c,d){D.f.wb.bc(null,{id:b.ga},null,!0);$.Y(d.data);$(a.pc).remove();h.fc("hide")})});h.find(".widget-edit-save").D("click");h.find(".widget-edit-save").s("click",function(){var g="",l="Table",n="",q="",u="",v="",r="",z="",w=5,g=h.find("#widget-edit-name").U(),l=h.find("#widget-edit-type").U(),n=h.find("#widget-edit-dimension").U(),
q=h.find("#widget-edit-dimension option:selected").text(),u=h.find("#widget-edit-metric").U(),v=h.find("#widget-edit-metric option:selected").text(),r=h.find("#widget-edit-secondarymetric").U(),z=h.find("#widget-edit-secondarymetric option:selected").text(),w=h.find("#widget-edit-limit").U();"undefined"==typeof n&&(n=-1,q="");"undefined"==typeof r&&(r=-1,z="");D.l.m(this,"/engine/Dashboards.svc/UpdateWidget",{vw:b.ga,ma:c,c:g,lf:l,Bb:n,dq:u,rc:r,Kd:w,Ib:d,ae:e},function(c,d){D.f.wb.bc(null,{id:b.ga},
null,!0);d=$.Y(d.data);if(a.hb)-1<r&&(v+=", "+z),"Table"==l&&(k='<div class="jarvis dashboard jtable widget" data-widgetid="'+d+'" data-title="'+g+'" data-dimensions="'+q+'" data-metrics="'+v+'" data-limit="'+w+'"></div>'),"Metric Box"==l&&(k='<div class="jarvis dashboard metricbox widget" data-widgetid="'+d+'" data-title="'+g+'" data-dimensions="'+q+'" data-metrics="'+v+'" data-limit="'+w+'"></div>'),"Pie Chart"==l&&(k='<div class="jarvis dashboard pie widget" data-widgetid="'+d+'" data-title="'+
g+'" data-dimensions="'+q+'" data-metrics="'+v+'" data-limit="'+w+'"></div>'),"Timeline"==l&&(k='<div class="jarvis dashboard timeline widget" data-widgetid="'+d+'" data-title="'+g+'" data-dimensions="'+q+'" data-metrics="'+v+'" data-limit="'+w+'"></div>'),k=$(k),$(".jarvis.dashboard.column-left").u($(".jarvis.dashboard.column-left").u().replace("&nbsp;","")),$(".jarvis.dashboard.column-left").Zg(k),$(".jarvis.dashboard.column-left").Zg("&nbsp;"),"Table"==l&&(new nc).C(null,k),"Metric Box"==l&&(new mc).C(null,
k),"Pie Chart"==l&&(new oc).C(null,k),"Timeline"==l&&(new kc).C(null,k);else{var e=a.pc;$(e).d("data-title",g);$(e).d("data-dimensions",q);$(e).d("data-metrics",v);$(e).d("data-limit",w);$(e).G("pie");$(e).G("jtable");$(e).G("timeline");$(e).G("metricbox");"Table"==l&&$(e).p("jtable");"Metric Box"==l&&$(e).p("metricbox");"Pie Chart"==l&&$(e).p("pie");"Timeline"==l&&$(e).p("timeline");"Table"==l&&(new nc).C(null,e);"Metric Box"==l&&(new mc).C(null,e);"Pie Chart"==l&&(new oc).C(null,e);"Timeline"==
l&&(new kc).C(null,e)}h.fc("hide")})});h.s("hidden",function(){h.remove()})};D.debug.log("INFO","Dashboard.Visualisation.Panel",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.Bar");function pc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.wa=10;this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}A=pc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=$.extend({height:235},a);this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.dashboard.bar");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.Bar",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-height");d&&(c.options.height=d);if(d=$(b).d("data-limit"))c.wa=d;
var e=$(b).d("data-metrics");e&&(e=e.split(","),$(e).b(function(a){e[a]=$.trim(e[a]);c.q.push(e[a])}),$(D.l.q).b(function(a,b){-1<e.indexOf(b.c)&&(c.q[e.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,
Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","jarvis.visualisation.dashboard.Bar",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){a||(a=D.ja.a.fq);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-metrics"),n=l,h=$(b).d("data-dimensions"),m=h;if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.l.q).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.l.q[d];c.q.push(l[a])});$(D.l.q).b(function(a,b){-1<l.indexOf(b.c)&&(c.q[l.indexOf(b.c)]=b)});if(!l||!h)return"";h=h.split(",");$(h).b(function(a,b){var d=-1;$(D.f.w).b(function(a,
c){c.c==$.trim(b)&&(d=a)});h[a]=D.f.w[d];c.A.push(h[a])});$(D.f.w).b(function(a,b){-1<h.indexOf(b.c)&&(c.A[h.indexOf(b.c)]=b)});if(!h)return"";var p=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:m,B:n,t:c.t,la:!0,ca:D.a.ja.L,Gc:l[l.length-1].c,za:"DESC"};p.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:m,B:n,t:c.t,la:!0,ca:D.a.ja.L,Gc:l[l.length-1].c,za:"DESC"},p.push(d));D.l.vc(c,
p,function(a,d){var e=[];$(d).b(function(a,b){try{var c=b.data.va;if(2==c.na.length)b.data.va.id=b.id,e.push(b.data.va);else{var d={};jQuery.extend(!0,d,c);d.na.splice(2,1);d.id=b.id;$(d.Q).b(function(a){d.Q[a].o.splice(2,1);d.Q[a].k.splice(2,1)});e.push(d);d={};jQuery.extend(!0,d,c);d.na.splice(1,1);d.id=b.id;$(d.Q).b(function(a){d.Q[a].o.splice(1,1);d.Q[a].k.splice(1,1)});e.push(d)}}catch(h){}});c.update(a,l,e,b)})};
A.update=function(a,b,c,d){if(c[0]){var e=$(d);if(b=$(d).d("data-limit"))a.wa=b;d=$($(d).find(".chart"));var g=c[0].na,k=c[0].Q;$(k).b(f());var l=new Highcharts.fb({F:{height:a.options.height,marginTop:0,marginLeft:-15,marginRight:-20,marginBottom:50,Xc:0,Zc:15,Yc:0,Wc:0,Tb:d.get(0),ab:!1,type:"column",Eb:{load:f(),Pa:function(){e.find(".jarvis.legend").empty();$(l.j).b(function(a,b){var c="",d="",c=b.name,d='<span style="border: 5px solid white; border-color: '+b.color+'; border-radius: 5px;height: 0px; display: inline-block; width: 0px;margin-left:10px;"></span>&nbsp;',
d=d+('<span class="jarvis legendseries" data-id="0">'+c+"</span>");e.find(".jarvis.legend").append(d)})},selection:f()}},title:{text:null},Ta:{Nc:function(){var b=[],c=0,d=0;$(k).b(function(a,b){c+=parseFloat(b.k[b.k.length-1])});$(k).b(function(c,e){if(c<a.wa){var g=e.o[0];d+=parseFloat(e.k[e.k.length-1]);b.push(g)}});0<c-d&&b.push("Other");return b}(),labels:{fontFamily:"Signika",enabled:!0,style:{fontSize:"11px;",color:"#999"},y:30},mh:0,Hi:!1,Rc:!1},$a:[{Ig:"#efefef",min:0,Yd:!1,Fd:!0,Rc:!0,title:{text:null},
labels:{style:{fontFamily:"Signika",fontSize:"11px",color:"#999",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},align:"left",x:20,y:15},Wg:[{value:0,width:1,color:"#ffffff"}]}],lb:{Xd:!0,cd:!0,borderColor:"#333333",Ra:function(){var b=this.aa,c="";if(1==this.aa.length){var d=0;if("Hour"==a.t||"Minute"==a.t)c=Highcharts.Ga("%A, %B %d, %Y %H:%M",this.aa[0].v.x);else if("Month"==a.t)if($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length){if(d==
b[0].j.X.length-1)var c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0));else c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1);c+=" - "+Highcharts.Ga("%b %d, %Y",e)}else e=D.e.J(b[0].v.x),e.setDate(1),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",b[0].v.x);else"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),
e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[0].v.x),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",a.i.V))):c=Highcharts.Ga("%A, %B %d, %Y",b[0].v.x);c=D.e.g(a.i.getDate().da);c=c+" - "+D.e.g(a.i.getDate().V);return'<div style="padding-bottom:5px;"><b>'+c+'</b></div><div><div style="border: 3px solid white; border-color: #058DC7; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;"></div><div style="padding-left:3px;display:inline">'+
this.aa[0].v.name.replace("_x0020_"," ")+": "+this.aa[0].v.Fb+"</div></div>"}if(this.aa[1].v.ob){"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1)),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=Highcharts.Ga("%b %d, %Y",
e),c+=" - "+Highcharts.Ga("%b %d, %Y",b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[0].v.x),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",a.i.V))):c=Highcharts.Ga("%A, %B %d, %Y",b[0].v.x);var c=D.e.g(a.i.getDate().da),c=c+" - ",c=c+D.e.g(a.i.getDate().V),g='<div style="padding-bottom:5px;"><b>'+
c+"</b></div>",g=g+"<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob||(g+='<div><div style="border: 3px solid white; border-color: '+b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")});g+="</div>";d=0;"Month"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?d==b[1].j.aa.length-
1?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1)):(e=D.e.J(b[1].v.Da),e.setDate(1),c=Highcharts.Ga("%b %d, %Y",e),e=D.e.J(new Date(e.getFullYear(),e.getMonth()+1,0))),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):"Week"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[1].v.Da)),
e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[1].v.Da),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",a.i.ra))):c=Highcharts.Ga("%A, %B %d, %Y",b[1].v.Da);c=D.e.g(a.i.ya);c+=" - ";c+=D.e.g(a.i.ra);g+='<div style="padding-bottom:5px;margin-top:10px;"><b>'+c+"</b></div>";g+="<div>";c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob&&(g+='<div><div style="border: 3px solid white; border-color: '+b.j.color+
'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")})}else"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-
1)),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=Highcharts.Ga("%b %d, %Y",D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+Highcharts.Ga("%b %d, %Y",e)):(e=D.e.J(b[0].v.x),c=Highcharts.Ga("%b %d, %Y",e),c+=" - "+Highcharts.Ga("%b %d, %Y",a.i.V))):c=Highcharts.Ga("%A, %B %d, %Y",b[0].v.x),
c=D.e.g(a.i.getDate().da),c+=" - ",c+=D.e.g(a.i.getDate().V),g='<div style="padding-bottom:5px;"><b>'+c+"</b></div>",g+="<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha}),$.b(this.aa,function(a,b){g+='<div><div style="border: 3px solid white; border-color: '+b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">';g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>"});return g+="</div>"}},
pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!0},md:{tf:{of:!0,Na:!1},gi:{Na:!1},j:{Na:!1,Ij:!0,Rj:0.1,mb:{eb:"circle",enabled:90<Math.abs(Date.Ge(a.i.getDate().da,a.i.getDate().V))?"false":"true",$c:{uc:{enabled:!0}}}}},j:[{Yg:0,Jg:0.2,name:function(){var a="";return a=g[g.length-1].c}(),data:function(){var b=[],c=0,d=0;$(k).b(function(a,b){d+=parseFloat(b.k[b.k.length-1])});$(k).b(function(d,e){if(d<a.wa){var g=e.o[0],k=parseFloat(e.k[e.k.length-1]);c+=k;b.push({y:k,name:g,Fb:e.o[1],ob:!1})}});0<
d-c&&b.push({name:"Other",y:d-c,Fb:0,color:D.oa[11]});return b}(),$a:0}]}),n=[];$(c).b(function(b,d){if(0<b){var e=[],g=0,k=0;$(d.Q).b(function(a,b){k+=parseFloat(b.k[b.k.length-1])});var u=0;$(d.Q).b(function(b,c){if(u<a.wa&&b<l.options.j[0].data.length&&c.k[0]==l.options.j[0].data[b].name){var h=c.k[0],k=parseFloat(c.k[c.k.length-1]),n=c.o[0];g+=k;e.push({y:k,name:h,Fb:c.o[1],ob:-1<d.id.indexOf("compare")?!0:!1,Da:n});u+=1}});for(var v=e.length;v<l.options.j[0].data.length-1;v++){var r=l.options.j[0].data[v],
z=r.name,w=0,r=r.name,g=g+w;e.push({y:w,name:z,Fb:0,ob:-1<d.id.indexOf("compare")?!0:!1,Da:r});u+=1}0<k-g&&(w=k-g,e.push({name:"Other",y:w,Fb:w,color:D.oa[11]}));n.push({name:d.na[1].c,lineWidth:2,type:"column",$a:0,Na:!1,data:e,color:1<b&&4==c.length?D.Td[b-2]:1==b&&2==c.length?a.i.fa?D.Td[b-1]:D.oa[b]:D.oa[b],Yg:0,Jg:0.2})}});4==c.length?(l.Od(n[1],!1),l.Od(n[0],!1),l.Od(n[2],!1)):$(n).b(function(a,b){l.Od(b,!1)});l.Pa()}};
A.Ma=function(a){var b=$('<div class="wrapper"></div>');b.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+a.title+'</h3></div><div class="content"><div class="jarvis legend"></div><div class="chart"></div></div></div>');return b};A.Oa=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");this.title=b;b=this.Ma(this);$(a).append(b)};
D.debug.log("INFO","jarvis.visualisation.dashboard.Bar",6,"JS source loaded");D.ba("jarvis.visualisation.dashboard.BarTable");function qc(a){this.Z=this;this.options=a;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}A=qc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.options=a;this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.dashboard.bartable");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.dashboard.BarTable",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-metrics");d&&(c.wa=$(b).d("data-limit"),c.wa||(c.wa=10),d=d.split(","),$(d).b(function(a){d[a]=
$.trim(d[a]);c.q.push(d[a])}),$(D.l.q).b(function(a,b){-1<d.indexOf(b.c)&&(c.q[d.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",
function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO","Jarvis.Visualisation.Dashboard.BarTable",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){var c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(a.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;var k=$(b).d("data-dimensions"),l=k;if(!k)return"";var n=$(b).d("data-limit");n||(n=10);k=k.split(",");$(k).b(function(b,c){var d=-1;$(D.l.A).b(function(a,b){b.c==$.trim(c)&&(d=a)});k[b]=D.l.A[d];a.A.push(k[b])});$(D.l.A).b(function(b,c){-1<k.indexOf(c.c)&&(a.A[k.indexOf(c.c)]=c)});var h=$(b).d("data-metrics"),m=h;if(!h)return"";h=h.split(",");$(h).b(function(b,c){var d=-1;
$(D.l.q).b(function(a,b){b.c==$.trim(c)&&(d=a)});h[b]=D.l.q[d];a.q.push(h[b])});$(D.l.q).b(function(b,c){-1<h.indexOf(c.c)&&(a.q[h.indexOf(c.c)]=c)});if(!h)return"";var p=[],c={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:l,B:m,t:a.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"};p.push(c);a.i.fa&&(c={id:"compare_primary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:l,B:m,t:a.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"},
p.push(c));D.l.vc(a,p,function(c,d){var e=[];$(d).b(function(a,b){try{if(b.data.va.Q.length>n-1){for(var c=0,d=0,g=za(b.data.va.Q[b.data.va.Q.length-1]),h=n;h<b.data.va.Q.length;h++)c+=parseFloat(b.data.va.Q[h].k[1]),2<g.k.length&&(d+=parseFloat(b.data.va.Q[h].k[2]));g.k[0]="Other";g.o[0]="Other";g.k[1]=c;g.o[1]=D.M.R(c,0,!0);2<g.k.length&&(g.k[2]=d,g.o[2]=D.M.R(d,0,!0));b.data.va.Q.splice(n-1,b.data.va.Q.length);b.data.va.Q.push(g)}e.push(b.data.va)}catch(k){}});!1==a.i.fa?a.update(c,k,h,e,b):a.qc(c,
k,h,e,b)})};
A.update=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.G("compareperiod");g.empty();var k=0;$(d[0].Q).b(function(a,b){d[0].na[1].N&&(k+=parseFloat(b.k[1]))});$(d[0].Q).b(function(a,b){d[0].na[1].N&&(b.ld=parseFloat(b.k[1])/k)});$(d[0].Q).b(function(a,b){var c=$("<tr></tr>"),e=$("<td></td>"),k=$('<div class="tablebarwrapper"></div>'),s=$('<div class="tablebar" style="width:'+100*b.ld+'%"></div>');k.append(s);"Other"!=b.o[0]?s.O({"background-color":D.oa[0]}):s.O({"background-color":D.oa[11]});s=
$('<div class="barcaption"><div class="caption"></div><div class="subcaption"></div></div>');s.find(".caption").text(D.M.R(100*b.ld,2)+"% "+b.o[0]);s.find(".caption").d("title",b.o[0]);s.find(".subcaption").text(b.o[1]+" "+d[0].na[1].c);e.append(k);e.append(s);c.append(e);g.append(c);for(e=b.o[0].length;60<c.height()&&5<e;)s.find(".caption").text(D.M.R(100*b.ld,2)+"% "+b.o[0].substring(0,e)+"..."),e-=1})}};
A.qc=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.p("compareperiod");g.empty();$(d[0].Q).b(function(a,b){var c=$("<tr></tr>"),e=b.o[0],m=0,p=0,s=0,q,m=b.k[1];$(d[1].Q).b(function(a,b){b.o[0]==e&&(p=b.k[1],s=b.o[1])});if(0<p){m=xa(p,m);m=D.M.R(m,2);q=$("<td></td>");var u=$('<div class="tablebarwrapper"></div>'),v=$('<div class="tablebar" style="width:'+m+'%"></div>');u.append(v);v.O({"background-color":D.oa[0]});v=$('<div class="barcaption"><div class="caption"><span class="thevalue"></span><span class="thetext"></span></div><div class="subcaption"></div></div>');
v.find(".caption .thevalue").text(m+"% ");v.find(".caption .thetext").text(b.o[0]);v.find(".caption .thetext").d("title",b.o[0]);v.find(".subcaption").text(s+" vs. "+b.o[1]);q.append(u);q.append(v);c.append(q);g.append(c);for(q=b.o[0].length;60<c.height()&&5<q;)v.find(".caption .thetext").text(b.o[0].substring(0,q)+"..."),q-=1;q="";u=d[0].na[1];-1==u.Ha&&0>m&&(q="positive");-1==u.Ha&&0<m&&(q="negative");1==u.Ha&&0<m&&(q="positive");1==u.Ha&&0>m&&(q="negative");""==q&&(q="neutral");v.find(".caption .thevalue").p(q)}else q=
$("<td>N/A</td>"),q.p("metric"),q.p("neutral"),c.append(q),g.append(c);g.append(c)})}};
A.Oa=function(a){var b="Widget Title";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var c=$('<div class="wrapper"></div>');c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table table-striped widgettable"></table></div></div>');$();$(a).append(c)};
D.debug.log("INFO","Jarvis.Visualisation.Dashboard.BarTable",6,"JS source loaded");D.ba("jarvis.visualisation.report");D.a.n.L="";D.a.n.C=function(){D.debug.log("INFO","Report",5,"...report init ("+((new Date).getMilliseconds()-(new Date).getMilliseconds())+"ms)")};D.a.n.Ed=function(a){D.a.n.L=a;$(D.a.n).I("filter")};D.a.n.lg=function(a){$(D.a.n).I("addpartialfilter",a)};D.a.n.nd=function(a){$(D.a.n).I("removepartialfilter",a)};D.debug.log("INFO","Jarvis.Visualisation.",6,"JS source loaded");D.ba("jarvis.visualisation.report.Timeline");Highcharts.fh({oa:"#058DC7 #ED7E17 #50B432 #AF49C5 #EDEF00 #8080FF #A0A424 #E3071C #6AF9C4 #B2DEFF #64E572 #CCCCCC".split(" "),Td:"#AADFF3 #F2D5BD #C9E7BE #E1C9E8 #F6F3B1 #DADBFB #E7E6B4 #F4B3BC #AADFF3 #F2D5BD #C9E7BE".split(" ")});
function sc(){var a=this;this.type="timeline";this.Z=this;this.Kc="line";this.t="Day";this.Xa=this.Ca=null;this.sa=[];this.q=[];this.height=235;this.i=D.a.K.i;$(this.i).Fa("datechange");$(this.i).bind("datechange",function(){a.m(a)});$(D.a.n).Fa("filter");$(D.a.n).bind("filter",function(){a.m(a)});$(D.a.n).Fa("addpartialfilter-quick");$(D.a.n).bind("addpartialfilter-quick",function(b,c){a.sa.push(c)});$(D.a.n).Fa("addpartialfilter");$(D.a.n).bind("addpartialfilter",function(b,c){a.sa.push(c);a.m(a)});
$(D.a.n).Fa("removepartialfilter");$(D.a.n).bind("removepartialfilter",function(b,c){-1<a.sa.indexOf(c)&&(a.sa.splice(a.sa.indexOf(c),1),a.m(a))});$(D).Fa("report-timeline-switch-resolution");$(D).bind("report-timeline-switch-resolution",function(b,c){xc(a,c,this)});$(window).Tk(function(){a.fb.Wd(0,a.fb.height,!1);a.fb.Wd($(".jarvis.report.timeline").width(),a.fb.height,!1)});D.f.w.$();D.f.B.$();a.Me(a)}A=sc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;var e=null,e=b?$(b):$(".jarvis.report.timeline");if(0!=e.length)return this.options=$.extend({height:235,wd:[],Gd:!0},a),c.height=this.options.height,c.wd=this.options.wd,c.Gd=this.options.Gd,$(e).b(function(b,d){D.debug.log("INFO","jarvis.visualisation.report.Timeline",6,"Applying to container ('"+this.id+"')");if(null==c.Ca)if(null!=a)c.Ca=a.Ca,c.q.push(a.Ca),$(D.f.B).b(function(a,b){b.c==c.q[0]&&(c.Ca=b)});else if($(d).d("data-metrics")){var e=
$(d).d("data-metrics"),e=e.split(",");$(e).b(function(a){e[a]=$.trim(e[a]);c.q.push(e[a])});c.Ca=c.q[0];$(D.f.B).b(function(a,b){b.c==c.q[0]&&(c.Ca=b)})}else c.Ca=D.f.B[0],c.q=[],c.q.push(c.Ca),$(d).d("data-metrics",c.Ca.c);else c.q=[],c.q.push(c.Ca),$(d).d("data-metrics",c.Ca.c);yc(c,d);c.m(c);$(this).Fa("data");$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).Fa("click");$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)})}),D.debug.log("INFO","jarvis.visualisation.report.Timeline",
5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"),D.a.Uf=c.Ca,D.a.pe=c.Xa,this};
A.m=function(a){a||(a=sc);var b=a,c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(D.a.K.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;var k=[],l={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Ca.c,t:b.t,la:!1,ca:D.a.n.L};k.push(l);b.i.fa&&(l={id:"compare_primary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Ca.c,t:b.t,la:!1,ca:D.a.n.L},k.push(l));b.Xa&&(l={id:"secondary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),
ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Xa.c,t:b.t,la:!1,ca:D.a.n.L},k.push(l),b.i.fa&&(l={id:"compare_secondary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Xa.c,t:b.t,la:!1,ca:D.a.n.L},k.push(l)));0<b.sa.length&&$(b.sa).b(function(a,h){l={id:"filter",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Ca.c,t:b.t,la:!1,ca:h};k.push(l);b.i.fa&&(l={id:"compare_filter",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),
w:"",B:b.Ca.c,t:b.t,la:!1,ca:h},k.push(l));b.Xa&&(l={id:"filter_secondary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Xa.c,t:b.t,la:!1,ca:h},k.push(l),b.i.fa&&(l={id:"compare_filter_secondary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:b.Xa.c,t:b.t,la:!1,ca:h},k.push(l)))});var n=!0,h=[],m=2;b.options.Gd||(m=0);D.l.vc(b,k,function(a,c){$(c).b(function(a,c){var d=[],e=c.data.va,g=c.data.Aw,k=c.data.va.Q,l=[];"Month"==
b.t?(k[0].k[0]=b.i.getDate().da,k[k.length-1].k[0]=b.i.getDate().V):"Week"==b.t&&(k[0].k[0]=b.i.getDate().da);$(k).b(function(a,b){var d=parseFloat(b.k[1]);if("primary"==c.id){var g=D.e.J(b.k[0]);l.push({x:g,y:d,name:e.na[1].c,Fb:b.o[1],ob:!1});h.push(g)}else{var g=h[a],k=D.e.J(b.o[0]);"undefined"!=typeof g&&l.push({x:g,y:d,name:e.na[1].c,Fb:b.o[1],ob:-1<c.id.indexOf("compare")?!0:!1,Da:k})}});var p="",q="",s=3,u="area",v=0,S=!0,Z=0,k=e.na[1].Ba;"primary"==c.id&&(p=e.na[1].c,q=D.oa[0],_.min(l,function(a){return a.y}));
"secondary"==c.id&&(p=e.na[1].c,q=D.oa[1],s=2,u="line",v=1,S=!1,Z=1,_.min(l,function(a){return a.y}));"filter"==c.id&&(q=g.ca,q=q.replace(/\[AND\]/g,", "),q=q.substring(0,q.length-2),$(q.split(",")).b(function(a,b){p+=b.split("=")[1]+", "}),p=p.substring(0,p.length-2),p+=": "+e.na[1].c,s=2,u="line",v=0,S=!1,q=D.oa[m],b.i.fa||m++,Z=2);"filter_secondary"==c.id&&(q=g.ca,q=q.replace(/\[AND\]/g,", "),q=q.substring(0,q.length-2),$(q.split(",")).b(function(a,b){p+=b.split("=")[1]+", "}),p=p.substring(0,
p.length-2),p+=": "+e.na[1].c,s=2,u="line",v=1,S=!1,q=D.oa[m],b.i.fa||m++,Z=3);"compare_primary"==c.id&&(p=e.na[1].c,q=D.Td[0],s=2,u="line",v=0,S=!1,Z=4);"compare_secondary"==c.id&&(p=e.na[1].c,q=D.Td[1],s=2,u="line",v=1,S=!1,Z=5);"compare_filter"==c.id&&(q=g.ca,q=q.replace(/\[AND\]/g,", "),q=q.substring(0,q.length-2),$(q.split(",")).b(function(a,b){p+=b.split("=")[1]+", "}),p=p.substring(0,p.length-2),p+=": "+e.na[1].c,s=2,u="line",v=0,S=!1,q=D.Td[m],m++,Z=6);"compare_filter_secondary"==c.id&&(q=
g.ca,q=q.replace(/\[AND\]/g,", "),q=q.substring(0,q.length-2),$(q.split(",")).b(function(a,b){p+=b.split("=")[1]+", "}),p=p.substring(0,p.length-2),p+=": "+e.na[1].c,s=2,u="line",v=1,S=!1,q=D.Td[m],m++,Z=7);d.push({name:p,color:q,lineWidth:s,Na:S,Pv:v,type:u,data:l,ha:Z,ve:k});D.debug.log("INFO","jarvis.visualisation.report.Timeline",5,"Plotting "+l.length+" points.");n&&(zc(b),n=!1);Ac(b,d)});var d=b.fb.j,e=""==d[0].options.ve?d[0].options.name:d[0].options.ve;$(d).b(function(a,b){0<a&&(""==b.options.ve?
b.options.name:b.options.ve)==e&&b.update({$a:0},!1)});b.fb.Pa()});try{$(D.a).I("timeline-primarymetric",[b,b.Ca]),$(D.a).I("timeline-secondarymetric",[b,b.Xa])}catch(p){}};function zc(a){a||(a=sc);$(a.fb.j).b(function(){this.remove(!1)});a.fb.Pa()}function Ac(a,b){$(b).b(function(b,d){var e=!0;0!=d.ha&&4!=d.ha&&1!=d.ha&&5!=d.ha||a.options.Gd||(e=!1);a.fb.Od({visible:e,wv:d.data.length,name:d.name,color:d.color,lineWidth:d.lineWidth,type:d.type,Na:d.Na,$a:d.Pv,data:d.data,ha:d.ha,ve:d.ve},!1)})}
function yc(a,b){var c;c='<div class="chartcontrol" >';c+='<div class="metricpickers btn-group">';c+='<table border="0" cellpadding="0" cellspacing="0">';c+="<tbody><tr>";c+="<td>";c+='<div class="btn-group">';c+='<div class="mainmetricwrapper"></div>\x3c!--<button class="btn mainmetricwrapper dropdown-toggle dropdown" data-toggle="dropdown">';c+='<span class="jarvis metricname"></span>&nbsp;<span class="caret"></span>';c+="</button>--\x3e";c+='<div class="jarvis metriccontainer current">';c+="</div>";
c+="</div>";c+="</td>";c+='<td class="andbox" style="padding-left: 10px; padding-right: 10px;padding-top:2px;">';c+="and";c+="</td>";c+="<td>";c+="<div>";c+='<div class="jarvis comparemetricpicker btn-group" style="float: left"><div class="comparemetricwrapper"></div>\x3c!--';c+='<a class="jarvis comparemetricwrapper btn dropdown-toggle dropdown" data-toggle="dropdown">';c+='<span class="jarvis secondarymetricname">Select a metric...</span>&nbsp;<span class="caret"></span></a>--\x3e';c+='<div class="jarvis metriccontainer alltabs">';
c+="</div>";c+="</div>";c+='<i class="jarvis removecomparemetric icon-remove" style="float: right; margin-top: 8px;margin-left: 5px; cursor: pointer; display: none;"></i>';c+="</div>";c+="</td>";c+="</tr>";c+="</tbody></table>";c+="</div>";c+="\x3c!--";c+='<div class="btn-group charttype" data-toggle="buttons-radio" style="float: right;';c+='padding-left: 20px;">';c+='<button class="btn active" data-id="area">';c+='<img src="'+D.hostname+'/assets//img/glyphicons_040_stats.png" height="17" width="17" />';
c+="</button>";c+='<button class="btn" data-id="column">';c+='<img src="'+D.hostname+'/assets//img/glyphicons_041_charts.png" height="17" width="17" />';c+="</button>";c+='<button class="btn disabled" data-id="motion">';c+='<img src="'+D.hostname+'/assets//img/glyphicons_042_motion.png" height="21" width="21" />';c+="</button>";c+="</div>--\x3e";c+='<div class="btn-group resolutionpicker" data-toggle="buttons-radio">';c+='\x3c!--<button class="btn" data-id="Timeline">';c+="Timeline</button>";c+='<button class="btn" data-id="Minute">';
c+="Minute</button>";c+='<button class="btn" data-id="Hour">';c+="Hour</button>--\x3e";c+='<button class="btn" data-id="Day">';c+="Day</button>";c+='<button class="btn " data-id="Week">';c+="Week</button>";c+='<button class="btn" data-id="Month">';c+="Month</button>";c+="</div>";c+="</div>";c+='<div class="chartlegend">';c+='<div class="legend">';c+="</div>";c+="</div>";$(b).empty();$(b).append(c);switch(a.t){case "Day":$('.btn[data-id="Day"]').p("active");break;case "Week":$('.btn[data-id="Week"]').p("active");
break;case "Month":$('.btn[data-id="Month"]').p("active")}c=$('<div class="jarvis picker metrics" data-type="button"></div>');$(b).find(".mainmetricwrapper").append(c);var d=[];if(D.a.Fc){var e=D.f.ka.bc(a,{id:D.a.Fc.W});$(e.Db[D.a.Fc.Ua].$d).b(function(a,b){$(b.B).b(function(a,c){c.Hb=b.c;d.push(c)})})}else d=D.f.B;var g=new D.a.K.B({h:c,Le:a.options.wd,selected:a.Ca.c});a.Zk=g.Zk;$(g).bind("select",function(b,c){c=_.find(D.f.B,function(a){return a.c==c});a.Ca=c;a.m(a);a.cb(a);Rb(k,c)});$(D.a).Fa("metricbox-primarymetric");
$(D.a).bind("metricbox-primarymetric",function(b,c,d){c.type!=a.type&&(g.qe(a,d.c),a.Ca=d,a.m(a),a.cb(a))});c=$('<div class="jarvis picker metrics" data-type="button"></div>');$(b).find(".comparemetricwrapper").append(c);var k=new D.a.K.B({h:c,Ce:!0,Le:a.options.wd,selected:a.Xa?a.Xa.c:""});Rb(k,a.Ca);$(k).bind("select",function(b,c){c=_.find(D.f.B,function(a){return a.c==c});a.Xa=c;a.m(a);a.cb(a);Rb(g,a.Xa)});$(D.a).Fa("secondarymetric");$(D.a).bind("secondarymetric",function(b,c,d){c.type!=a.type&&
(d=_.find(D.f.B,function(a){return a.c==d}),a.Xa=d,a.m(a),a.cb(a))});var l='<ul class="jarvis metriccontainer dropdown-menu">',l=l+"</ul>",l=$(l);$(D.f.B).b(function(b,c){var d=$('<li class="jarvis metriclink" data-id="'+c.Nb+'"><a >'+c.c+"</a></li>");d.D("click");d.click(function(){var b=$($(this).parent());$(b.parent()).parent().Ea("comparemetricpicker")?(a.Xa=c,$(".jarvis.secondarymetricname").u(c.c),$(".jarvis.removecomparemetric.icon-remove").show(),$(".jarvis.comparemetricwrapper.btn.dropdown-toggle.dropdown").p("selected")):
(a.Ca=c,$(".jarvis.metricname").u(c.c));try{a.m(a),a.cb(a)}catch(d){}b.children().b(function(){$(this).G("active")});$(this).p("active")});$(l).append(d)});$(".jarvis.metricname").u(a.Ca.c);$(b).find(".jarvis.metriccontainer.current").append(l);$(b).find(".jarvis.metriccontainer.alltabs").append(l.wm(!0));$(b).append('<div class="chart" style="width:100%;display:block;"></div>');$(".jarvis.removecomparemetric.icon-remove").D("click");$(".jarvis.removecomparemetric.icon-remove").s("click",function(){a.Xa=
null;try{a.m(a)}catch(b){}$(".jarvis.secondarymetricname").u("Select a metric...");$(this).P();$(".jarvis.comparemetricwrapper.btn.dropdown-toggle.dropdown").G("selected");$(".jarvis.metriccontainer.alltabs li").b(function(a,b){$(b).G("active")})});a.fb=new Highcharts.fb({F:{height:a.options.height,marginTop:0,marginLeft:-15,marginRight:-20,marginBottom:50,Xc:0,Zc:15,Yc:0,Wc:0,Tb:$(b).find(".chart").get(0),ab:!1,type:"area",pj:!0,Eb:{load:f(),Pa:function(){$(b).find(".legend").empty();$(a.fb.j).b(function(a,
c){var d="",e="";c.visible&&(d=c.name,e='<span class="legendmark" style="border-color: '+c.color+';"></span>&nbsp;',e+='<span class="legendseries" data-id="0">'+d+"</span>",$(b).find(".legend").append(e))})},selection:function(b){if(b.Ta){var c=new Date(b.Ta[0].min),d=new Date(b.Ta[0].max),e=d-c,g="";"Month"==a.t&&(g="Day");"Day"==a.t&&2592E6>=e&&(g="Hour");"Hour"==a.t&&864E5>=e&&(g="Minute");a.t!=g&&""!=g?(c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),
a.i.setDate(a.i,c,d),c=$(".resolutionpicker").find('.btn[data-id="'+g+'"]'),xc(a,g,c)):(a.fb.Ta[0].cl(Math.floor(b.Ta[0].min),Math.ceil(b.Ta[0].max),!1),a.fb.Pa(),a.xl.show());b.preventDefault()}}}},title:{text:null},Ta:{type:"column"==a.Kc?"linear":"datetime",Ag:{Jh:"%b %e"},labels:{Ra:function(){var b=new Date(this.value),c="";a.i.getDate();a.i.getDate();return c=0!=b.getHours()+b.getTimezoneOffset()/60?D.e.g(b,"mmm dd hh:nn"):D.e.g(b,"mmm dd")},fontFamily:"Signika",enabled:!0,style:{fontSize:"11px;",
color:"#999"},y:30},mh:0,Rc:!1,Yd:!1,Fd:!1},$a:[{Ig:"#efefef",Yd:!1,Fd:!0,Rc:!0,title:{text:null},labels:{Ra:function(){var a="";try{a=this.F.j[0].options.ve}catch(b){a=""}if("seconds"==a){var c=this.value,a=Math.round(c/60/60-0.5,0),d=Math.round(c/60-0.5,0)%60,c=c%60;10>a&&(a="0"+a);10>d&&(d="0"+d);10>c&&(c="0"+c);return a+":"+d+":"+c}return D.M.R(this.value,0,!0)},style:{fontFamily:"Signika",fontSize:"11px",color:"#999",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},
align:"left",x:20,y:15},Wg:[{value:0,width:1,color:"#ffffff"}]},{Ig:"#efefef",Yd:!1,Fd:!0,Rc:!0,title:{text:null},labels:{Ra:function(){var a="";try{a=this.F.j[this.F.j.length-1].options.ve}catch(b){a=""}if("seconds"==a){var c=this.value,a=Math.round(c/60/60-0.5,0),d=Math.round(c/60-0.5,0)%60,c=c%60;10>a&&(a="0"+a);10>d&&(d="0"+d);10>c&&(c="0"+c);return a+":"+d+":"+c}return D.M.R(this.value,0,!0)},style:{fontFamily:"Signika",fontSize:"11px",color:"#999",textShadow:"-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff"},
x:-25,y:15,align:"right"},Ad:!0}],lb:{borderColor:"#333333",Xd:!0,cd:!0,Ra:function(){var b=this.aa,c="";if(1==this.aa.length){var d=0;if("Hour"==a.t||"Minute"==a.t)c=D.e.g(this.aa[0].v.x);else if("Month"==a.t)if($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length){if(d==b[0].j.X.length-1)var c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0));else c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1);c+=" - "+D.e.g(e)}else e=
D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x);else"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x);return'<div style="padding-bottom:5px;"><b>'+c+'</b></div><div><div style="border: 3px solid white; border-color: '+D.oa[0]+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;"></div><div style="padding-left:3px;display:inline">'+
this.aa[0].v.name.replace("_x0020_"," ")+": "+this.aa[0].v.Fb+"</div></div>"}if(this.aa[1].v.ob){"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1)),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==
b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x);var g='<div style="padding-bottom:5px;"><b>'+c+"</b></div>",g=g+"<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob||(g+='<div><div style="border: 3px solid white; border-color: '+b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',
g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")});g+="</div>";d=0;"Month"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?d==b[1].j.aa.length-1?(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1)):(e=D.e.J(b[1].v.Da),e.setDate(1),c=D.e.g(e),e=D.e.J(new Date(e.getFullYear(),e.getMonth()+
1,0))),c+=" - "+D.e.g(e)):"Week"==a.t?($(b[1].j.aa).b(function(a,c){c.Da==b[1].v.Da&&(d=a+1)}),d<b[1].j.aa.length?(c=D.e.g(D.e.J(b[1].v.Da)),e=D.e.J(b[1].j.aa[d].Da),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[1].v.Da),c=D.e.g(e),c+=" - "+D.e.g(a.i.ra))):c=D.e.g(b[1].v.Da);g+='<div style="padding-bottom:5px;margin-top:10px;"><b>'+c+"</b></div>";g+="<div>";c=_.Vc(this.aa,function(a){return a.j.options.ha});$.b(c,function(a,b){b.v.ob&&(g+='<div><div style="border: 3px solid white; border-color: '+
b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">',g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>")})}else"Month"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(d==b[0].j.X.length-1?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e=D.e.J(new Date(e.getFullYear(),e.getMonth(),0))):(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1)),c+=" - "+
D.e.g(e)):(e=D.e.J(b[0].v.x),e.setDate(1),c=D.e.g(e),c+=" - "+D.e.g(b[0].v.x))):"Week"==a.t?($(b[0].j.X).b(function(a,c){c==b[0].v.x&&(d=a+1)}),d<b[0].j.X.length?(c=D.e.g(D.e.J(b[0].v.x)),e=D.e.J(b[0].j.X[d]),e.setDate(e.getDate()-1),c+=" - "+D.e.g(e)):(e=D.e.J(b[0].v.x),c=D.e.g(e),c+=" - "+D.e.g(a.i.V))):c=D.e.g(b[0].v.x),g='<div style="padding-bottom:5px;"><b>'+c+"</b></div>",g+="<div>",c=_.Vc(this.aa,function(a){return a.j.options.ha}),$.b(this.aa,function(a,b){g+='<div><div style="border: 3px solid white; border-color: '+
b.j.color+'; border-radius: 3px;height: 0px; display: inline-block; width: 0px;position:relative;top:-1px;">';g+='</div><div style="padding-left:3px;display:inline">'+b.j.options.name+": "+b.v.Fb+"</div></div>"});return g+="</div>"}},pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!0},md:{tf:{of:!0},j:{Ij:!0,Rj:0.1,mb:{eb:"circle",enabled:90<Math.abs(Date.Ge(a.i.getDate().da,a.i.getDate().V))?"false":"true",$c:{uc:{enabled:!0}}}}}});a.xl=a.fb.qa.button("Reset zoom",a.fb.Cc-90,10,function(){a.fb.Ta[0].cl(null,
null,!1);a.fb.Pa();a.xl.P()});a.xl.P().add();$(".charttype").find(".btn").b(function(){$(this).D("click");$(this).click(f())});$(".resolutionpicker").find(".btn").b(function(){$(this).D("click");$(this).click(function(){xc(a,$(this).d("data-id"),this)})});$(D).I("report-timeline-loaded",[a.t])}function xc(a,b,c){a.t=b;a.m(a);$(".resolutionpicker").find(".btn").b(function(){$(this).G("active")});$(c).p("active");a.cb(a)}A.uid=ga("timeline-1234");
A.cb=function(a){D.state[a.uid()]||(D.state[a.uid()]={});D.debug.log("INFO","jarvis.visualisation.report.Timeline",6,'Timeline "'+a.uid()+'" saving state.');D.state[a.uid()].Ca=a.Ca;D.state[a.uid()].Xa=a.Xa;D.state[a.uid()].t=a.t};A.Me=function(a){D.debug.log("INFO","jarvis.visualisation.report.Timeline",6,'Timeline "'+a.uid()+'" loading state.');null!=D.state[a.uid()]&&(a.Ca=D.state[a.uid()].Ca,a.Xa=D.state[a.uid()].Xa,a.t=D.state[a.uid()].t)};
D.debug.log("INFO","jarvis.visualisation.report.Timeline",6,"JS source loaded");D.ba("jarvis.visualisation.report.MetricBox");D.a.n.hg=function(){this.Z=this;this.Kc="line";this.t="Day";this.Ca=D.f.B[0];this.Xa=null;this.sa=[];this.q=[];this.vb=null;this.i=D.a.K.i;D.f.w.$();D.f.B.$();return this};A=D.a.n.hg.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds(),e=null,e=b?$(b):$(".jarvis.report.metricbox");if(0!=e.length)return $(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.MetricBox",6,"Applying to container ('"+this.id+"')");c.vb=b;var d=$(b).d("data-metrics");d||(d=D.f.B[0].c);d=d.split(",");$(d).b(function(a){d[a]=$.trim(d[a]);c.q.push(d[a])});$(D.f.B).b(function(a,b){-1<d.indexOf(b.c)&&(c.q[d.indexOf(b.c)]=b)});$(b).empty();c.Oa(b);
c.m(c,b);$(this).bind("data",function(a,b){b.data=$(this).data().data});$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)});$(c.i).bind("datechange",function(){c.m(c)});$(D.a.n).bind("filter",function(){c.m(c)});$(D.a).bind("timeline-primarymetric",function(a,b,d){$(".jmetricbox").G("primaryactive");a=$(c.vb).find('.jmetricbox[data-metric="'+d.c+'"]');a.p("primaryactive");a.find(".legendmark").O({"border-color":D.oa[0]});$(D).I("report-metricbox-draw",[a,!0])});$(D.a).bind("timeline-secondarymetric",
function(a,b,d){$(".jmetricbox").G("secondaryactive");a=$(c.vb).find('.jmetricbox[data-metric="'+d.c+'"]');d&&(a.p("secondaryactive"),a.find(".legendmark").O({"border-color":D.oa[1]}));$(D).I("report-metricbox-draw",[a,!1])})}}),D.debug.log("INFO","jarvis.visualisation.report.MetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"),this};
A.m=function(a){a||(a=D.a.n.hg);var b=a,c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(b.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;$(b.q).b(function(a,l){var n=[],h={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:l.c,t:b.t,la:!0,ca:D.a.n.L};n.push(h);b.i.fa&&(h={id:"compare_primary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:l.c,t:b.t,la:!0,ca:D.a.n.L},n.push(h));!b.i.fa&&(D.a.n.L&&""!=D.a.n.L)&&
(h={id:"total",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:l.c,t:b.t,la:!0,ca:""},n.push(h));D.l.vc(b,n,function(a,c){var d=[];$(c).b(function(a,b){var c=b.data.va.Q;d.push({value:c[0].k[0],Bf:c[0].o[0],sl:c[0].k[0],Qh:c[0].o[0]})});!1==b.i.fa?b.update(a,l,d):b.qc(a,l,d);var e;e=D.a.pe&&D.a.pe.c==l.c?!1:!0;$(D).I("report-metricbox-draw",[b,e])})})};
A.update=function(a,b,c){var d=$(a.vb).find('.jmetricbox[data-metric="'+b.c+'"]'),e=c[0].value;1E6<e||-1E6>e?(e=D.M.$o(e),""!=b.Ba&&(e+=b.Ba),""!=b.Cb&&(e=b.Cb+e)):e=c[0].Bf;d.find(".value").u(e);d.find(".value").d("title",c[0].Bf);d.find(".value").G("negative");d.find(".value").G("positive");"SUM"==b.N||"COUNT"==b.N?(e=100,0<c[0].sl&&(e=100*(c[0].value/(1==c.length?c[0].value:c[1].value))),1==c.length?d.find(".summary").u('<span class="summaryvalue">'+D.M.R(e,2)+"%</span> of Total<br>("+c[0].Qh+
")"):d.find(".summary").u('<span class="summaryvalue">'+D.M.R(e,2)+"%</span> of Total<br>("+c[1].Qh+")")):"AVG"==b.N&&(e=0,0<c[0].sl&&(e=xa(1==c.length?c[0].value:c[1].value,c[0].sl)),1==c.length?d.find(".summary").u('Overall Avg: <span class="summaryvalue">'+c[0].Qh+"</span><br>("+D.M.R(e,2)+"%)"):d.find(".summary").u('<span class="summaryvalue">'+D.M.R(e,2)+"%</span> change<br>("+c[1].Qh+")"));D.a.Uf&&D.a.Uf.c==b.c?d.p("primaryactive"):d.G("primaryactive");D.a.pe&&D.a.pe.c==b.c?d.p("secondaryactive"):
d.G("secondaryactive");d.D("click");d.s("click",function(){try{$(D.a).I("metricbox-primarymetric",[a,b])}catch(c){}})};
A.qc=function(a,b,c){var d=$(a.vb).find('.jmetricbox[data-metric="'+b.c+'"]'),e=xa(c[1].value,c[0].value);console.log(e);d.find(".value").G("negative");d.find(".value").G("positive");var g="neutral";-1==b.Ha&&0>Math.round(parseFloat(e))&&(g="positive");-1==b.Ha&&0<Math.round(parseFloat(e))&&(g="negative");1==b.Ha&&0<Math.round(parseFloat(e))&&(g="positive");1==b.Ha&&0>Math.round(parseFloat(e))&&(g="negative");e=D.M.R(e,2)+"%";console.log(e);d.find(".value").u(e);d.find(".value").p(g);d.find(".summary").u(c[0].Bf+
" vs "+c[1].Bf);D.a.Uf&&D.a.Uf.c==b.c?d.p("primaryactive"):d.G("primaryactive");D.a.pe&&D.a.pe.c==b.c?d.p("secondaryactive"):d.G("secondaryactive");d.D("click");d.s("click",function(){try{$(D.a).I("metricbox-primarymetric",[a,b])}catch(c){}})};A.Ma=function(a){return'<div class="caption">'+a.c+'</div><div class="valuewrapper"><span class="legendmark" style=""></span><div class="value"></div></div><div class="summary"></div>'};
A.Oa=function(a){var b=this,c=b.q;$(c).b(function(d,g){var k='<div class="jmetricbox" style="width:'+Math.floor(100/c.length)+'%" data-metric="'+g.c+'"></div>',l=$(k);$(a).append(l);k=b.Ma(g);l.append(k)});if(null!=D.a.Uf){var d=D.a.Uf,d=$(b.vb).find('.jmetricbox[data-metric="'+d.c+'"]');$(".jmetricbox").G("primaryactive");d.p("primaryactive");d.find(".legendmark").O({"border-color":D.oa[0]});$(D).I("report-metricbox-draw",[d,!0,D.oa[0]])}null!=D.a.pe&&(d=D.a.pe,d=$(b.vb).find('.jmetricbox[data-metric="'+
d.c+'"]'),$(".jmetricbox").G("secondaryactive"),d.p("secondaryactive"),d.find(".legendmark").O({"border-color":D.oa[1]}),$(D).I("report-metricbox-draw",[d,!1,D.oa[1]]))};D.debug.log("INFO","jarvis.visualisation.report.MetricBox",6,"JS source loaded");D.ba("jarvis.visualisation.report.OverviewMetricBox");function Bc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];this.i=D.a.K.i;D.f.w.$();D.f.B.$()}A=Bc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];this.q=[];var e=null,e=b?$(b):$(".jarvis.report.overviewmetricbox");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.OverviewMetricBox",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-metrics");d&&(d=d.split(","),$(d).b(function(a){d[a]=$.trim(d[a]);c.q.push(d[a])}),$(D.l.q).b(function(a,b){-1<d.indexOf(b.c)&&
(c.q[d.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",function(){$(c.S).b(function(a,b){c.m(c,b)})}),D.debug.log("INFO",
"Jarvis.Visualisation.report.OverviewMetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
A.m=function(a,b){a||(a=Bc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-metrics");if(!l)return"";l=l.split(",");$(l).b(function(a,b){var c=-1;$(D.l.q).b(function(a,d){d.c==$.trim(b)&&(c=a)});l[a]=D.l.q[c]});if("undefined"==typeof l[0])return"";$(l).b(function(a,h){var l=[],p={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:D.a.ja.L};l.push(p);p=
{id:"primary_total",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!0,ca:D.a.ja.L};l.push(p);c.i.fa&&(p={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:D.a.ja.L},l.push(p),p={id:"compare_primary_total",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!0,ca:D.a.ja.L},l.push(p));D.a.ja.L&&""!=D.a.ja.L&&(p={id:"total",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),
ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:""},l.push(p));c.i.fa&&(D.a.ja.L&&""!=D.a.ja.L)&&(p={id:"compare_total",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:h.c,t:c.t,la:!1,ca:""},l.push(p));D.l.vc(c,l,function(a,d){var e=[];$(d).b(function(a,b){try{if("primary"==b.id||"compare_primary"==b.id){var c=b.data.va.Q,g={total:0,xb:0,data:[],id:d.id};$(c).b(function(a,b){var c={value:b.k[1],Bf:b.o[1]};g.total+=parseFloat(c.value);g.data.push(c)});
"AVG"==h.N&&(g.be=g.total/c.length);$(d).b(function(a,c){0==c.id.indexOf(b.id+"_total")&&$(c.data.va.Q[0]).b(function(a,b){g.total=parseFloat(b.k[0]);g.xb=b.o[0]})});e.push(g)}}catch(k){}});!1==c.i.fa?c.update(a,h,e,b):c.qc(a,h,e,b)})})};
A.update=function(a,b,c,d){c[0]&&$(c[0]).b(function(a,c){$(d).find(".compare").P();var k=$(d).find(".base"),l=new google.ue.Bl;l.lj("number");l.Xl(c.data.length);var n=c.total;$(c.data).b(function(a,b){l.dl(a,0,Math.round(parseFloat(b.value)))});var h=D.a.K.i,n="INT"==b.Cl?D.M.R(n,0,!0):"FLOAT"==b.Cl?D.M.R(n,2,!0):D.M.R(n,0,!0);b.Ba&&""!=b.Ba&&(n+=b.Ba);b.Cb&&""!=b.Cb&&(n=b.Cb+n);k.find(".daterange").u(h.g(h.getDate().da)+" - "+h.g(h.getDate().V));k.find(".value").G("positive");k.find(".value").G("negative");
k.find(".value").u(c.xb);k.find(".site").empty();try{(new google.ue.Fl($(k.find(".minichart")).get(0))).Oa(l,{pm:"ls",om:"75x18",km:"0077CC",lm:"b",mm:"2",nm:"B,E6F2FA,0,0,0",rm:"",qm:""})}catch(m){throw"(drawSpark) Exception: "+m.message;}})};
A.qc=function(a,b,c,d){if(c[0]){var e=c[0];a=$(d);a=$(d).find(".base");$(d).find(".compare").P();var g=new google.ue.Bl;g.lj("number");g.lj("number");g.Xl(c[0].data.length);d=e.total;var k=c[1].total;$(e.data).b(function(a,b){g.dl(a,0,Math.round(parseFloat(b.value),Math.round(parseFloat(c[1].data[a].value))));g.dl(a,1,Math.round(parseFloat(c[1].data[a].value)))});e=xa(k,d);a.find(".value").G("positive");a.find(".value").G("negative");d="";-1==b.Ha&&0>e&&(d="positive");-1==b.Ha&&0<e&&(d="negative");
1==b.Ha&&0<e&&(d="positive");1==b.Ha&&0>e&&(d="negative");e=D.M.R(e,2,!0)+"%";a.find(".value").u(e);a.find(".value").p(d);a.find(".site").u('<span class="summaryvalue">'+c[0].xb+" vs. "+c[1].xb+"</span>");try{(new google.ue.Fl($(a.find(".minichart")).get(0))).Oa(g,{pm:"ls",om:"75x18",km:"0077CC,AADFF3",lm:"b",mm:"2|1",nm:"B,E6F2FA,0,0,0",rm:"",qm:""})}catch(l){throw"(drawSpark:compare) Exception: "+l.message;}}};
A.Oa=function(a){var b=this;$(a).d("data-title")&&$(a).d("data-title");$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var c=$('<div class="wrapper"></div>');c.append('<div class=""><div class="content"><div class="base"><div class="minichart"></div><div class="metricname">'+b.q[0].c+':</div><div class="value"></div><div class="site"></div></div></div></div>');$();var d=b.q[0];$(c).D("click");$(c).s("click",function(){try{$(D.a).I("metricbox-primarymetric",
[b,d])}catch(a){}});$(a).append(c)};D.debug.log("INFO","Jarvis.Visualisation.report.OverviewMetricBox",6,"JS source loaded");D.ba("jarvis.visualisation.report.OverviewPie");function Cc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.wa=10;this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}
Cc.prototype.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;var e=null,e=b?$(b):$(".jarvis.report.overviewpie");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.OverviewPie",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-limit");d&&(c.wa=d);var e=$(b).d("data-metrics");e&&(e=e.split(","),$(e).b(function(a){e[a]=$.trim(e[a]);
c.q.push(e[a])}),$(D.l.q).b(function(a,b){-1<e.indexOf(b.c)&&(c.q[e.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",
function(){$(c.S).b(function(a,b){c.m(c,b)})}),$(D.a).bind("metricbox-primarymetric",function(a,b,d){c.q[0]=d;c.m(c,c.S[0])}),D.debug.log("INFO","Jarvis.Dashboard.Visualisation.Pie",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
Cc.prototype.m=function(a,b){a||(a=Cc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-dimensions"),n=l;if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.l.A).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.l.A[d];c.A.push(l[a])});$(D.l.A).b(function(a,b){-1<l.indexOf(b.c)&&(c.A[l.indexOf(b.c)]=b)});var h="";0<c.q.length?(h=c.q[0].c,c.q.splice(0,c.q.length)):h=$(b).d("data-metrics");var m=h;if(!h)return"";
h=h.split(",");$(h).b(function(a,b){var d=-1;$(D.l.q).b(function(a,c){c.c==$.trim(b)&&(d=a)});h[a]=D.l.q[d];c.q.push(h[a])});$(D.l.q).b(function(a,b){-1<h.indexOf(b.c)&&(c.q[h.indexOf(b.c)]=b)});if(0==c.q.length)return"";var p=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"};p.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),
w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC"},p.push(d));D.l.vc(c,p,function(a,d){var e=[];$(d).b(function(a,b){try{e.push(b.data.va)}catch(c){}});c.update(a,l,h,e,b)})};
Cc.prototype.update=function(a,b,c,d,e){if(d[0]){if(b=$(e).d("data-limit"))a.wa=b;b=$($(e).find(".piechart"));var g=d[0].na,k=d[0].Q,l=0;$(k).b(function(a,b){l+=parseFloat(b.k[b.k.length-1])});new Highcharts.fb({F:{ab:!0,Tb:b.get(0),backgroundColor:null,ni:null,Qf:null,oi:!1,type:"pie",width:"230",height:"230",marginTop:0,marginLeft:0,marginRight:5,marginBottom:0,Xc:0,Zc:0,Yc:0,Wc:0},title:{text:null},lb:{Ra:function(){return"<b>"+this.v.name+"</b><br/>"+this.j.name+": "+D.M.R(this.ld,2)+" %"}},pb:{enabled:!1},
Oc:{enabled:!1},fe:{enabled:!1},md:{Ye:{$f:!0,size:"100%",ab:!0}},j:[{name:function(){var a="";return a=g[g.length-1].c}(),type:"pie",data:function(){var b=[],c=0;$(k).b(function(d,e){if(d<a.wa){var h="";$(g).b(function(a,b){b.N||(h+=g[a].c+": "+e.o[a])});var h=h.substring(0,h.length-5),k=0,k=100*(e.k[e.k.length-1]/l);c+=k;b.push({name:h,y:k,color:D.oa[d]})}});0<100-Math.floor(c)&&b.push({name:"Other",y:100-c,color:D.oa[11]});return b}(),lc:{Ra:function(){return 5<this.y?this.v.name:null},color:"white",
Rd:-30,enabled:!1}},{name:function(){var a="inner";return a=g[g.length-1].c}(),type:"pie",$h:"70%",data:function(){var b=[];if(1<d.length){var c=0,e=0,h=d[1].Q;$(h).b(function(a,b){e+=parseFloat(b.k[b.k.length-1])});$(k).b(function(d,k){if(d<a.wa){var l=k.o[0];$(h).b(function(a,d){if(d.o[0]==l){var h="";$(g).b(function(a,b){b.N||(h+=g[a].c+": "+d.o[a])});var k=0,k=100*(d.k[d.k.length-1]/e);c+=k;b.push({name:h,y:k})}})}});0<100-Math.floor(c)&&b.push({name:"Other",y:100-c,color:D.oa[11]})}return b}(),
lc:{Ra:function(){return 1<this.y?"<b>"+this.v.name+":</b> "+this.y+"%":null},enabled:!1}}]});var n=0,h=[],m=0,p=0;$(k).b(function(b,c){if(b<a.wa){var d="";$(g).b(function(a,b){b.N||(d+=c.o[a]+"<br/>")});var d=d.substring(0,d.length-5),e=0,e=100*(c.k[c.k.length-1]/l);n+=e;m+=parseFloat(c.k[c.k.length-1]);h.push({eh:g[g.length-1].c,name:d,y:e,value:c.o[c.k.length-1],color:D.oa[b]})}p+=parseFloat(c.k[c.k.length-1])});0<p-m&&h.push({name:"Other",y:100-n,color:D.oa[11],value:D.M.R(p-m,0,!0),eh:g[g.length-
1].c});var s=$($(e).find(".legend"));s.empty();if(1<d.length){var q=d[1].Q,h=[];$(k).b(function(b,c){if(b<a.wa){var d=c.o[0];$(q).b(function(a,b){b.o[0]==d&&h.push({name:d,Ka:c.o[1],ob:b.o[1],gd:xa(b.k[1],c.k[1])})})}});$(h).b(function(a,b){var c="",e=d[0].na[1];-1==e.Ha&&0>b.gd&&(c="positive");-1==e.Ha&&0<b.gd&&(c="negative");1==e.Ha&&0<b.gd&&(c="positive");1==e.Ha&&0>b.gd&&(c="negative");""==c&&(c="neutral");e=$('<div class="legenditem"></div>');e.append('<div class="caption"><div class="colorbox" style="background-color: '+
D.oa[a]+'"></div><span class="'+c+'">'+D.M.R(b.gd,2)+"%</span> "+b.name+'</div><div class="summary">'+b.Ka+" vs "+b.ob+"</div>");s.append(e)})}else $(h).b(function(a,b){var c=$('<div class="legenditem"></div>');c.append('<div class="caption"><div class="colorbox" style="background-color: '+b.color+'"></div>'+D.M.R(b.y,2)+"% "+b.name+'</div><div class="summary">'+b.value+" "+b.eh+"</div>");s.append(c)})}};
Cc.prototype.Oa=function(a){var b="TITLE";$(a).d("data-title")&&(b=$(a).d("data-title"));$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var c=$('<div class="wrapper"></div>');-1<$($(a).parent()).d("class").indexOf("span5")?c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table" ><tr class="row row-fluid"><td class="span6"><div class="piechart"></div></td><td class="span6"><div class="legend"></div></td></tr></table></div></div>'):
-1==$($(a).parent()).d("class").indexOf("span")?c.append('<div class=""><div class="content"><table class="table" ><tr class="row row-fluid"><td class="span6"><div class="piechart"></div></td><td class="span6"><div class="legend"></div></td></tr></table></div></div>'):c.append('<div class="row-fluid"><div class="header"><div class="settings"></div><div class="move"></div><h3>'+b+'</h3></div><div class="content"><table class="table" ><tr class="row row-fluid"><td class="span12"><div class="piechart"></div></td></tr><tr class="row row-fluid"><td class="span12" style="padding-left:10px;"><div class="legend"></div></td></table></table></div></div>');
$(a).append(c)};D.debug.log("INFO","Jarvis.Dashboard.Visualisation.Pie",6,"JS source loaded");D.ba("jarvis.visualisation.report.SummaryTable");function Dc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$()}A=Dc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];this.A=[];this.q=[];this.i=D.a.K.i;$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.report.summarytable");0!=e.length&&($(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.SummaryTable",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-metrics");d&&(c.wa=$(b).d("data-limit"),c.wa||(c.wa=10),d=d.split(","),$(d).b(function(a){d[a]=
$.trim(d[a]);c.q.push(d[a])}),$(D.l.q).b(function(a,b){-1<d.indexOf(b.c)&&(c.q[d.indexOf(b.c)]=b)}),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),sender:c,pc:b})}),c.S.push(b))}}),$(c.i).bind("datechange",
function(){$(c.S).b(function(a,b){c.m(c,b)})}),$(".reportlist li")[0].click(),D.debug.log("INFO","Jarvis.Visualisation.Realtime.MetricBox",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"))};
function Ec(a,b){var c=D.f.ka.bc(null,{id:D.a.Fc.W}),d=c.Hb.c,e=_.dk(D.f.ka,function(a){return a.Hb?a.Hb.c:"(not set)"}),e=_.Vc(e,function(a){return a[0].Hb?a[0].Hb.ae:-1}),g=$('<div><table class="thelist"></table></div>'),k=$(g.find(".thelist")),l=!0,n=!0;_.b(e,function(b){if((b[0].Hb.c==d||"(not set)"==d)&&"(not set)"!=b[0].Hb.c){k.append("<tr><th "+(l?'style="padding-top:0;"':"")+">"+b[0].Hb.c+"</th></tr>");var e=$("<tr><td></td></tr>");e.find("td").append("<ul></ul>");_.b(b,function(b){if(b.ma!=
c.ma){var d=null,d=l&&n?$('<li class="active"><div class="name">'+b.c+'</div><div class="expand"></div>&nbsp;</li>'):$('<li class=""><div class="name">'+b.c+'</div><div class="expand"></div>&nbsp;</li>');d.D("click");d.s("click",function(){$(".thelist li.active").G("active");$(this).p("active");var c=a.S[0];$(c).d("data-dimensions",b.Db[0].w[0].c);$(c).d("data-metrics",b.Db[0].$d[0].B[0].c);a.m(a,c);$(".seefullreport").D("click");$(".seefullreport").s("click",function(){$(D).I("reportchange",b.ma)})});
e.find("ul").append(d);n&&(n=!1)}});k.append(e);l&&(l=!1)}});$(b).find(".reportlist").append(g)}
A.m=function(a,b){a||(a=Dc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-dimensions"),n=l;if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.l.A).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.l.A[d];c.A.push(l[a])});$(D.l.A).b(function(a,b){-1<l.indexOf(b.c)&&(c.A[l.indexOf(b.c)]=b)});var h=$(b).d("data-metrics"),m=h;if(!h)return"";h=h.split(",");$(h).b(function(a,b){var d=-1;$(D.l.q).b(function(a,
c){c.c==$.trim(b)&&(d=a)});h[a]=D.l.q[d];c.q.push(h[a])});$(D.l.q).b(function(a,b){-1<h.indexOf(b.c)&&(c.q[h.indexOf(b.c)]=b)});if(!h)return"";var p=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC",Kd:c.wa};p.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:n,B:m,t:c.t,la:!0,ca:D.a.ja.L,Gc:h[h.length-1].c,za:"DESC",Kd:c.wa},
p.push(d));D.l.vc(c,p,function(a,d){var e=[];$(d).b(function(a,b){try{e.push(b.data.va)}catch(c){}});!1==c.i.fa?c.update(a,l,h,e,b):c.qc(a,l,h,e,b)})};
A.update=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.empty();var k=$("<tr></tr>");$(d[0].na).b(function(a,b){var c=$('<th class="nopaddingtop">'+b.c+"</th>");b.N?c.p("metric"):c.p("dimension");k.append(c)});a=$('<th class="nopaddingtop">% '+d[0].na[1].c+"</th>");a.p("dimension");k.append(a);g.append(k);var l=0;$(d[0].Q).b(function(a,b){l+=parseFloat(b.k[1])});$(d[0].Q).b(function(a,b){var c=$("<tr></tr>");$(b.o).b(function(a,b){var e=$("<td>"+b+"</td>");d[0].na[a].N?e.p("metric"):
e.p("dimension");c.append(e)});var e=$('<td class="" style="min-width: 100px;"></td>');e.p("dimension");var k=100*(b.k[1]/l),q=Math.ceil(k)+"%",k=$('<div class="barwrapper"><span class="barvalue">'+D.M.R(k,2)+'%</span><div class="percentagebar" style="width:'+q+'"></div><td class="percentagecaption"></div>');e.u(k);c.append(e);g.append(c)})}};
A.qc=function(a,b,c,d,e){if(d[0]){var g=a.i,k=$($(e).find(".table"));k.empty();var l=$("<tr></tr>");$(d[0].na).b(function(a,b){var c=$('<th class="nopaddingtop">'+b.c+"</th>");b.N?c.p("metric"):c.p("dimension");l.append(c)});k.append(l);$(d[0].Q).b(function(a,b){var c=$("<tr></tr>"),e="",l=0,q=0;$(b.o).b(function(a,b){if(d[0].na[a].N){var g=$("<td></td>");g.p("metric empty")}else g=$("<td>"+b+"</td>"),g.p("dimension strong"),e=b;c.append(g)});k.append(c);c=$("<tr></tr>");$(b.o).b(function(a,b){if(d[0].na[a].N){var e=
$("<td>"+b+"</td>");e.p("metric empty")}else e=$('<td class="daterange">'+g.g(g.getDate().da)+" - "+g.g(g.getDate().V)+"</td>"),e.p("dimension");c.append(e)});k.append(c);c=$("<tr></tr>");$(b.o).b(function(a){if(d[0].na[a].N){var b;$(d[1].Q).b(function(c,d){d.o[0]==e&&(b=$("<td>"+d.o[a]+"</td>"))});b||(b=$("<td>N/A</td>"));b.p("metric")}else b=$('<td class="daterange">'+g.g(g.ya)+" - "+g.g(g.ra)+"</td>"),b.p("dimension");c.append(b)});k.append(c);c=$("<tr></tr>");q=l=0;$(b.k).b(function(a,b){if(d[0].na[a].N){var g;
l=b;$(d[1].Q).b(function(b,c){c.o[0]==e&&(q=c.k[a])});if(0<q){var h=xa(q,l),h=D.M.R(h,2);g=$("<td>"+h+"%</td>");g.p("metric strong");var k="",n=d[0].na[a];-1==n.Ha&&0>h&&(k="positive");-1==n.Ha&&0<h&&(k="negative");1==n.Ha&&0<h&&(k="positive");1==n.Ha&&0>h&&(k="negative");""==k&&(k="neutral")}else g=$("<td>N/A</td>"),g.p("metric strong"),k="neutral";g.p(k)}else g=$("<td>% Change</td>"),g.p("dimension strong");c.append(g)});k.append(c)})}};
A.Oa=function(a){$(a).d("data-title")&&$(a).d("data-title");$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var b=$('<div class="wrapper"><div class="reportlist"></div><div class="reporttable"></div></div>');b.find(".reporttable").append('<div class=""></div><div class="content"><table class="table table-striped"></table><div class="seefullreport">view full report</div></div></div>');$();Ec(this,b);$(a).append(b)};
D.debug.log("INFO","Jarvis.Visualisation.Realtime.MetricBox",6,"JS source loaded");D.ba("jarvis.visualisation.report.Table");
D.a.n.sh=function(){var a=(new Date).getMilliseconds();this.Z=this;this.Kc="line";this.t="Day";this.Xa=this.Ca=null;this.sa=[];this.Ia=0;this.Kb=!1;this.Sa=[];this.pa=this.Aa=this.ia=-1;this.za="DESC";this.La=1;this.xa=10;this.mode="table";this.A=[];this.q=[];this.vb=null;this.sa=[];this.oa=D.oa;this.i=D.a.K.i;this.Yh=0;D.f.w.$();D.f.B.$();this.Me(this);D.debug.log("INFO","jarvis.visualisation.report.Table",5,"...init ("+((new Date).getMilliseconds()-a)+"ms)");return this};A=D.a.n.sh.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds(),e=null,e=b?$(b):$(".jarvis.report.jtable");if(0!=e.length)return this.options=$.extend({xa:10,zd:0,Nf:3,defaultSelected:0},a),c.xa=this.options.xa,$(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.Table",6,"Applying to container ('"+this.id+"')");c.vb=b;if(0==c.A.length){var d=$(b).d("data-dimensions");if(!d)return;try{c.Sa=eval(d),$(c.Sa).b(function(a,b){$(b).b(function(b,d){$(D.f.w).b(function(e,
g){d==g.c&&(a==c.Ia&&c.A.push(g),c.Sa[a][b]=g)})})})}catch(e){c.Sa=[],c.Sa.push([d]),d=d.split(","),$(d).b(function(a){d[a]=$.trim(d[a]);c.A.push(d[a])}),$(D.f.w).b(function(a,b){-1<d.indexOf(b.c)&&(c.A[d.indexOf(b.c)]=b)})}}var h=$(b).d("data-metrics");h&&(h=h.split(","),$(h).b(function(a){h[a]=$.trim(h[a]);c.q.push(h[a])}),$(D.f.B).b(function(a,b){-1<h.indexOf(b.c)&&(c.q[h.indexOf(b.c)]=b)}),$(b).empty(),c.Oa(b),c.m(c,b),$(c).Fa("data"),$(c).bind("data",function(a,b){b.data=$(c).data().data}),$(c).Fa("click"),
$(c).bind("click",function(){$(c).I("clicked",$(this).data().data)}),$(c.i).bind("datechange",function(){c.m(c);c.i.fa?($("button.btn_pie").d("disabled","true"),$("button.btn_perf").d("disabled","true")):($("button.btn_pie").Vf("disabled"),$("button.btn_perf").Vf("disabled"))}),$(D.a.n).bind("filter",function(){c.m(c)}),c.ea=function(){$(c.i).Fa("datechange");$(c).Fa("data");$(c).Fa("click");$(D.a.n).Fa("filter");try{D.state[c.uid()].sa=[]}catch(a){}})}}),D.debug.log("INFO","jarvis.visualisation.report.Table",
5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"),this};
A.m=function(a){a||(a=D.a.n.sh);var b=a;b.La=1;var c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(b.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;var k="";$(b.A).b(function(a,b){k+=b.c+", "});var k=k.substring(0,k.length-2),l="";$(b.q).b(function(a,b){l+=b.c+", "});l=l.substring(0,l.length-2);a=[];c={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:k,B:l,t:b.t,la:!0,ca:D.a.n.L,Md:b.q[0].c,Ld:"DESC"};a.push(c);b.i.fa&&(c={id:"compare_primary",ta:D.e.g(e,
"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:k,B:l,t:b.t,la:!0,ca:D.a.n.L,Md:b.q[0].c,Ld:"DESC"},a.push(c));D.l.vc(b,a,function(a,c){var d=[];$(c).b(function(a,c){var e=c.data.va,g=c.data.va.Q;if(0==b.Yh&&(b.Yh=1,0<b.options.defaultSelected)){for(var h=0;h<b.options.defaultSelected;h++){var l=k+"="+[g[h].k[0]]+"[AND]";$(D.a.n).I("addpartialfilter-quick",l);b.sa.push(l)}$(D.a.n).I("filter")}d.push({A:b.A,q:b.q,data:e})});a.zg=d;b.update(a,k,l,d)})};
A.update=function(a){var b=a.zg[0],c,d;a.i.fa&&(c=a.zg[1],c=c.data.Q);var e=b.data.na,g=e,k=b.data.Q,l=0,n=0,h=0,m=0,p=$($(a.vb).find(".table"));p.find("tr").remove();-1==a.ia&&$(e).b(function(b,c){c.N||(a.ia=b+1)});-1==a.Aa&&($(e).b(function(b,c){c.N||(a.Aa=b+1)}),a.pa=a.Aa);k=$(k).sort(function(b,c){var d=b.k[a.ia],g=c.k[a.ia];e[a.ia].N&&(d=parseFloat(d),g=parseFloat(g));return"DESC"==a.za?d<g?1:-1:d>g?1:-1});c=$(c).sort(function(b,c){var d=b.k[a.ia],g=c.k[a.ia];e[a.ia].N&&(d=parseFloat(d),g=parseFloat(g));
return"DESC"==a.za?d<g?1:-1:d>g?1:-1});var s=k,s=s.slice((a.La-1)*a.xa,a.La*a.xa);d=c;if("pie"==a.mode||"perf"==a.mode||"compare"==a.mode){var q=[],u="";$(s).b(function(b,c){var d={o:[],k:[]};$(e).b(function(a,b){b.N||(d.o.push(c.o[a]),d.k.push(c.k[a]))});$(e).b(function(b,e){e.N&&b==a.Aa&&(d.o.push(c.o[b]),d.k.push(c.k[b]))});$(e).b(function(b,e){e.N&&b==a.pa&&(u=e.c,d.o.push(c.o[b]),d.k.push(c.k[b]))});q.push(d)});s=q;$(k).b(function(b,c){$(e).b(function(b,d){d.N&&b==a.Aa&&(h+=parseFloat(c.k[b]));
d.N&&b==a.pa&&(u=d.c,m+=parseFloat(c.k[b]))})});$(s).b(function(a,b){s[a].o[b.o.length-1]=100*(b.k[b.o.length-1]/m);s[a].k[b.k.length-1]=100*(b.k[b.k.length-1]/m)})}l=h;n=m;if(("pie"==a.mode||"perf"==a.mode||"compare"==a.mode)&&a.i.fa){var v=[],u="";$(d).b(function(b,c){var d={o:[],k:[]};$(e).b(function(a,b){b.N||(d.o.push(c.o[a]),d.k.push(c.k[a]))});$(e).b(function(b,e){e.N&&b==a.Aa&&(d.o.push(c.o[b]),d.k.push(c.k[b]))});$(e).b(function(b,e){e.N&&b==a.pa&&(u=e.c,d.o.push(c.o[b]),d.k.push(c.k[b]))});
v.push(d)});d=v;m=h=0;$(c).b(function(b,c){$(e).b(function(b,d){d.N&&b==a.Aa&&(h+=parseFloat(c.k[b]));d.N&&b==a.pa&&(u=d.c,m+=parseFloat(c.k[b]))})});$(d).b(function(a,b){0==m?(d[a].o[b.o.length-1]=0,d[a].k[b.k.length-1]=0):(d[a].o[b.o.length-1]=100*(b.k[b.o.length-1]/m),d[a].k[b.k.length-1]=100*(b.k[b.k.length-1]/m))})}if("pie"==a.mode||"perf"==a.mode||"compare"==a.mode)v=[],$(e).b(function(b,c){c.N&&b==a.Aa?v.push(c):c.N||v.push(c)}),e=v,e.push({c:u,N:"Special"});var r=$("<tr></tr>"),z=$('<th class="check"></th>');
r.append(z);z=$('<th class="id"></th>');r.append(z);var w=0;$(e).b(function(b,c){c.N?("pie"==a.mode||"perf"==a.mode||"compare"==a.mode?b==e.length-2?(z=$('<th class="metric" data-sortindex="'+w+'"><select class="input-medium metricpicker"></select></th>'),$(g).b(function(b,c){c.N&&(z.find(".metricpicker").append('<option value="'+c.c+'" '+(b==a.Aa?"selected":"")+">"+c.c+"</option>"),z.p("sortkey"),z.p(a.za))}),z.find(".metricpicker").D("click"),z.find(".metricpicker").s("click",function(a){a.stopPropagation()}),
z.find(".metricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.Aa=c)});a.update(a)})):z=$('<th class="metric" data-sortindex="'+w+'">'+e[e.length-1].c+"</th>"):"pie"!=a.mode&&(z=$('<th class="metric" data-sortindex="'+w+'">'+c.c+"</th>"),w==a.ia&&(z.p("sortkey"),z.p(a.za))),z&&("pie"!=a.mode&&"perf"!=a.mode&&"compare"!=a.mode||"pie"==a.mode&&b<e.length-1||("perf"==a.mode||"compare"==a.mode)&&b<e.length-1?(z.D("click"),z.s("click",function(b){b.stopPropagation();a.ia==
$(this).d("data-sortindex")?a.za="DESC"==a.za?"ASC":"DESC":a.za="DESC";a.ia=$(this).d("data-sortindex");r.find("th").G("sortkey");r.find("th").G("ASC");r.find("th").G("DESC");$(this).p("sortkey");$(this).p(a.za);a.update(a)})):z.p("special"),r.append(z))):(0==b?z=$('<th class="dimension" data-sortindex="'+w+'">'+c.c+"</th>"):(z=$('<th class="dimension" data-sortindex="'+w+'">'+c.c+'<i class="jarvis removesecondarydimension icon-remove" style=" margin-top: 2px; margin-left: 5px; cursor: pointer; "></i></th>'),
$(z.find(".removesecondarydimension")).D("click"),$(z.find(".removesecondarydimension")).s("click",function(b){var d=-1;$(a.A).b(function(a,b){b.c==c.c&&(d=a)});-1<d&&(a.A.splice(d,1),a.ia=parseInt(a.ia)-1,a.Aa=parseInt(a.Aa)-1,a.pa=parseInt(a.pa)-1,a.La=1,a.m(a));b.stopPropagation()})),w==a.ia&&(z.p("sortkey"),z.p(a.za)),z.D("click"),z.s("click",function(b){b.stopPropagation();a.ia==$(this).d("data-sortindex")?a.za="DESC"==a.za?"ASC":"DESC":a.za="DESC";a.ia=$(this).d("data-sortindex");r.find("th").G("sortkey");
r.find("th").G("ASC");r.find("th").G("DESC");$(this).p("sortkey");$(this).p(a.za);a.update(a)}),r.append(z));w++});p.append(r);0==k.length&&p.append('<tr class="empty"><td style="text-align: center;" colspan="'+parseInt(e.length+2)+'">There is no data for this view.</td></tr>');a.i.fa?$(s).b(function(b,c){r=$("<tr ></tr>");t=$('<td class="check" style="vertical-align: middle;"></td>');"pie"==a.mode?t.append('<div style="height:11px;width:11px;background-color: '+(10<=b?D.oa[11]:D.oa[b])+';"></div>'):
t.append('<input class="checkfilter" type=checkbox>');r.append(t);t=$('<td class="id">'+parseInt((a.La-1)*a.xa+b+1)+".</td>");r.append(t);var h="",m="";$(e).b(function(b){t=$("<td></td>");e[b].N?t.p("metricvalue"):(t.u('<span class="drilldownlink c">'+c.o[b]+"</span>"),"pie"!=a.mode?t.u('<span class="drilldownlink c">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="drilldownlink c">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(c.o[b],2)+"%</span>"),
0==b&&(t.p("dimensionvalue"),m=e[b].c+"="+c.k[b]+"[AND]"),h+=e[b].c+"="+c.k[b]+"[AND]");b==a.ia&&t.p("sortkey");r.append(t)});if("pie"==a.mode){if(0==b){var q=$('<th class="special pie">Contribution to total: <select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});
q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);t=$('<td class="special"></td>');a.i.fa?t.d("rowspan",3*a.xa):t.d("rowspan",a.xa);r.append(t);a.Bg(a,t,e,s,k,l,n)}}else if("perf"==a.mode){if(0==b){q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":
"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);var u=$(p.find("tr")[0]);$(u.find("th")[u.find("th").length-2]).remove()}$(r.find("td")[r.find("td").length-1]).remove()}else"compare"==a.mode&&(0==b&&(q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>'),
$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")}),q.find(".comparemetricpicker").D("click"),q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()}),q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)}),$(p.find("tr")[0]).append(q),u=$(p.find("tr")[0]),$(u.find("th")[u.find("th").length-2]).remove()),$(r.find("td")[r.find("td").length-
1]).remove());var w=r.find(".checkfilter");w.d("data-filter",h);w.D("click");w.s("click",function(){w.Qe(":checked")?(D.a.n.lg(D.a.n.L+h),a.sa.push(D.a.n.L+h)):(D.a.n.nd(D.a.n.L+h),-1<a.sa.indexOf(D.a.n.L+h)&&a.sa.splice(a.sa.indexOf(D.a.n.L+h),1))});-1<a.sa.indexOf(h)?w.d("checked",!0):w.d("checked",!1);r.find(".drilldownlink").d("data-filter",m);r.find(".dimensionvalue .drilldownlink").D("click");r.find(".dimensionvalue .drilldownlink").s("click",function(){$(this).D("click");a.Ia<a.Sa.length-1&&
a.Ia++;a.A.splice(0,a.A.length);$(a.Sa[a.Ia]).b(function(b,c){a.A.push(c)});$(a.sa).b(function(a,b){D.a.n.nd(b)});a.sa=[];D.debug.log("INFO","jarvis.visualisation.report.Table",6,"Drilldown to level "+a.Ia+": "+m);D.a.n.Ed(D.a.n.L+m)});p.append(r);r=$("<tr></tr>");t=$('<td class="check"></td>');r.append(t);t=$('<td class="id"></td>');r.append(t);$(e).b(function(b){t=$("<td></td>");e[b].N?(t.p("metricvalue"),"pie"!=a.mode?t.u('<span class="drilldownlink d">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-
1?t.u('<span class="drilldownlink d">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(c.o[b],2)+"%</span>")):(t.p(""),t.d("colspan",a.A.length),0==b?t.u(D.e.g(a.i.getDate().da)+" - "+D.e.g(a.i.getDate().V)):t=null);b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)});if("perf"==a.mode){$(r.find("td")[r.find("td").length-1]).remove();var v=c.o.length-1;t=$('<td class="special bar">'+c.o[v]+"</td>");var z=Math.floor(c.k[v])-5+"px",ca=$('<div class="barwrapper"><div class="percentagebar" style="width:'+
z+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[v],2)+"%</span></div>");t.u(ca);r.append(t)}else"compare"==a.mode&&($(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+c.o[v]+"</td>"),z=Math.floor(c.k[v])-5+"px",ca=$('<div class="barwrapper"><div class="percentagebar" style="width:'+z+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[v],2)+"%</span></div>"),t.u(ca),r.append(t));p.append(r);r=$("<tr></tr>");t=$('<td class="check"></td>');
r.append(t);t=$('<td class="id"></td>');r.append(t);var F="";$(e).b(function(a){null==e[a].N&&(F+=c.k[a])});var y;$(d).b(function(a,b){var c="";$(e).b(function(a){null==e[a].N&&(c+=b.k[a])});F==c&&(y=b)});$(e).b(function(b){t=$("<td></td>");if(e[b].N){t.p("metricvalue");try{"pie"!=a.mode?t.u('<span class="drilldownlink e">'+y.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="drilldownlink e">'+y.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(y.o[b],2)+"%</span>")}catch(c){"pie"!=
a.mode?t.u('<span class="drilldownlink f">N/A</span>'):"pie"==a.mode&&b!=e.length-1?t.u('<span class="drilldownlink f">N/A</span>'):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">N/A</span>')}}else t.p(""),t.d("colspan",a.A.length),0==b?t.u(D.e.g(a.i.getDate().ya)+" - "+D.e.g(a.i.getDate().ra)):t=null;b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)});if("perf"==a.mode){try{$(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+y.o[v]+"</td>"),z=Math.floor(y.k[v])-
5+"px",ca=$('<div class="barwrapper"><div class="percentagebar" style="width:'+z+'"></div><td class="percentagecaption"><span >'+D.M.R(y.k[v],2)+"%</span></div>")}catch(L){t=$('<td class="special bar">0</td>'),ca=$('<div class="barwrapper"><div class="percentagebar" style="width:0px"></div><td class="percentagecaption"><span >'+D.M.R(0,2)+"%</span></div>")}t.u(ca);r.append(t)}else if("compare"==a.mode){try{$(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+
y.o[v]+"</td>"),z=Math.floor(y.k[v])-5+"px",ca=$('<div class="barwrapper"><div class="percentagebar" style="width:'+z+'"></div><td class="percentagecaption"><span >'+D.M.R(y.k[v],2)+"%</span></div>")}catch(P){t=$('<td class="special bar">0</td>'),ca=$('<div class="barwrapper"><div class="percentagebar" style="width:0px"></div><td class="percentagecaption"><span >'+D.M.R(0,2)+"%</span></div>")}t.u(ca);r.append(t)}p.append(r);"table"==a.mode&&(r=$("<tr></tr>"),t=$('<td class="check"></td>'),r.append(t),
t=$('<td class="id"></td>'),r.append(t),$(e).b(function(b,d){t=$("<td></td>");if(e[b].N){var g=!1;t.p("metricvalue comparison");try{var h=xa(y.k[b],c.k[b])}catch(k){h=0,g=!0}var l="";-1==d.Ha&&0>h&&(l="positive");-1==d.Ha&&0<h&&(l="negative");1==d.Ha&&0<h&&(l="positive");1==d.Ha&&0>h&&(l="negative");""==l&&(l="neutral");"pie"!=a.mode?g?t.u("N/A"):t.u(D.M.R(h,2)+"%"):"pie"==a.mode&&b!=e.length-1?g?t.u("N/A"):t.u(D.M.R(h,2)+"%"):"pie"==a.mode&&b==e.length-1&&(g?t.u("N/A"):t.u(D.M.R(h,2)+"%"));t.p(l)}else t.p("comparison"),
t.d("colspan",a.A.length),0==b?t.u("% Change"):t=null;b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)}),p.append(r))}):$(s).b(function(b,c){r=$("<tr ></tr>");q=$('<td class="check" style="vertical-align: middle;"></td>');"pie"==a.mode?q.append('<div style="height:11px;width:11px;background-color: '+(10<=b?D.oa[11]:D.oa[b])+';"></div>'):q.append('<input class="checkfilter" type=checkbox>');r.append(q);q=$('<td class="id">'+parseInt((a.La-1)*a.xa+b+1)+".</td>");r.append(q);var d="",h="";$(e).b(function(b){q=
$("<td></td>");e[b].N?q.p("metricvalue"):(0==b&&(q.p("dimensionvalue"),h=e[b].c+"="+c.k[b]+"[AND]"),d+=e[b].c+"="+c.k[b]+"[AND]");b==a.ia&&q.p("sortkey");"pie"!=a.mode?q.u('<span class="drilldownlink a">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?q.u('<span class="drilldownlink b">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&q.u('<span class="">'+D.M.R(c.o[b],2)+"%</span>");r.append(q)});var m=r.find(".checkfilter");m.d("data-filter",d);m.D("click");m.s("click",function(){m.Qe(":checked")?
(D.a.n.lg(D.a.n.L+d),a.sa.push(D.a.n.L+d)):(D.a.n.nd(D.a.n.L+d),-1<a.sa.indexOf(D.a.n.L+d)&&a.sa.splice(a.sa.indexOf(D.a.n.L+d),1));0<a.options.zd&&($(".checkfilter:checked").length<=a.options.zd?$(".checkfilter:checked").d("disabled","disabled"):$(".checkfilter:checked").Vf("disabled"))});0<a.options.zd&&($(".checkfilter:checked").length<=a.options.zd?$(".checkfilter:checked").d("disabled","disabled"):$(".checkfilter:checked").Vf("disabled"));-1<a.sa.indexOf(d)?m.d("checked",!0):m.d("checked",!1);
a.Ia<=a.Sa.length-1&&(r.find(".drilldownlink").d("data-filter",h),r.find(".dimensionvalue .drilldownlink").D("click"),r.find(".dimensionvalue .drilldownlink").s("click",function(){$(this).D("click");a.Ia<a.Sa.length-1&&a.Ia++;a.A.splice(0,a.A.length);$(a.Sa[a.Ia]).b(function(b,c){a.A.push(c)});$(a.sa).b(function(a,b){D.a.n.nd(b)});a.sa=[];D.debug.log("INFO","jarvis.visualisation.report.Table",6,"Drilldown to level "+a.Ia+": "+h);D.a.n.Ed(D.a.n.L+h)}));if(a.Ia==a.Sa.length-1&&""!=D.a.n.L&&(1==s.length||
1<s.length&&s[0].o[0]==s[1].o[0])){var q=r.find(".dimensionvalue"),t=r.find(".dimensionvalue .drilldownlink");t.D("click");t.G("drilldownlink");q.G("dimensionvalue")}if("pie"==a.mode){if(0==b){var u=$('<th class="special pie">Contribution to total: <select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&u.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")});u.find(".comparemetricpicker").D("click");u.find(".comparemetricpicker").s("click",
function(a){a.stopPropagation()});u.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(u);q=$('<td class="special"></td>');a.i.fa?q.d("rowspan",3*a.xa):q.d("rowspan",a.xa);r.append(q);a.Bg(a,q,e,s,k,l,n)}}else if("perf"==a.mode){0==b&&(u=$('<th class="special perf"><select class="input-medium comparemetricpicker"></select></th>'),$(g).b(function(b,c){c.N&&u.find(".comparemetricpicker").append('<option value="'+
c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")}),u.find(".comparemetricpicker").D("click"),u.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()}),u.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)}),$(p.find("tr")[0]).append(u),t=$(p.find("tr")[0]),$(t.find("th")[t.find("th").length-2]).remove());$(r.find("td")[r.find("td").length-1]).remove();var t=c.o.length-1,q=$('<td class="special bar">'+c.o[t]+
"</td>"),w=Math.floor(c.k[t])+"%",t=$('<div class="barwrapper"><div class="percentagebar" style="width:'+w+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[t],2)+"%</span></div>");q.u(t);r.append(q)}else"compare"==a.mode?(0==b&&(u=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>'),$(g).b(function(b,c){c.N&&u.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")}),u.find(".comparemetricpicker").D("click"),
u.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()}),u.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)}),$(p.find("tr")[0]).append(u),t=$(p.find("tr")[0]),$(t.find("th")[t.find("th").length-2]).remove()),$(r.find("td")[r.find("td").length-1]).remove(),t=c.o.length-1,q=$('<td class="special bar">'+c.o[t]+"</td>"),w=Math.floor(c.k[t])-5+"px",t=$('<div class="barwrapper"><div class="percentagebar" style="width:'+
w+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[t],2)+"%</span></div>"),q.u(t),r.append(q)):$(p.find("tr")[0]).find(".special").remove();p.append(r)});c=(a.La-1)*a.xa+1;b=a.La*a.xa;b>k.length&&(b=k.length);if("pie"==a.mode&&s.length<a.xa)for(R=s.length;R<a.xa;R++){var r=$('<tr class="emptyrowfiller '+(R==s.length?"first":"")+'"></tr>'),t=$('<td colspan="'+parseInt(e.length+2)+'">&nbsp;</td>');r.append(t);p.append(r);if(10<p.find("tr").length)break}R=$($(a.vb).find(".bottomfooter"));R.find(".pager .pageinfoselect").U(a.xa);
R.find(".pageinfo").u(c+" - "+b+" of "+k.length);c=R.find(".pagecontrol");1<a.La?$(c).find(".prev").G("disabled"):$(c).find(".prev").p("disabled");b<k.length?$(c).find(".next").G("disabled"):$(c).find(".next").p("disabled");b=$(a.vb).find(".tabletype");b.find("button").b(function(){$(this).G("active")});b.find(".btn_"+this.mode).p("active");b=$(a.vb).find(".tablecontrol");if(1<a.A.length){var F="Secondary dimension"+(2<a.A.length?"s":"")+": ";$(a.A).b(function(a,b){0<a&&(F+=b.c+", ")});F=F.substring(0,
F.length-2);$(b).find(".secondarybutton").u(F);L=new D.a.K.w({h:L,prefix:"Secondary dimension: ",kb:"Add secondary dimension...",selected:1==a.A.length?"":a.A[1].c})}else{var L=$('<div class="jarvis picker dimensions" data-type="button"></div>');$(b).find(".secondary").empty();$(b).find(".secondary").append(L);L=new D.a.K.w({h:L,prefix:"Secondary dimension: ",kb:"Add secondary dimension...",selected:1==a.A.length?"":a.A[1].c});$(L).bind("select",function(b,c){c=_.find(D.f.w,function(a){return a.c==
c});-1==a.A.indexOf(c)&&(1==a.A.length?(a.ia=parseInt(a.ia)+1,a.Aa=parseInt(a.Aa)+1,a.pa=parseInt(a.pa)+1):a.A.splice(1,1),a.A.push(c),a.m(a))})}a.Kb?($(".japi.primarydimension").G("on"),$(".drilldownlink").D("click"),$(".drilldownlink").p("disabled"),$(".drilldownlink").parent().p("disabled")):($(".japi.primarydimension").u(a.Sa[a.Ia][0].c),$(".japi.primarydimension").p("on"),$(".japi.other.picker").G("on"),$(".japi.other.picker .jbtn").u('Other <span class="caret"></span>'));0<a.Ia||0==a.Ia&&1==
a.Sa.length?$(".japi.other.picker").O("visibility","visible"):$(".japi.other.picker").O("visibility","hidden");a.cb(a);if(1==a.Yh&&(a.Yh=2,0<a.options.defaultSelected))for(var R=0;R<a.options.defaultSelected;R++);$(D).I("tableresize")};A.qc=f();
A.Bg=function(a,b,c,d,e,g){new Highcharts.fb({F:{Tb:$(b).get(0),backgroundColor:null,ni:null,Qf:null,oi:!1,width:300,height:300,type:"pie",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,Xc:0,Zc:0,Yc:0,Wc:0},title:{text:null},lb:{Ra:function(){return"<b>"+this.v.name+"</b><br/>"+this.j.name+": "+D.M.R(this.ld,2)+" %"}},pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!1},md:{Ye:{$f:!0,size:"90%"}},j:[{name:function(){var a="test";return a=c[c.length-2].c}(),type:"pie",data:function(){var a=[],b=
0;$(d).b(function(d,e){if(10>d){var m="";$(c).b(function(a,b){b.N||(m+=c[a].c+": "+e.o[a]+"<br/>")});var m=m.substring(0,m.length-5),p=0,p=100*(e.k[e.k.length-2]/g);b+=p;a.push({name:m,y:p,color:D.oa[d]})}});0<100-Math.floor(b)&&a.push({name:"Other",y:100-b,color:D.oa[11]});return a}(),lc:{Ra:function(){return 5<this.y?this.v.name:null},color:"white",Rd:-30,enabled:!1}},{name:function(){var a="test";return a=c[c.length-1].c}(),type:"pie",$h:"70%",data:function(){var b=[];if(a.Aa!=a.pa){var e=0;$(d).b(function(a,
d){if(10>a){var p="";$(c).b(function(a,b){b.N||(p+=c[a].c+": "+d.o[a]+"<br/>")});p=p.substring(0,p.length-5);g=d.k[d.k.length-1];e+=g;b.push({name:p,y:g})}});if(0<100-Math.floor(e)){var g=100-e;b.push({name:"Other",y:g,color:D.oa[11]})}}return b}(),lc:{Ra:function(){return 1<this.y?"<b>"+this.v.name+":</b> "+this.y+"%":null},enabled:!1}}]})};
A.Oa=function(a){var b=this,c,d=$('<table class="table table-striped"></table>');$(a).append(d);d=$('<div class="topheader"></div>');c=$('<div class="headercontent"></div>');d.append(c);$(a).Zg(d);var e=$('<div class="bottomfooter"></div>'),g=$('<div class="footercontent"></div>');g.append('<div class="pagecontrol"></div><div class="pageinfo"></div><div class="pager"></div>');c='Show rows: <select class="pageinfoselect input-mini"><option value=10 '+(10==b.xa?"selected":"")+" >10</option><option value=25 "+
(25==b.xa?"selected":"")+" >25</option><option value=50 "+(50==b.xa?"selected":"")+" >50</option><option value=100 "+(100==b.xa?"selected":"")+" >100</option><option value=250 "+(250==b.xa?"selected":"")+" >250</option><option value=500 "+(500==b.xa?"selected":"")+" >500</option></select>";g.find(".pager").u(c);g.find(".pager .pageinfoselect").D("change");g.find(".pager .pageinfoselect").s("change",function(){b.xa=$(this).U();b.update(b)});c="";g.find(".pageinfo").u(c);e.append(g);c='<div class="btn-group"><button class="btn prev disabled"></button><button class="btn next disabled"></button></div>';
g.find(".pagecontrol").u(c);g.find(".pagecontrol .prev").D("click");g.find(".pagecontrol .prev").s("click",function(){$(this).Ea("disabled")||(b.La-=1,b.update(b))});g.find(".pagecontrol .next").D("click");g.find(".pagecontrol .next").s("click",function(){$(this).Ea("disabled")||(b.La+=1,b.update(b))});e.append(g);$(a).append(e);c='<div class="drilldownwrapper"><span class="japi dimensionpickerlabel" style="display: inline-block;font: normal 12px Arial;height: 22px;vertical-align: middle;">Primary Dimension: </span><li class="japi primarydimension" data-id="Nane" style="">Name</li>';
c+='<div class="japi other picker btn-group  jarvis dimensions" style="display:inline;">';c+='<li class="japi other picker dropdown" data-type="button" data-toggle="dropdown" style="background-color:white;position: absolute;display: inline-block; margin-left:5px;color:#08C;cursor:pointer;" onclick="">';c+="Other";c+='<span class="caret" style=""></span></li><div class="japi otherlist"></div></div></div></div></div></div>';d.append(c);var k=$('<div class="tablecontrol"></div>');k.append('<div class="secondary btn-group"><button class="btn secondarywrapper dropdown-toggle dropdown" data-toggle="dropdown"><span class="secondarybutton">Add secondary dimension...</span>&nbsp;<span class="caret"></span></button><div class="secondarylist"><ul class="jarvis secondarylistcontainer dropdown-menu"></ul></div></div>');
k.append('<div class="toolbar"><div class="tabletype"></div><div class="search input-prepend"><input type="text" class="quicksearch span2" placeholder="Search..."><span class="add-on"><i class="searchicon icon-search"></i></span></div><span class="advancedcaption">Advanced</span></div></div>');a=$('<div class="toolbaroptions btn-group" data-toggle="buttons-radio" ></div>');a.append('<button rel="tooltip" title="Table" class="btn btn_table active"><img src="'+D.hostname+'/assets/img/glyphicons_114_list.png""/></i></button>');
a.append('<button rel="tooltip" title="Pie chart" class="btn btn_pie"><img src="'+D.hostname+'/assets/img/glyphicons_042_pie_chart.png"/></button>');a.append('<button rel="tooltip" title="Performance" class="btn btn_perf"><img src="'+D.hostname+'/assets/img/glyphicons_110_align_left.png"/></button>');k.find(".add-on").D("click");k.find(".add-on").s("click",function(){var a=$(k.find(".quicksearch")[k.find(".quicksearch").length-1]);$(b.sa).b(function(a,b){D.a.n.nd(b)});b.sa=[];""==a.U()?D.a.n.Ed(""):
(a=b.A[0].c+"="+a.U()+"[AND]",D.a.n.Ed(a))});k.find(".quicksearch").ft(function(a){13==a.which&&k.find(".add-on").click()});a.find(".btn_table").D("click");a.find(".btn_table").s("click",function(){b.mode="table";b.update(b)});a.find(".btn_pie").D("click");a.find(".btn_pie").s("click",function(){b.mode="pie";b.ia=-1;b.update(b)});a.find(".btn_perf").D("click");a.find(".btn_perf").s("click",function(){b.mode="perf";b.ia=-1;b.update(b)});a.find(".btn_compare").D("click");a.find(".btn_compare").s("click",
function(){b.mode="compare";b.ia=-1;b.update(b)});k.find(".tabletype").u(a);$(k.find(".jarvis.secondarylistcontainer")).append($('<li class="nav-header">'+b.A[0].c+"</li>"));a=$('<div class="jarvis picker dimensions" data-type="button"></div>');$(k).find(".secondary").empty();$(k).find(".secondary").append(a);a=new D.a.K.w({h:a,prefix:"Secondary dimension: ",kb:"Add secondary dimension...",selected:1==b.A.length?"":b.A[1].c});$(a).bind("select",function(a,c){c=_.find(D.f.w,function(a){return a.c==
c});-1==b.A.indexOf(c)&&(1==b.A.length?(b.ia=parseInt(b.ia)+1,b.Aa=parseInt(b.Aa)+1,b.pa=parseInt(b.pa)+1):b.A.splice(1,1),b.A.push(c),b.m(b))});a=$(d.find(".japi.other.picker.dropdown"));a=new D.a.K.w({h:a,prefix:"",kb:"Other",type:"none",selected:b.Kb?b.A[0].c:""});$(a).bind("select",function(a,c){c=_.find(D.f.w,function(a){return a.c==c});-1==b.A.indexOf(c)&&(b.A[0]=c,b.Kb=!0,b.m(b))});$(".japi.primarydimension").D("click");$(".japi.primarydimension").s("click",function(){var a=$(".japi.primarydimension").text(),
a=_.find(D.f.w,function(b){return b.c==a});b.A[0]=a;b.Kb=!1;b.m(b)});d.append(k);c=$('<div class="advancedsearch"><div class="advancedsearch_container"></div></div>');a=new D.a.h.ca({h:c});d.append(c);$(".advancedcaption").D("click");$(".advancedcaption").s("click",function(){$("#modal-notimplemented").fc("show")});$(".japi.primarydimension").u(b.Sa[b.Ia][0].c);b.Kb?($(".japi.primarydimension").G("on"),$(".drilldownlink").D("click"),$(".drilldownlink").p("disabled"),$(".drilldownlink").parent().p("disabled")):
($(".japi.primarydimension").p("on"),$(".japi.other.picker").G("on"),$(".japi.other.picker .jbtn").u('Other <span class="caret"></span>'));0<b.Ia||0==b.Ia&&1==b.Sa.length?$(".japi.other.picker").O("visibility","visible"):$(".japi.other.picker").O("visibility","hidden")};A.uid=ga("table-1234");
A.cb=function(a){D.state[a.uid()]||(D.state[a.uid()]={});D.debug.log("INFO","jarvis.visualisation.report.Table",6,'Table "'+a.uid()+'" saving state.');D.state[a.uid()].Kc=a.Kc;D.state[a.uid()].t=a.t;D.state[a.uid()].Ca=a.Ca;D.state[a.uid()].Xa=a.Xa;D.state[a.uid()].ia=a.ia;D.state[a.uid()].Aa=a.Aa;D.state[a.uid()].pa=a.pa;D.state[a.uid()].za=a.za;D.state[a.uid()].La=a.La;D.state[a.uid()].xa=a.xa;D.state[a.uid()].mode=a.mode;D.state[a.uid()].Ia=a.Ia;D.state[a.uid()].Kb=a.Kb;D.state[a.uid()].sa=a.sa};
A.Me=function(a){D.debug.log("INFO","jarvis.visualisation.report.Table",6,'Table "'+a.uid()+'" loading state.');null!=D.state[a.uid()]&&(a.Kc=D.state[a.uid()].Kc,a.t=D.state[a.uid()].t,a.Ca=D.state[a.uid()].Ca,a.Xa=D.state[a.uid()].Xa,a.ia=D.state[a.uid()].ia,a.Aa=D.state[a.uid()].Aa,a.pa=D.state[a.uid()].pa,a.za=D.state[a.uid()].za,a.La=D.state[a.uid()].La,a.xa=D.state[a.uid()].xa,a.mode=D.state[a.uid()].mode,a.Ia=D.state[a.uid()].Ia,a.Kb=D.state[a.uid()].Kb,a.sa=D.state[a.uid()].sa)};
D.debug.log("INFO","jarvis.visualisation.report.Table",6,"JS source loaded");D.ba("jarvis.visualisation.report.TableEx");D.a.n.$i=function(){var a=(new Date).getMilliseconds();this.Z=this;this.Kc="line";this.t="Day";this.Xa=this.Ca=null;this.sa=[];this.Ia=0;this.Kb=!1;this.Sa=[];this.pa=this.Aa=this.ia=-1;this.za="DESC";this.La=1;this.xa=50;this.mode="table";this.A=[];this.q=[];this.vb=null;this.sa=[];this.oa=D.oa;this.i=D.a.K.i;D.f.w.$();D.f.B.$();this.Me(this);D.debug.log("INFO","jarvis.visualisation.report.Table",5,"...init ("+((new Date).getMilliseconds()-a)+"ms)");return this};
A=D.a.n.$i.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;var e=null,e=b?$(b):$(".jarvis.report.jtable");if(0!=e.length)return $(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.TableEx",6,"Applying to container ('"+this.id+"')");c.vb=b;if(0==c.A.length){var d=$(b).d("data-dimensions");if(!d)return;try{c.Sa=eval(d),$(c.Sa).b(function(a,b){$(b).b(function(b,d){$(D.f.w).b(function(e,g){d==g.c&&(c.A.push(g),c.Sa[a][b]=g)})})})}catch(e){c.Sa=
[],c.Sa.push([d]),d=d.split(","),$(d).b(function(a){d[a]=$.trim(d[a]);c.A.push(d[a])}),$(D.f.w).b(function(a,b){-1<d.indexOf(b.c)&&(c.A[d.indexOf(b.c)]=b)})}}var h=$(b).d("data-metrics");h&&(h=h.split(","),$(h).b(function(a){h[a]=$.trim(h[a]);c.q.push(h[a])}),$(D.f.B).b(function(a,b){-1<h.indexOf(b.c)&&(c.q[h.indexOf(b.c)]=b)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).Fa("data"),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).Fa("click"),$(this).bind("click",function(){$(this).I("clicked",
$(this).data().data)}),$(c.i).Fa("datechange"),$(c.i).bind("datechange",function(){c.m(c)}),$(D.a.n).Fa("filter"),$(D.a.n).bind("filter",function(){c.m(c)}),c.ea=function(){$(c.i).Fa("datechange");$(c).Fa("data");$(c).Fa("click");$(D.a.n).Fa("filter")})}}),D.debug.log("INFO","jarvis.visualisation.report.TableEx",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"),this};
A.m=function(a){a||(a=D.a.n.$i);var b=a,c=D.a.K.i.getDate().da,d=D.a.K.i.getDate().V;if(b.i.fa)var e=D.a.K.i.getDate().ya,g=D.a.K.i.getDate().ra;var k="";$(b.A).b(function(a,b){k+=b.c+", "});var k=k.substring(0,k.length-2),l="";$(b.q).b(function(a,b){l+=b.c+", "});l=l.substring(0,l.length-2);a=[];c={id:"primary",ta:D.e.g(c,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(d,"yyyy-mm-dd hh:nn:ss.999"),w:k,B:l,t:b.t,la:!0,ca:D.a.n.L,Md:b.q[0].c,Ld:"DESC"};a.push(c);b.i.fa&&(c={id:"compare_primary",ta:D.e.g(e,"yyyy-mm-dd hh:nn:ss.000"),
ua:D.e.g(g,"yyyy-mm-dd hh:nn:ss.999"),w:k,B:l,t:b.t,la:!0,ca:D.a.n.L,Md:b.q[0].c,Ld:"DESC"},a.push(c));D.l.vc(b,a,function(a,c){var d=[];$(c).b(function(a,c){d.push({A:b.A,q:b.q,data:c.data.va})});a.zg=d;b.update(a,k,l,d)})};
A.update=function(a){var b=a.zg[0],c,d;a.i.fa&&(c=a.zg[1],c=c.data.Q);var e=b.data.na,g=e,k=b.data.Q,l=0,n=0,h=0,m=0,p=$($(a.vb).find(".table"));p.find("tr").remove();-1==a.ia&&$(e).b(function(b,c){c.N||(a.ia=b+1)});-1==a.Aa&&($(e).b(function(b,c){c.N||(a.Aa=b+1)}),a.pa=a.Aa);k=$(k).sort(function(b,c){var d=b.k[a.ia],g=c.k[a.ia];e[a.ia].N&&(d=parseFloat(d),g=parseFloat(g));return"DESC"==a.za?d<g?1:-1:d>g?1:-1});c=$(c).sort(function(b,c){var d=b.k[a.ia],g=c.k[a.ia];e[a.ia].N&&(d=parseFloat(d),g=parseFloat(g));
return"DESC"==a.za?d<g?1:-1:d>g?1:-1});var s=k,s=s.slice((a.La-1)*a.xa,a.La*a.xa);d=c;if("pie"==a.mode||"perf"==a.mode||"compare"==a.mode){var q=[],u="";$(s).b(function(b,c){var d={o:[],k:[]};$(e).b(function(a,b){b.N||(d.o.push(c.o[a]),d.k.push(c.k[a]))});$(e).b(function(b,e){e.N&&b==a.Aa&&(d.o.push(c.o[b]),d.k.push(c.k[b]))});$(e).b(function(b,e){e.N&&b==a.pa&&(u=e.c,d.o.push(c.o[b]),d.k.push(c.k[b]))});q.push(d)});s=q;$(k).b(function(b,c){$(e).b(function(b,d){d.N&&b==a.Aa&&(h+=parseFloat(c.k[b]));
d.N&&b==a.pa&&(u=d.c,m+=parseFloat(c.k[b]))})});$(s).b(function(a,b){s[a].o[b.o.length-1]=100*(b.k[b.o.length-1]/m);s[a].k[b.k.length-1]=100*(b.k[b.k.length-1]/m)})}l=h;n=m;if(("pie"==a.mode||"perf"==a.mode||"compare"==a.mode)&&a.i.fa){var v=[],u="";$(d).b(function(b,c){var d={o:[],k:[]};$(e).b(function(a,b){b.N||(d.o.push(c.o[a]),d.k.push(c.k[a]))});$(e).b(function(b,e){e.N&&b==a.Aa&&(d.o.push(c.o[b]),d.k.push(c.k[b]))});$(e).b(function(b,e){e.N&&b==a.pa&&(u=e.c,d.o.push(c.o[b]),d.k.push(c.k[b]))});
v.push(d)});d=v;m=h=0;$(c).b(function(b,c){$(e).b(function(b,d){d.N&&b==a.Aa&&(h+=parseFloat(c.k[b]));d.N&&b==a.pa&&(u=d.c,m+=parseFloat(c.k[b]))})});$(d).b(function(a,b){0==m?(d[a].o[b.o.length-1]=0,d[a].k[b.k.length-1]=0):(d[a].o[b.o.length-1]=100*(b.k[b.o.length-1]/m),d[a].k[b.k.length-1]=100*(b.k[b.k.length-1]/m))})}if("pie"==a.mode||"perf"==a.mode||"compare"==a.mode)v=[],$(e).b(function(b,c){c.N&&b==a.Aa?v.push(c):c.N||v.push(c)}),e=v,e.push({c:u,N:"Special"});var r=$("<tr></tr>"),z=$('<th class="check"></th>');
r.append(z);z=$('<th class="id"></th>');r.append(z);var w=0;$(e).b(function(b,c){c.N?("pie"==a.mode||"perf"==a.mode||"compare"==a.mode?b==e.length-2?(z=$('<th class="metric" data-sortindex="'+w+'"><select class="input-medium metricpicker"></select></th>'),$(g).b(function(b,c){c.N&&(z.find(".metricpicker").append('<option value="'+c.c+'" '+(b==a.Aa?"selected":"")+">"+c.c+"</option>"),z.p("sortkey"),z.p(a.za))}),z.find(".metricpicker").D("click"),z.find(".metricpicker").s("click",function(a){a.stopPropagation()}),
z.find(".metricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.Aa=c)});a.update(a)})):z=$('<th class="metric" data-sortindex="'+w+'">'+e[e.length-1].c+"</th>"):"pie"!=a.mode&&(z=$('<th class="metric" data-sortindex="'+w+'">'+c.c+"</th>"),w==a.ia&&(z.p("sortkey"),z.p(a.za))),z&&("pie"!=a.mode&&"perf"!=a.mode&&"compare"!=a.mode||"pie"==a.mode&&b<e.length-1||("perf"==a.mode||"compare"==a.mode)&&b<e.length-1?(z.D("click"),z.s("click",function(b){b.stopPropagation();a.ia==
$(this).d("data-sortindex")?a.za="DESC"==a.za?"ASC":"DESC":a.za="DESC";a.ia=$(this).d("data-sortindex");r.find("th").G("sortkey");r.find("th").G("ASC");r.find("th").G("DESC");$(this).p("sortkey");$(this).p(a.za);a.update(a)})):z.p("special"),r.append(z))):(0==b?z=$('<th class="dimension" data-sortindex="'+w+'">'+c.c+"</th>"):(z=$('<th class="dimension" data-sortindex="'+w+'">'+c.c+'<i class="jarvis removesecondarydimension icon-remove" style=" margin-top: 2px; margin-left: 5px; cursor: pointer; "></i></th>'),
$(z.find(".removesecondarydimension")).D("click"),$(z.find(".removesecondarydimension")).s("click",function(b){var d=-1;$(a.A).b(function(a,b){b.c==c.c&&(d=a)});-1<d&&(a.A.splice(d,1),a.ia=parseInt(a.ia)-1,a.Aa=parseInt(a.Aa)-1,a.pa=parseInt(a.pa)-1,a.m(a));b.stopPropagation()})),w==a.ia&&(z.p("sortkey"),z.p(a.za)),z.D("click"),z.s("click",function(b){b.stopPropagation();a.ia==$(this).d("data-sortindex")?a.za="DESC"==a.za?"ASC":"DESC":a.za="DESC";a.ia=$(this).d("data-sortindex");r.find("th").G("sortkey");
r.find("th").G("ASC");r.find("th").G("DESC");$(this).p("sortkey");$(this).p(a.za);a.update(a)}),r.append(z));w++});p.append(r);0==k.length&&p.append('<tr class="empty"><td style="text-align: center;" colspan="'+parseInt(e.length+2)+'">There is no data for this view.</td></tr>');a.i.fa?$(s).b(function(b,c){r=$("<tr ></tr>");t=$('<td class="check" style="vertical-align: middle;"></td>');"pie"==a.mode?t.append('<div style="height:11px;width:11px;background-color: '+(10<=b?D.oa[11]:D.oa[b])+';"></div>'):
t.append('<input class="checkfilter" type=checkbox>');r.append(t);t=$('<td class="id">'+parseInt((a.La-1)*a.xa+b+1)+".</td>");r.append(t);var h="",m="";$(e).b(function(b){t=$("<td></td>");e[b].N?t.p("metricvalue"):(t.u('<span class="nodrilldownlink c">'+c.o[b]+"</span>"),"pie"!=a.mode?t.u('<span class="nodrilldownlink c">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="nodrilldownlink c">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(c.o[b],2)+"%</span>"),
0==b&&(t.p("dimensionvalue"),m=e[b].c+"="+c.k[b]+"[AND]"),h+=e[b].c+"="+c.k[b]+"[AND]");b==a.ia&&t.p("sortkey");r.append(t)});if("pie"==a.mode){if(0==b){var q=$('<th class="special pie">Contribution to total: <select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});
q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);t=$('<td class="special"></td>');a.i.fa?t.d("rowspan",3*a.xa):t.d("rowspan",a.xa);r.append(t);a.Bg(a,t,e,s,k,l,n)}}else if("perf"==a.mode){if(0==b){q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":
"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);var u=$(p.find("tr")[0]);$(u.find("th")[u.find("th").length-2]).remove()}$(r.find("td")[r.find("td").length-1]).remove()}else"compare"==a.mode&&(0==b&&(q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>'),
$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")}),q.find(".comparemetricpicker").D("click"),q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()}),q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)}),$(p.find("tr")[0]).append(q),u=$(p.find("tr")[0]),$(u.find("th")[u.find("th").length-2]).remove()),$(r.find("td")[r.find("td").length-
1]).remove());var w=r.find(".checkfilter");w.d("data-filter",h);w.D("click");w.s("click",function(){w.Qe(":checked")?(D.a.n.lg(D.a.n.L+h),a.sa.push(D.a.n.L+h)):(D.a.n.nd(D.a.n.L+h),-1<a.sa.indexOf(D.a.n.L+h)&&a.sa.splice(a.sa.indexOf(D.a.n.L+h),1))});-1<a.sa.indexOf(h)?w.d("checked",!0):w.d("checked",!1);r.find(".drilldownlink").d("data-filter",m);r.find(".dimensionvalue .drilldownlink").D("click");r.find(".dimensionvalue .drilldownlink").s("click",function(){a.Ia<a.Sa.length&&a.Ia++;a.A.splice(0,
a.A.length);$(a.Sa[a.Ia]).b(function(b,c){a.A.push(c)});$(a.sa).b(function(a,b){D.a.n.nd(b)});a.sa=[];D.a.n.Ed(D.a.n.L+m)});p.append(r);r=$("<tr></tr>");t=$('<td class="check"></td>');r.append(t);t=$('<td class="id"></td>');r.append(t);$(e).b(function(b){t=$("<td></td>");e[b].N?(t.p("metricvalue"),"pie"!=a.mode?t.u('<span class="nodrilldownlink d">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="nodrilldownlink d">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+
D.M.R(c.o[b],2)+"%</span>")):(t.p(""),t.d("colspan",a.A.length),0==b?t.u(D.e.g(a.i.getDate().da)+" - "+D.e.g(a.i.getDate().V)):t=null);b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)});if("perf"==a.mode){$(r.find("td")[r.find("td").length-1]).remove();var v=c.o.length-1;t=$('<td class="special bar">'+c.o[v]+"</td>");var z=Math.floor(c.k[v])-5+"px",F=$('<div class="barwrapper"><div class="percentagebar" style="width:'+z+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[v],2)+"%</span></div>");
t.u(F);r.append(t)}else"compare"==a.mode&&($(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+c.o[v]+"</td>"),z=Math.floor(c.k[v])-5+"px",F=$('<div class="barwrapper"><div class="percentagebar" style="width:'+z+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[v],2)+"%</span></div>"),t.u(F),r.append(t));p.append(r);r=$("<tr></tr>");t=$('<td class="check"></td>');r.append(t);t=$('<td class="id"></td>');r.append(t);var L="";$(e).b(function(a){null==
e[a].N&&(L+=c.k[a])});var y;$(d).b(function(a,b){var c="";$(e).b(function(a){null==e[a].N&&(c+=b.k[a])});L==c&&(y=b)});$(e).b(function(b){t=$("<td></td>");if(e[b].N){t.p("metricvalue");try{"pie"!=a.mode?t.u('<span class="nodrilldownlink e">'+y.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="nodrilldownlink e">'+y.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(y.o[b],2)+"%</span>")}catch(c){"pie"!=a.mode?t.u('<span class="nodrilldownlink f">N/A</span>'):"pie"==
a.mode&&b!=e.length-1?t.u('<span class="nodrilldownlink f">N/A</span>'):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">N/A</span>')}}else t.p(""),t.d("colspan",a.A.length),0==b?t.u(D.e.g(a.i.getDate().ya)+" - "+D.e.g(a.i.getDate().ra)):t=null;b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)});if("perf"==a.mode){try{$(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+y.o[v]+"</td>"),z=Math.floor(y.k[v])-5+"px",F=$('<div class="barwrapper"><div class="percentagebar" style="width:'+
z+'"></div><td class="percentagecaption"><span >'+D.M.R(y.k[v],2)+"%</span></div>")}catch(O){t=$('<td class="special bar">0</td>'),F=$('<div class="barwrapper"><div class="percentagebar" style="width:0px"></div><td class="percentagecaption"><span >'+D.M.R(0,2)+"%</span></div>")}t.u(F);r.append(t)}else if("compare"==a.mode){try{$(r.find("td")[r.find("td").length-1]).remove(),v=c.o.length-1,t=$('<td class="special bar">'+y.o[v]+"</td>"),z=Math.floor(y.k[v])-5+"px",F=$('<div class="barwrapper"><div class="percentagebar" style="width:'+
z+'"></div><td class="percentagecaption"><span >'+D.M.R(y.k[v],2)+"%</span></div>")}catch(P){t=$('<td class="special bar">0</td>'),F=$('<div class="barwrapper"><div class="percentagebar" style="width:0px"></div><td class="percentagecaption"><span >'+D.M.R(0,2)+"%</span></div>")}t.u(F);r.append(t)}p.append(r);"table"==a.mode&&(r=$("<tr></tr>"),t=$('<td class="check"></td>'),r.append(t),t=$('<td class="id"></td>'),r.append(t),$(e).b(function(b,d){t=$("<td></td>");if(e[b].N){var g=!1;t.p("metricvalue comparison");
try{var h=xa(y.k[b],c.k[b])}catch(k){h=0,g=!0}var l="";-1==d.Ha&&0>h&&(l="positive");-1==d.Ha&&0<h&&(l="negative");1==d.Ha&&0<h&&(l="positive");1==d.Ha&&0>h&&(l="negative");""==l&&(l="neutral");"pie"!=a.mode?g?t.u("N/A"):t.u(D.M.R(h,2)+"%"):"pie"==a.mode&&b!=e.length-1?g?t.u("N/A"):t.u(D.M.R(h,2)+"%"):"pie"==a.mode&&b==e.length-1&&(g?t.u("N/A"):t.u(D.M.R(h,2)+"%"));t.p(l)}else t.p("comparison"),t.d("colspan",a.A.length),0==b?t.u("% Change"):t=null;b==a.ia&&e[b].N&&t.p("sortkey");r.append(t)}),p.append(r))}):
$(s).b(function(b,c){r=$("<tr ></tr>");t=$('<td class="check" style="vertical-align: middle;"></td>');"pie"==a.mode?t.append('<div style="height:11px;width:11px;background-color: '+(10<=b?D.oa[11]:D.oa[b])+';"></div>'):t.append('<input class="checkfilter" type=checkbox>');r.append(t);t=$('<td class="id">'+parseInt((a.La-1)*a.xa+b+1)+".</td>");r.append(t);var d="",h="";$(e).b(function(b){t=$("<td></td>");e[b].N?t.p("metricvalue"):(0==b&&(t.p("dimensionvalue"),h=e[b].c+"="+c.k[b]+"[AND]"),d+=e[b].c+
"="+c.k[b]+"[AND]");b==a.ia&&t.p("sortkey");"pie"!=a.mode?t.u('<span class="nodrilldownlink a">'+c.o[b]+"</span>"):"pie"==a.mode&&b!=e.length-1?t.u('<span class="nodrilldownlink b">'+c.o[b]+"</span>"):"pie"==a.mode&&b==e.length-1&&t.u('<span class="">'+D.M.R(c.o[b],2)+"%</span>");r.append(t)});var m=r.find(".checkfilter");m.d("data-filter",d);m.D("click");m.s("click",function(){m.Qe(":checked")?(D.a.n.lg(D.a.n.L+d),a.sa.push(D.a.n.L+d)):(D.a.n.nd(D.a.n.L+d),-1<a.sa.indexOf(D.a.n.L+d)&&a.sa.splice(a.sa.indexOf(D.a.n.L+
d),1))});-1<a.sa.indexOf(d)?m.d("checked",!0):m.d("checked",!1);r.find(".drilldownlink").d("data-filter",h);r.find(".dimensionvalue .drilldownlink").D("click");r.find(".dimensionvalue .drilldownlink").s("click",function(){a.Ia<a.Sa.length-1&&a.Ia++;a.A.splice(0,a.A.length);$(a.Sa[a.Ia]).b(function(b,c){a.A.push(c)});$(a.sa).b(function(a,b){D.a.n.nd(b)});a.sa=[];D.a.n.Ed(D.a.n.L+h)});if("pie"==a.mode){if(0==b){var q=$('<th class="special pie">Contribution to total: <select class="input-medium comparemetricpicker"></select></th>');
$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);t=$('<td class="special"></td>');a.i.fa?t.d("rowspan",3*a.xa):t.d("rowspan",a.xa);r.append(t);
a.Bg(a,t,e,s,k,l,n)}}else if("perf"==a.mode){if(0==b){q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>');$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")});q.find(".comparemetricpicker").D("click");q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()});q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==
b&&(a.pa=c)});a.update(a)});$(p.find("tr")[0]).append(q);var u=$(p.find("tr")[0]);$(u.find("th")[u.find("th").length-2]).remove()}$(r.find("td")[r.find("td").length-1]).remove();u=c.o.length-1;t=$('<td class="special bar">'+c.o[u]+"</td>");var w=Math.floor(c.k[u])-5+"px",u=$('<div class="barwrapper"><div class="percentagebar" style="width:'+w+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[u],2)+"%</span></div>");t.u(u);r.append(t)}else"compare"==a.mode?(0==b&&(q=$('<th class="special pie"><select class="input-medium comparemetricpicker"></select></th>'),
$(g).b(function(b,c){c.N&&q.find(".comparemetricpicker").append('<option value="'+c.c+'" '+(b==a.pa?"selected":"")+">"+c.c+"</option>")}),q.find(".comparemetricpicker").D("click"),q.find(".comparemetricpicker").s("click",function(a){a.stopPropagation()}),q.find(".comparemetricpicker").s("change",function(){var b=$(this).U();$(g).b(function(c,d){d.c==b&&(a.pa=c)});a.update(a)}),$(p.find("tr")[0]).append(q),u=$(p.find("tr")[0]),$(u.find("th")[u.find("th").length-2]).remove()),$(r.find("td")[r.find("td").length-
1]).remove(),u=c.o.length-1,t=$('<td class="special bar">'+c.o[u]+"</td>"),w=Math.floor(c.k[u])-5+"px",u=$('<div class="barwrapper"><div class="percentagebar" style="width:'+w+'"></div><td class="percentagecaption"><span >'+D.M.R(c.k[u],2)+"%</span></div>"),t.u(u),r.append(t)):$(p.find("tr")[0]).find(".special").remove();p.append(r)});c=(a.La-1)*a.xa+1;b=a.La*a.xa;b>k.length&&(b=k.length);if("pie"==a.mode&&s.length<a.xa)for(i=s.length;i<a.xa;i++){var r=$('<tr class="emptyrowfiller '+(i==s.length?
"first":"")+'"></tr>'),t=$('<td colspan="'+parseInt(e.length+2)+'">&nbsp;</td>');r.append(t);p.append(r);if(10<p.find("tr").length)break}var F=$($(a.vb).find(".bottomfooter"));F.find(".pager .pageinfoselect").U(a.xa);F.find(".pageinfo").u(c+" - "+b+" of "+k.length);c=F.find(".pagecontrol");1<a.La?$(c).find(".prev").G("disabled"):$(c).find(".prev").p("disabled");b<k.length?$(c).find(".next").G("disabled"):$(c).find(".next").p("disabled");b=$(a.vb).find(".tabletype");b.find("button").b(function(){$(this).G("active")});
b.find(".btn_"+this.mode).p("active");b=$(a.vb).find(".tablecontrol");if(1<a.A.length){var L="Secondary dimension"+(2<a.A.length?"s":"")+": ";$(a.A).b(function(a,b){0<a&&(L+=b.c+", ")});L=L.substring(0,L.length-2);$(b).find(".secondarybutton").u(L);R=new D.a.K.w({h:R,prefix:"Secondary dimension: ",kb:"Secondary dimension",selected:1==a.A.length?"":a.A[1].c})}else{var R=$('<div class="jarvis picker dimensions" data-type="button"></div>');$(b).find(".secondary").empty();$(b).find(".secondary").append(R);
R=new D.a.K.w({h:R,prefix:"Secondary dimension: ",kb:"Secondary dimension",selected:1==a.A.length?"":a.A[1].c});$(R).bind("select",function(b,c){c=_.find(D.f.w,function(a){return a.c==c});-1==a.A.indexOf(c)&&(1==a.A.length?(a.ia=parseInt(a.ia)+1,a.Aa=parseInt(a.Aa)+1,a.pa=parseInt(a.pa)+1):a.A.splice(1,1),a.A.push(c),a.m(a))})}a.Kb?($(".japi.primarydimension").G("on"),$(".drilldownlink").D("click"),$(".drilldownlink").p("disabled"),$(".drilldownlink").parent().p("disabled")):($(".japi.primarydimension").u(a.Sa[a.Ia][0].c),
$(".japi.primarydimension").p("on"),$(".japi.other.picker").G("on"),$(".japi.other.picker .jbtn").u('Other <span class="caret"></span>'));0<a.Ia||0==a.Ia&&1==a.Sa.length?$(".japi.other.picker").O("visibility","visible"):$(".japi.other.picker").O("visibility","hidden");a.cb(a);$(D).I("tableresize")};A.qc=f();
A.Bg=function(a,b,c,d,e,g){new Highcharts.fb({F:{Tb:$(b).get(0),backgroundColor:null,ni:null,Qf:null,oi:!1,width:300,height:300,type:"pie",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,Xc:0,Zc:0,Yc:0,Wc:0},title:{text:null},lb:{Ra:function(){return"<b>"+this.v.name+"</b><br/>"+this.j.name+": "+D.M.R(this.ld,2)+" %"}},pb:{enabled:!1},Oc:{enabled:!1},fe:{enabled:!1},md:{Ye:{$f:!0,size:"90%"}},j:[{name:function(){var a="test";return a=c[c.length-2].c}(),type:"pie",data:function(){var a=[],b=
0;$(d).b(function(d,e){if(10>d){var m="";$(c).b(function(a,b){b.N||(m+=c[a].c+": "+e.o[a]+"<br/>")});var m=m.substring(0,m.length-5),p=0,p=100*(e.k[e.k.length-2]/g);b+=p;a.push({name:m,y:p,color:D.oa[d]})}});0<100-Math.floor(b)&&a.push({name:"Other",y:100-b,color:D.oa[11]});return a}(),lc:{Ra:function(){return 5<this.y?this.v.name:null},color:"white",Rd:-30,enabled:!1}},{name:function(){var a="test";return a=c[c.length-1].c}(),type:"pie",$h:"70%",data:function(){var b=[];if(a.Aa!=a.pa){var e=0;$(d).b(function(a,
d){if(10>a){var p="";$(c).b(function(a,b){b.N||(p+=c[a].c+": "+d.o[a]+"<br/>")});p=p.substring(0,p.length-5);g=d.k[d.k.length-1];e+=g;b.push({name:p,y:g})}});if(0<100-Math.floor(e)){var g=100-e;b.push({name:"Other",y:g,color:D.oa[11]})}}return b}(),lc:{Ra:function(){return 1<this.y?"<b>"+this.v.name+":</b> "+this.y+"%":null},enabled:!1}}]})};
A.Oa=function(a){var b=this,c,d=$('<div class="tableexwrapper"><table class="table table-striped tableex"></table></div>');$(a).append(d);d=$('<div class="topheader"></div>');c=$('<div class="headercontent"></div>');d.append(c);$(a).Zg(d);var e=$('<div class="bottomfooter"></div>'),g=$('<div class="footercontent"></div>');g.append('<div class="pagecontrol"></div><div class="pageinfo"></div><div class="pager"></div>');c='Show rows: <select class="pageinfoselect input-mini"><option value=50>50</option><option value=100>100</option><option value=250>250</option><option value=500>500</option><option value=1000>1000</option><option value=2500>2500</option></select>';
g.find(".pager").u(c);g.find(".pager .pageinfoselect").D("click");g.find(".pager .pageinfoselect").s("click",function(){b.xa=$(this).U();b.update(b)});c="x - y of z";g.find(".pageinfo").u(c);e.append(g);c='<div class="btn-group"><button class="btn prev disabled"></button><button class="btn next disabled"></button></div>';g.find(".pagecontrol").u(c);g.find(".pagecontrol .prev").D("click");g.find(".pagecontrol .prev").s("click",function(){$(this).Ea("disabled")||(b.La-=1,b.update(b))});g.find(".pagecontrol .next").D("click");
g.find(".pagecontrol .next").s("click",function(){$(this).Ea("disabled")||(b.La+=1,b.update(b))});e.append(g);$(a).append(e);c='<div class="drilldownwrapper"><span class="japi dimensionpickerlabel" style="display: inline-block;font: normal 12px Arial;height: 22px;vertical-align: middle;">Primary Dimension: </span><li class="japi primarydimension" data-id="Nane" style="">Name</li>';c+='<div class="japi other picker btn-group  jarvis dimensions" style="display:inline;">';c+='<li class="japi other picker dropdown" data-type="button" data-toggle="dropdown" style="background-color:white;position: absolute;display: inline-block; margin-left:5px;color:#08C;cursor:pointer;" onclick="">';
c+="Other";c+='<span class="caret" style=""></span></li><div class="japi otherlist"></div></div></div></div></div></div>';var k=$('<div class="tablecontrol"></div>');k.append('<div class="secondary btn-group"><button class="btn secondarywrapper dropdown-toggle dropdown" data-toggle="dropdown"><span class="secondarybutton">Secondary dimension...</span>&nbsp;<span class="caret"></span></button><div class="secondarylist"><ul class="jarvis secondarylistcontainer dropdown-menu"></ul></div></div>');k.append('<div class="toolbar"><div class="tabletype"></div><div class="search input-prepend"><input type="text" class="quicksearch span2"><span class="add-on"><i class="searchicon icon-search"></i></span></div></div></div>');
a=$('<div class="toolbaroptions btn-group" data-toggle="buttons-radio" ></div>');a.append('<button rel="tooltip" title="Table" class="btn btn_table active"><img src="'+D.hostname+'/assets//img/glyphicons_114_list.png""/></i></button>');a.append('<button rel="tooltip" title="Pie chart" class="btn btn_pie"><img src="'+D.hostname+'/assets//img/glyphicons_042_pie_chart.png"/></button>');a.append('<button rel="tooltip" title="Performance" class="btn btn_perf"><img src="'+D.hostname+'/assets//img/glyphicons_110_align_left.png"/></button>');
k.find(".add-on").D("click");k.find(".add-on").s("click",function(){$(b.sa).b(function(a,b){D.a.n.nd(b)});b.sa=[];if(""==k.find(".quicksearch").U())D.a.n.Ed("");else{var a=b.A[0].c+"="+k.find(".quicksearch").U()+"[AND]";D.a.n.Ed(a)}});k.find(".quicksearch").ft(function(a){13==a.which&&k.find(".add-on").click()});a.find(".btn_table").D("click");a.find(".btn_table").s("click",function(){b.mode="table";b.update(b)});a.find(".btn_pie").D("click");a.find(".btn_pie").s("click",function(){b.mode="pie";b.ia=
-1;b.update(b)});a.find(".btn_perf").D("click");a.find(".btn_perf").s("click",function(){b.mode="perf";b.ia=-1;b.update(b)});a.find(".btn_compare").D("click");a.find(".btn_compare").s("click",function(){b.mode="compare";b.ia=-1;b.update(b)});k.find(".tabletype").u(a);$(k.find(".jarvis.secondarylistcontainer")).append($('<li class="nav-header">'+b.A[0].c+"</li>"));a=$('<div class="jarvis picker dimensions" data-type="button"></div>');$(k).find(".secondary").empty();$(k).find(".secondary").append(a);
a=new D.a.K.w({h:a,prefix:"Add dimension: ",kb:"Add dimension",selected:1<=b.A.length?"":b.A[1].c,ag:!1});$(a).bind("select",function(a,c){c=_.find(D.f.w,function(a){return a.c==c});-1==b.A.indexOf(c)&&(b.ia=parseInt(b.ia)+1,b.Aa=parseInt(b.Aa)+1,b.pa=parseInt(b.pa)+1,b.A.push(c),b.m(b))});a=$(d.find(".japi.other.picker.dropdown"));a=new D.a.K.w({h:a,prefix:"",kb:"Other",type:"none",selected:b.Kb?b.A[0].c:""});$(a).bind("select",function(a,c){c=_.find(D.f.w,function(a){return a.c==c});-1==b.A.indexOf(c)&&
(b.A[0]=c,b.Kb=!0,b.m(b))});$(".japi.primarydimension").D("click");$(".japi.primarydimension").s("click",function(){var a=$(".japi.primarydimension").text(),a=_.find(D.f.w,function(b){return b.c==a});b.A[0]=a;b.Kb=!1;b.m(b)});d.append(k);$(".japi.primarydimension").u(b.Sa[b.Ia][0].c);b.Kb?($(".japi.primarydimension").G("on"),$(".drilldownlink").D("click"),$(".drilldownlink").p("disabled"),$(".drilldownlink").parent().p("disabled")):($(".japi.primarydimension").p("on"),$(".japi.other.picker").G("on"),
$(".japi.other.picker .jbtn").u('Other <span class="caret"></span>'));0<b.Ia||0==b.Ia&&1==b.Sa.length?$(".japi.other.picker").O("visibility","visible"):$(".japi.other.picker").O("visibility","hidden")};A.uid=ga("tableex-1234");
A.cb=function(a){D.state[a.uid()]||(D.state[a.uid()]={});D.debug.log("INFO","jarvis.visualisation.report.TableEx",6,'Table "'+a.uid()+'" saving state.');D.state[a.uid()].Kc=a.Kc;D.state[a.uid()].t=a.t;D.state[a.uid()].Ca=a.Ca;D.state[a.uid()].Xa=a.Xa;D.state[a.uid()].ia=a.ia;D.state[a.uid()].Aa=a.Aa;D.state[a.uid()].pa=a.pa;D.state[a.uid()].za=a.za;D.state[a.uid()].La=a.La;D.state[a.uid()].xa=a.xa;D.state[a.uid()].mode=a.mode;D.state[a.uid()].A=a.A;D.state[a.uid()].Sa=a.Sa;D.state[a.uid()].Ia=a.Ia;
D.state[a.uid()].Kb=a.Kb;D.state[a.uid()].L=D.a.n.L;D.state[a.uid()].sa=a.sa};
A.Me=function(a){D.debug.log("INFO","jarvis.visualisation.report.TableEx",6,'Table "'+a.uid()+'" loading state.');null!=D.state[a.uid()]&&(a.Kc=D.state[a.uid()].Kc,a.t=D.state[a.uid()].t,a.Ca=D.state[a.uid()].Ca,a.Xa=D.state[a.uid()].Xa,a.ia=D.state[a.uid()].ia,a.Aa=D.state[a.uid()].Aa,a.pa=D.state[a.uid()].pa,a.za=D.state[a.uid()].za,a.La=D.state[a.uid()].La,a.xa=D.state[a.uid()].xa,a.mode=D.state[a.uid()].mode,a.A=D.state[a.uid()].A,a.Sa=D.state[a.uid()].Sa,a.Ia=D.state[a.uid()].Ia,a.Kb=D.state[a.uid()].Kb,
D.a.n.L=D.state[a.uid()].L,a.sa=D.state[a.uid()].sa)};D.debug.log("INFO","jarvis.visualisation.report.TableEx",6,"JS source loaded");D.ba("jarvis.visualisation.report.Histogram");
function Fc(a){this.Z=this;this.options=a;this.fd="Right now";this.Pc="Events per Second";this.Qc=!0;this.key="";this.Wb=this.Yb=!1;this.Qb=[];this.Rb=null;this.t="Day";this.S=[];D.f.w.$();D.f.B.$();this.i=D.a.K.i;var b=this;$(b.i).bind("datechange",function(){$(b.S).b(function(a,d){b.m(b,d)})});$(D.a).bind("metricbox-primarymetric",function(a,d,e){b.q[1]=e;$(b.S[0]).d("data-metrics",b.q[0].c+","+b.q[1].c);b.m(b,b.S[0])});b.ea=function(){$(b).Fa("data");$(b).Fa("click");$(D.a).Fa("metricbox-primarymetric");
$(D.a.n).Fa("filter")};return this}A=Fc.prototype;
A.C=function(a,b){var c=this,d=(new Date).getMilliseconds();this.Z=this;this.options=a;this.S=this.S||[];this.A=[];this.q=[];$(D.r).bind("filterchange",f());var e=null,e=b?$(b):$(".jarvis.report.histogram");if(0!=e.length)return $(e).b(function(a,b){if(!$(this).parent().Ea("prettyprint")){D.debug.log("INFO","jarvis.visualisation.report.Histogram",6,"Applying to container ('"+this.id+"')");var d=$(b).d("data-metrics");d&&(c.wa=$(b).d("data-limit"),c.wa||(c.wa=10),d=d.split(","),$(d).b(function(a){d[a]=
$.trim(d[a]);c.q.push(d[a])}),$(D.l.q).b(function(a,b){-1<d.indexOf(b.c)&&(c.q[d.indexOf(b.c)]=b)}),$(this).Fa("undata"),$(this).bind("data",function(a,b){b.data=$(this).data().data}),$(this).Fa("undata"),$(this).bind("click",function(){$(this).I("clicked",$(this).data().data)}),$(D.a.n).Fa("filter"),$(D.a.n).bind("filter",function(){c.m(c)}),$(b).empty(),c.Oa(b),c.m(c,b),$(this).find(".settings").D("click"),$(this).find(".settings").s("click",function(){D.Wa().gc({Z:D.Wa(),h:D.Wa().h,hb:!1,Jc:$(b).d("data-widgetid"),
sender:c,pc:b})}),c.S.push(b))}}),D.debug.log("INFO","jarvis.visualisation.report.Histogram",5,"...init ("+((new Date).getMilliseconds()-d)+"ms)"),this};
A.m=function(a,b){a||(a=Fc);var c=a,d=D.a.K.i.getDate().da,e=D.a.K.i.getDate().V;if(c.i.fa)var g=D.a.K.i.getDate().ya,k=D.a.K.i.getDate().ra;var l=$(b).d("data-dimensions");if(!l)return"";l=l.split(",");$(l).b(function(a,b){var d=-1;$(D.f.w).b(function(a,c){c.c==$.trim(b)&&(d=a)});l[a]=D.f.w[d];c.A.push(l[a])});$(D.f.w).b(function(a,b){-1<l.indexOf(b.c)&&(c.A[l.indexOf(b.c)]=b)});var n=$(b).d("data-metrics");if(!n)return"";n=n.split(",");$(n).b(function(a,b){var d=-1;$(D.l.q).b(function(a,c){c.c==
$.trim(b)&&(d=a)});n[a]=D.l.q[d];c.q.push(n[a])});$(D.l.q).b(function(a,b){-1<n.indexOf(b.c)&&(c.q[n.indexOf(b.c)]=b)});if(!n)return"";var h=[],d={id:"primary",ta:D.e.g(d,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(e,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:c.q[0].c+","+c.q[1].c,t:c.t,la:!0,ca:D.a.ja.L,bq:!0};h.push(d);c.i.fa&&(d={id:"compare_primary",ta:D.e.g(g,"yyyy-mm-dd hh:nn:ss.000"),ua:D.e.g(k,"yyyy-mm-dd hh:nn:ss.999"),w:"",B:c.q[0].c+","+c.q[1].c,t:c.t,la:!0,ca:D.a.ja.L,bq:!0},h.push(d));D.l.vc(c,h,function(a,
d){var e=[];$(d).b(function(a,b){try{e.push(b.data.va)}catch(c){}});!1==c.i.fa?c.update(a,l,n,e,b):c.qc(a,l,n,e,b)})};
A.update=function(a,b,c,d,e){if(d[0]){var g=$($(e).find(".table"));g.empty();b=$("<tr></tr>");c=$('<th class="dimension">'+a.q[0].c+"</th>");b.append(c);c=$('<th class="dimension values">'+a.q[1].c+"</th>");b.append(c);c=$('<th class="dimension">Percentage of total<div class="hlegend"><span class="legendmark" style="border-color: rgb(5, 141, 199);"></span><span class="legendcaption">'+a.q[1].c+"</span></div> </th>");b.append(c);g.append(b);$(d[0].Q).b(function(b,c){var e=$("<tr></tr>");if("seconds"==
a.q[0].Ba)var h=0,m=0,h=c.k[1],m=c.k[2],p="";else m=h=0,h=c.k[1],m=c.k[2],p="";p=-1==m?h+"+ "+a.q[0].Ba:d[0].Q.length-1==b?h+"+ "+a.q[0].Ba:h+"-"+m+" "+a.q[0].Ba;h=$("<td>"+p+"</td>");e.append(h);$(c.o).b(function(a,b){if(4==a){var c=$('<td class="values">'+b+"</td>");d[0].na[a].N?c.p("metric"):c.p("dimension");e.append(c)}else if(5==a){var c=$("<td>"+b+"</td>"),g=Math.ceil(b)+"%",g=$('<div class="barwrapper"><span class="barvalue">'+D.M.R(b,2)+'%</span><div class="percentagebar" style="width:'+g+
'"></div><td class="percentagecaption"></div>');c.u(g);d[0].na[a].N?c.p("metric"):c.p("dimension");e.append(c)}});g.append(e)})}};
A.qc=function(a,b,c,d,e){if(d[0]){var g=a.i,k=$($(e).find(".table"));k.empty();b=$("<tr></tr>");c=$('<th class="dimension">'+a.q[0].c+"</th>");b.append(c);c=$('<th class="dimension values">'+a.q[1].c+"</th>");b.append(c);c=$('<th class="dimension">Percentage of total<div class="hlegend"><span class="legendmark" style="border-color: rgb(5, 141, 199);"></span><span class="legendcaption">'+a.q[1].c+"</span></div> </th>");b.append(c);k.append(b);$(d[0].Q).b(function(b,c){var e=$("<tr></tr>");if("seconds"==
a.q[0].Ba)var m=0,p=0,m=c.k[1],p=c.k[2],s="";else m=c.k[1],p=c.k[2];s=-1==p?m+"+ "+a.q[0].Ba:d[0].Q.length-1==b?m+"+ "+a.q[0].Ba:m+"-"+p+" "+a.q[0].Ba;m=$("<td>"+s+"</td>");e.append(m);m=$("<td></td>");e.append(m);m=$("<td></td>");e.append(m);k.append(e);e=$("<tr></tr>");m=$('<td class="daterange">'+g.g(g.getDate().da)+" - "+g.g(g.getDate().V)+"</td>");m.p("dimension");e.append(m);p=c.o[4];m=$('<td class="values">'+p+"</td>");m.p("dimension");e.append(m);m=$('<td class="">'+p+"</td>");m.p("dimension");
p=c.o[5];s=Math.ceil(p)+"%";p=$('<div class="barwrapper"><span class="barvalue">'+D.M.R(p,2)+'%</span><div class="percentagebar" style="width:'+s+'"></div><td class="percentagecaption"></div>');m.u(p);e.append(m);k.append(e);$("<tr></tr>");e=$("<tr></tr>");m=$('<td class="daterange">'+g.g(g.ya)+" - "+g.g(g.ra)+"</td>");m.p("dimension");e.append(m);c=d[1].Q[b];p=c.o[4];m=$('<td class="values">'+p+"</td>");m.p("dimension");e.append(m);m=$('<td class="">'+p+"</td>");m.p("dimension");p=c.o[5];s=Math.ceil(p)+
"%";p=$('<div class="barwrapper"><span class="barvalue">'+D.M.R(p,2)+'%</span><div class="percentagebar" style="width:'+s+'"></div><td class="percentagecaption"></div>');m.u(p);e.append(m);k.append(e)})}};
A.Oa=function(a){$(a).d("data-title")&&$(a).d("data-title");$(a).d("data-dimensions")&&$(a).d("data-dimensions");$(a).d("data-metrics")&&$(a).d("data-metrics");var b=$('<div class="wrapper"></div>');b.append('<div class="row-fluid"></div><div class="content"><table class="table table-striped"></table></div></div>');$();$(a).append(b)};D.debug.log("INFO","jarvis.visualisation.report.Histogram",6,"JS source loaded");D.ba("jarvis.visualisation.report.Tabs");D.a.n.Db=function(){D.f.ka.$();D.f.w.$();D.f.B.$()};
D.a.n.Db.prototype.C=function(a,b){var c=this;D.debug.log("INFO","jarvis.visualisation.report.Tabs",6,"Building Tabs for ID ('"+c.W+"')");var d=null,d=b?$(b):$(".jarvis.report.tabs");0!=d.length&&($(d).show(),$(d).b(function(b,d){var k=$(d).d("data-reportid");try{k||a.uu||(k=D.f.ka[0].ma),""==k&&(k=D.f.ka[0].ma)}catch(l){k=D.f.ka[0].ma}c.W=k;c.Ja=c.get(c,c.W);c.Ja&&(null==a&&(a={}),a.W=c.W,c.Ua=a.Ua,c.Ua||(c.Ua=0),a.h=d,a.Z=c,c.bd(a),D.debug.log("INFO","jarvis.visualisation.report.Tabs",6,"Applying to container ('"+
this.id+"')"))}))};D.a.n.Db.prototype.get=function(a,b){if(-1!=b){var c=D.f.ka.bc(a,{id:b});a.W=c.ma;return c}};
D.a.n.Db.prototype.bd=function(a){var b=a.Z,c="",c=c+'<ul class="nav nav-tabs">';$(b.Ja.Db).b(function(b,d){c+='<li class="'+(b==a.selected?"active":"")+'">';c+='<a class="tablink" data-tabid="'+b+'">'+d.c+"</a>";c+="</li>"});var c=c+"</ul>",d=$(c);d.find(".tablink").b(function(a,b){var c=$(b);c.D("click");c.s("click",function(){$(D).I("tabchange",c.d("data-tabid"));d.find(".tablink").b(function(a,b){$(b).G("active")});$(this).p("active")})});$(a.h).empty();$(a.h).append(d)};
D.debug.log("INFO","Report.Visualisation.Tabs",6,"JS source loaded");D.ba("jarvis.visualisation.report.MetricGroup");D.a.n.kf=function(){D.f.ka.$();D.f.w.$();D.f.B.$()};
D.a.n.kf.prototype.C=function(a,b){var c=this;D.debug.log("INFO","jarvis.visualisation.report.MetricGroup",6,"Building MetricGroup for ID ('"+c.W+"')");var d=null,d=b?$(b):$(".jarvis.report.metricgroups");0!=d.length&&($(d).show(),$(d).b(function(b,d){var k=$(d).d("data-reportid"),l=$(d).d("data-tabid"),n=$(d).d("data-mgid");try{k||a.uu||(k=D.f.ka[0].ma),""==k&&(k=D.f.ka[0].ma)}catch(h){k=D.f.ka[0].ma}c.W=k;c.ut=n;c.lh=l;c.Ja=c.get(c,c.W);c.Ja&&(null==a&&(a={}),a.W=c.W,a.h=d,a.Z=c,c.bd(a),D.debug.log("INFO",
"jarvis.visualisation.report.MetricGroup",6,"Applying to container ('"+this.id+"')"))}))};D.a.n.kf.prototype.get=function(a,b){if(-1!=b){var c=D.f.ka.bc(a,{id:b});a.W=c.ma;return c}};
D.a.n.kf.prototype.bd=function(a){var b=a.Z,c="",c=c+'<ul class="nav nav-pills">';$(b.Ja.Db[b.lh].$d).b(function(a,d){c+='<li class="'+(a==b.ut?"active":"")+'">';c+='<a class="mglink" data-mgid="'+a+'">'+d.c+"</a>";c+="</li>"});var c=c+"</ul>",d=$(c);d.find(".mglink").b(function(a,b){var c=$(b);c.D("click");c.s("click",function(){$(D).I("metricgroupchange",c.d("data-mgid"));d.find(".mglink").b(function(a,b){$(b).G("active")});$(c).p("active")})});1==b.Ja.Db[b.lh].$d.length&&d.P();$(a.h).empty();$(a.h).append(d)};
D.debug.log("INFO","Report.Visualisation.MetricGroup",6,"JS source loaded");D.ba("jarvis.visualisation.report.panel");
D.a.n.ud=function(a){var b=this;this.options=$.extend({Gb:{ad:{height:235,wd:[],Gd:!0},Hc:{xa:50,zd:0,Nf:3,defaultSelected:0}}},a);D.f.ka.$();try{this.W=a.W}catch(c){this.W=D.f.ka[0].ma}this.S=[];var d=null,d=$(".jarvis.report.panel");0<d.length&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Panel",6,"Building Initial Panel ('"+this.id+"')"),a=$(".jarvis.container").find(".panel-edit"),a.D("click"),a.s("click",function(){var a=new D.a.n.gg;a.C(a,{h:d,W:b.W})}));this.h=d;D.a.n.Ja=this;D.f.ka.$();
D.f.w.$();D.f.B.$();null!=D.state?(b.W=D.state.W,b.Ua=D.state.Ua,b.nb=D.state.nb,b.zb=D.state.zb):(this.W=-1,this.Ua=0,this.zb="explorer",this.nb=0);if(null==b.W||"undefined"==b.W)b.W=-1;if(null==b.Ua||"undefined"==b.Ua)b.Ua=0;if(null==b.zb||"undefined"==b.zb)b.zb="explorer";if(null==b.nb||"undefined"==b.nb)b.nb=0;D.a.Fc||(D.a.Fc=b);return b};A=D.a.n.ud.prototype;
A.C=function(a,b,c,d,e){var g=this;D.debug.log("INFO","Jarvis.Visualisation.Report.Panel",6,"Building Panel for ID ('"+g.W+"')");a&&null!=a.Gd&&(g.options.Gb.ad.Gd=a.Gd);a&&null!=a.zd&&(g.options.Gb.Hc.zd=a.zd);a&&null!=a.Nf&&(g.options.Gb.Hc.Nf=a.Nf);a&&null!=a.defaultSelected&&(g.options.Gb.Hc.defaultSelected=a.defaultSelected);a&&null!=a.wd&&(g.options.Gb.ad.wd=a.wd);D.a.n.L="";try{null!=$(".jarvis.report.panel").d("data-id")&&(g.W=$(".jarvis.report.panel").d("data-id")),null!=a.W&&"undefined"!=
a.W&&(g.W=a.W),null!=a.Ua&&"undefined"!=a.Ua&&(g.Ua=a.Ua),null!=a.zb&&"undefined"!=a.zb&&(g.zb=a.zb),null!=a.nb&&"undefined"!=a.nb&&(g.nb=a.nb)}catch(k){-1==this.W&&(g.W=D.f.ka[0].ma)}if(null==g.W||"undefined"==g.W)g.W=D.f.ka[0].ma;if(null==g.Ua||"undefined"==g.Ua)g.Ua=0;if(null==g.zb||"undefined"==g.zb)g.zb="explorer";if(null==g.nb||"undefined"==g.nb)g.nb=0;-1==g.W&&(g.W=D.f.ka[0].ma);g.Ja=g.get(g,g.W);if(this.Ja){g.zb=g.Ja.Db[g.Ua].lf;g.Uc();if("undefined"==typeof e||!0==e)D.state.view="report",
D.state.Hh=g.ga,D.state.W=g.W,D.state.Ua=g.Ua,D.state.nb=g.nb,D.state.zb=g.zb;var l=null,l=b?$(b):$(".jarvis.report.panel");if(0!=l.length)return $("body").find(".widget-add").P(),$(l).b(function(b,d){null==a&&(a={});a.W=g.W;a.h=d;a.Z=g;g.bd(a);g.Ma(g,d);g.Je(g,d,c);$(D).Fa("tabchange");$(D).bind("tabchange",function(a,b){g.Ua=b;g.nb=0;D.a.n.L="";g.C(g,d,!0,!0)});$(D).Fa("metricgroupchange");$(D).bind("metricgroupchange",function(a,b){g.nb=b;try{D.state["timeline-1234"].Ca=null}catch(c){}D.state.nb=
g.nb;g.C(g,d,!0,!0)});D.debug.log("INFO","Jarvis.Visualisation.Report.Panel",6,"Applying to container ('"+this.id+"')")}),b=$(".jarvis.container").find(".panel-edit"),b.D("click"),b.s("click",function(){var a=new D.a.n.gg;a.C(a,{h:l,W:g.W})}),g}};A.Uc=f();A.show=function(){$(".jarvis.report.panel").show()};A.P=function(){$(".jarvis.dashboard.panel").P()};
A.xf=function(){var a=$(".jarvis.report.panel"),b=$(a).find(".tabs"),c=$(a).find(".metricgroups"),d=$(a).find(".timeline"),e=$(a).find(".metricbox"),a=$(a).find(".jtable");b.empty();c.empty();d.empty();e.empty();a.empty();D.a.n.$b=null;D.a.n.Wn=null;D.a.n.ad=null;D.a.n.Qg=null;D.a.n.Hc&&D.a.n.Hc.ea();D.a.n.Hc=null;D.a.n.ml&&D.a.n.ml.ea();D.a.n.ml=null;D.a.n.kk&&D.a.n.kk.ea();D.a.n.kk=null};A.Ma=function(a,b){$(b)};
A.Je=function(a,b){var c="";a.xf();var d=a.Ja.Db[a.Ua].w,e=a.Ja.Db[a.Ua].bw,g=a.Ja.Db[a.Ua].$d[a.nb].B,k="";$(d).b(f());$(g).b(function(a,b){k+=b.c+", "});var k=k.substring(0,k.length-2),l=[];$(e).b(function(a,b){var c=[];$(b).b(function(a,b){$(b.w).b(function(a,b){c.push(b.c)})});l.push(c)});var e=$(b).find(".tabs"),n=$(b).find(".metricgroups"),h=$(b).find(".timeline"),m=$(b).find(".metricbox"),p=$(b).find(".jtable");e.empty();n.empty();h.empty();m.empty();p.empty();p.G("histogram");e.d("data-reportid",
a.Ja.ma);D.a.n.$b=(new D.a.n.Db).C({selected:this.Ua});n.d("data-reportid",a.Ja.ma);n.d("data-tabid",a.Ua);n.d("data-mgid",a.nb);h.d("data-metrics",g[0].c);m.d("data-metrics",k);p.d("data-dimensions",JSON.stringify(l));p.d("data-metrics",k);"explorer"==this.zb?($(".jarvis.report.metricgroups").show(),$(".jarvis.report.row-top").show(),$(".jarvis.report.row-middle").show(),D.a.n.Wn=(new D.a.n.kf).C(),D.a.n.ad=(new sc).C({Ca:g[0].c,height:a.options.Gb.ad.height,wd:a.options.Gb.ad.wd,Gd:a.options.Gb.ad.Gd}),
D.a.n.Qg=(new D.a.n.hg).C(),a.options.Gb.Hc||(a.options.Gb.Hc={xa:10}),D.a.n.Hc=(new D.a.n.sh).C({xa:a.options.Gb.Hc.xa,defaultSelected:a.options.Gb.Hc.defaultSelected,zd:a.options.Gb.Hc.zd,Nf:a.options.Gb.Hc.Nf})):"table"==this.zb?(n.empty(),h.empty(),m.empty(),p.empty(),$(".jarvis.report.metricgroups").P(),$(".jarvis.report.row-top").P(),$(".jarvis.report.row-middle").P(),D.a.n.ml=(new D.a.n.$i).C()):"overview"==this.zb?($(".jarvis.report.metricgroups").show(),$(".jarvis.report.row-top").show(),
$(".jarvis.report.row-middle").show(),D.a.n.ad=(new sc).C({Ca:g[0].c,height:180}),g=a.Ja.Db[0].$d[0].B,d=a.Ja.Db[0].w,$(d).b(function(a,b){c='<div class="jarvis report dashboard overviewpie pie widget" data-dimensions="'+b.c+'" data-metrics="'+g[0].c+'" style="float:right;" data-limit="4"></div>';m.append(c)}),$(g).b(function(a,b){c='<div class="jarvis report overviewmetricbox widget" data-metrics="'+b.c+'"></div>';m.append(c)}),c='<div class="jarvis report summarytable" data-dimensions="'+d[0].c+
'" data-metrics="'+g[0].c+'" data-limit="10" style="margin-top:-20px;"></div>',p.append(c),(new Bc).C(),(new Cc).C(),(new Dc).C()):"histogram"==this.zb&&(k="",$(g).b(function(a,b){0<a&&(k+=b.c+", ")}),k=k.substring(0,k.length-2),n.d("data-reportid",a.Ja.ma),n.d("data-tabid",a.Ua),n.d("data-mgid",a.nb),h.d("data-metrics",g[1].c),m.d("data-metrics",k),p.d("data-dimensions",d[0].c),p.p("histogram"),$(".jarvis.report.metricgroups").show(),$(".jarvis.report.row-top").show(),$(".jarvis.report.row-middle").show(),
D.a.n.Wn=(new D.a.n.kf).C(),D.a.n.ad=(new sc).C({Ca:g[1].c}),D.a.n.Qg=(new D.a.n.hg).C(),D.a.n.kk=(new Fc).C());$(D).I("jarvis-report-draw")};A.get=function(a,b){if(-1!=b){var c=D.f.ka.bc(a,{id:b});a.W=c.ma;return c}};A.bd=function(a){$(a.h);a=a.Z.Ja;$("body").find(".jarvis.caption").text(a.c.replace("&amp;","&")).I("contentchange");$("body").find(".jarvis.description").text(a.Zd).I("contentchange");$("body").d("class")?$("body").d("class").indexOf(a.c)||$("body").p(a.c):$("body").p(a.c)};
D.debug.log("INFO","Report.Visualisation.Panel",6,"JS source loaded");D.ba("jarvis.visualisation.report.editor");D.a.n.gg=function(a){this.Z=this;this.options=a;this.h=null;this.ha=1;this.jo=-1;this.Oj={id:-1,ha:1,Nd:!0,title:"Report Tab",type:"explorer",yd:[{id:-1,title:"New metric group",q:[]}],A:[]};this.state={};this.state.n={id:-1,title:"",description:"",$b:[za(this.Oj)],ll:1};D.a.n.fy=this};
D.a.n.gg.prototype.C=function(a,b){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Building Editor for ID ('"+a.W+"')");a.h=b.h;this.W=a.W=b.W;-1<this.W&&(this.n=D.f.ka.bc(a,{id:a.W}));var c=$(".jarvis._container"),d=$(".jumbotron.subhead"),e=$(".jarvis._container .jarvis.report.panel");d.P();e.P();$(".report.editor").remove();var g=$('<div class="report editor"></div>');c.append(g);var c=$('<form class="form-horizontal wrapper_buttons" style="margin-left:50px;"></form>'),k=$('<div class="control-group"></div>');
k.append('<label class="control-label" for=""></label><div class="controls"></div>');var l=$('<a class="btn save">Save</a>'),n=$('<a class="btn cancel">Cancel</a>'),h=$('<a class="btn delete">Delete</a>');n.D("click");n.s("click",function(){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Cancelling.");-1==a.W?location.href="/":(g.remove(),d.show(),e.show(),$(D).I("reportchange",a.W))});l.D("click");l.s("click",function(c){c.stopPropagation();Gc(a,b)});h.D("click");h.s("click",function(c){c.stopPropagation();
a.jf(a,b)});k.find(".controls").append(l);k.find(".controls").append(n);-1<a.W&&k.find(".controls").append(h);c.append(k);k=$('<header class="jumbotron subhead"></header>');-1==a.W?k.append('<h1 class="jarvis caption">Custom Report</h1>'):k.append('<h1 class="jarvis caption">Edit Report</h1>');k.append('<p class="jarvis description lead">Use the editor below to customize your report.</p>');var l=$('<div class="header"><div class="sectiontitle">General Information</div></div> '),n=$('<div class="header"><div class="sectiontitle">Report Content</div></div> '),
h=$('<form class="form-horizontal"></form>'),m=$('<div class="control-group wrapper_title"></div>');m.append('<label class="control-label" for="">Title</label>');m.append('<div class="controls"><input class="input_title input-xlarge" type="text" data-param="title" placeholder="Enter report name"></div>');var p=$('<div class="control-group wrapper_title"></div>');p.append('<label class="control-label" for="">Description</label>');p.append('<div class="controls"><textarea class="input_description input-xlarge" data-param="description" placeholder="Enter report description"></textarea></div>');
var s=$('<div class="control-group wrapper_category"></div>');s.append('<label class="control-label" for="">Category</label>');s.append('<div class="controls"><select id="categories"></select></div>');var q=D.f.ka.$p(),q=$.Y(q.data);$(q).b(function(a,b){var c=$('<option value="'+b.key+'">'+b.value+"</option>");s.find("select").append(c)});h.append(m);h.append(p);h.append(s);-1<a.W&&Hc(a);g.append(k);g.append(l);g.append(h);g.append(n);g.append(Ic(a,b));g.append(c);-1<a.W&&Jc(a);$(".simpleerror").O("visibility",
"hidden")};D.a.n.gg.prototype.xf=function(){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Dispose");$(".simpleerror").O("visibility","visible")};function Jc(a){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Populating Editor for ID ('"+a.W+"')");$(".input_title").U(a.n.c);$(".input_description").U(a.n.Zd);$("#categories").find("option").b(function(b,c){var d=$(c);a.n.Hb.c==d.text()&&d.d("selected",!0)})}
function Hc(a){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Populating Tabs for ID ('"+a.W+"')");$(a.n.Db).b(function(b,c){a.state.n.$b[b]={id:c.ma,ha:c.ae,Nd:!1,title:c.c,type:c.lf,yd:function(){var a=[];$(c.$d).b(function(b,c){a.push({id:c.ma,Et:!1,title:c.c,q:function(){var a=[];$(c.B).b(function(b,c){c.ha=b;a.push(c)});return a}()})});return a}(),A:function(){var a=[];$(c.w).b(function(b,c){c.ha=b;c.Ya=!1;a.push(c)});return a}()}});a.state.n.$b[0].Nd=!0}
function Ic(a,b){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Building Tabs for ID ('"+a.W+"')");var c=$('<div class="wrapper_tabs"></div>'),d=$('<ul class="nav nav-tabs"></ul>');$(a.state.n.$b).b(function(c,e){if(!e.Ya){var h=$('<li class="tab" data-id="'+e.ha+'"><button type="button" class="close">&times;</button><a class="tabname">'+e.title+"</a></li>"),k=$(h.find(".close"));k.D("click");k.s("click",function(){$(a.state.n.$b).b(function(a,b){b.ha==h.d("data-id")&&(b.Ya=!0)});var c=
0;$(a.state.n.$b).b(function(a,b){b.Ya||c++});if(0==c)a.state.n.$b.push(za(a.Oj)),a.state.n.ll=1;else{var d=!1;$(a.state.n.$b).b(function(a,b){!0==b.Nd&&!1==b.Ya&&(d=!0)});d||(a.state.n.$b[0].Nd=!0)}a.state.n.ll--;Ic(a,b)});h.D("click");h.s("click",function(){d.find(".tab.active").G("active");h.p("active");var b;$(a.state.n.$b).b(function(a,c){c.ha==h.d("data-id")?(c.Nd=!0,b=c):c.Nd=!1});g.d("data-id",b.ha);Kc(a,{cg:g,type:b.type})});e.Nd&&h.p("active");d.append(h)}});var e=$('<li class="tab"><a class="addtab">+ add report tab</a></li>');
e.D("click");e.s("click",function(){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Adding tab");$(a.state.n.$b).b(function(a,b){b.Nd=!1});var c=za(a.Oj);c.Nd=!0;c.ha=a.ha+1;a.state.n.$b.push(c);a.state.n.ll++;a.ha++;Ic(a,b)});d.append(e);var g=$('<div class="tab" data-id="1"></div>');c.append(d);c.append(g);e=$(".report.editor");if(0<e.find(".wrapper_buttons").length){var k=e.find(".wrapper_buttons");e.find(".wrapper_tabs").remove();k.fm(c)}else e.find(".wrapper_tabs").remove(),e.append(c);
d.find(".tab.active").click()}
function Kc(a,b){D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Building Tab for ID ('"+a.W+"')");var c=$(".report.editor"),d=$(b.cg),e=b.type,g;$(a.state.n.$b).b(function(a,b){b.ha==d.d("data-id")&&(g=b,g.type=e)});D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Building tab for tab "'+g.ha+'"');d.empty();var k=$('<form class="form-horizontal"></form>'),l=$('<div class="control-group"></div>');l.append('<label class="control-label" for="">Title</label>');l.append('<div class="controls"><input class="input_tab_title input-large" type="text" data-param="title" placeholder="Enter tab name" value="'+
g.title+'"></div>');var n=$(l.find(".input_tab_title"));n.D("keyup");n.s("keyup",function(){g.title=n.U();var a=$(c.find('li.tab[data-id="'+g.ha+'"]'));$(a.find("a")).u(g.title)});var h=$('<div class="control-group"></div>');h.append('<label class="control-label" for="">Type</label>');h.append('<div class="controls"><div class="btn-group" data-toggle="buttons-radio"><a class="btn btn_type_explorer">Explorer</a><a class="btn btn_type_table">Table</a><a class="btn btn_type_histogram">Histogram</a>\x3c!--<a class="btn btn_type_geo">Geographical</a>--\x3e<a class="btn btn_type_overview">Overview</a></div></div>');
h.find(".btn.btn_type_explorer").D("click");h.find(".btn.btn_type_explorer").s("click",function(){Kc(a,{cg:d,type:"explorer"})});h.find(".btn.btn_type_table").D("click");h.find(".btn.btn_type_table").s("click",function(){Kc(a,{cg:d,type:"table"})});h.find(".btn.btn_type_geo").D("click");h.find(".btn.btn_type_geo").s("click",function(){Kc(a,{cg:d,type:"geo"})});h.find(".btn.btn_type_overview").D("click");h.find(".btn.btn_type_overview").s("click",function(){Kc(a,{cg:d,type:"overview"})});h.find(".btn.btn_type_histogram").D("click");
h.find(".btn.btn_type_histogram").s("click",function(){Kc(a,{cg:d,type:"histogram"})});h.find(".btn.btn_type_explorer").G("active");h.find(".btn.btn_type_table").G("active");h.find(".btn.btn_type_geo").G("active");h.find(".btn.btn_type_overview").G("active");h.find(".btn.btn_type_histogram").G("active");switch(g.type){case "explorer":h.find(".btn.btn_type_explorer").p("active");break;case "table":h.find(".btn.btn_type_table").p("active");break;case "geo":h.find(".btn.btn_type_geo").p("active");break;
case "overview":h.find(".btn.btn_type_overview").p("active");break;case "histogram":h.find(".btn.btn_type_histogram").p("active")}k.append(l);k.append(h);d.append(k);if("explorer"==g.type){var m=$('<div class="control-group"></div>');m.append('<label class="control-label" for="">Metric Groups</label>');m.append('<div class="controls"></div>');$(g.yd).b(function(a,b){if(!b.Ya){var c=$('<div class="jarvis jcontainer metrics"></div>'),d=new D.a.h.B({h:c,title:b.title,q:b.q,id:b.id});$(d).bind("metric-added",
function(a,c){var d=_.find(D.f.B,function(a){return a.c==c});b.q.push(d)});$(d).bind("metric-removed",function(a,c){$(b.q).b(function(a,b){b.c==c&&(b.Ya=!0)})});$(d).bind("rename",function(a,c){b.title=c});$(d).bind("group-removed",function(){g.yd[a].Ya=!0;c.remove()});$(d).bind("metric-reorder",function(){c.find(".pickerwrapper[data-id]").b(function(a,c){$(b.q).b(function(b,d){d.c==$(c).d("data-id")&&(d.ha=a)})})});m.find(".controls").append(c)}});var p=$('<div class="wrapper_add_metric"></div>');
p.append('<a class="btn btn_addgroup">+ Add metric group</a>');p.find(".btn").D("click");p.find(".btn").s("click",function(){var b={id:a.jo-1,Et:!0,title:"New metric group",q:[]};g.yd.push(b);a.jo--;var c=$('<div class="jarvis jcontainer metrics"></div>'),d=new D.a.h.B({h:c,title:b.title,q:b.q,id:b.id});$(d).bind("metric-added",function(a,c){var d=_.find(D.f.B,function(a){return a.c==c});b.q.push(d)});$(d).bind("metric-removed",function(a,c){$(b.q).b(function(a,d){d.c==c&&b.q.splice(a,1)})});$(d).bind("rename",
function(a,c){b.title=c});$(d).bind("group-removed",function(a,b){$(g.yd).b(function(a,c){c.id==b&&g.yd.splice(a,1)});c.remove()});p.fm(c)});m.find(".controls").append(p);k.append(m);l=$('<div class="control-group"></div>');l.append('<label class="control-label" for="">Dimension Drilldowns</label>');l.append('<div class="controls"></div>');var s=$('<div class="jarvis jcontainer dimensions"></div>'),h=new D.a.h.w({h:s,Sb:4,A:g.A});$(h).bind("dimension-added",function(a,b){var c=_.find(D.f.w,function(a){return a.c==
b});g.A.push(c)});$(h).bind("dimension-removed",function(a,b){$(g.A).b(function(a,c){c.c==b&&(c.Ya=!0)})});$(h).bind("dimension-reorder",function(){s.find(".pickerwrapper[data-id]").b(function(a,b){$(g.A).b(function(c,d){d.c==$(b).d("data-id")&&(d.ha=a)})})});l.find(".controls").append(s);k.append(l)}else if("table"==g.type||"overview"==g.type||"histogram"==g.type)m=$('<div class="control-group"></div>'),m.append('<label class="control-label" for="">Metrics</label>'),m.append('<div class="controls"></div>'),
$(g.yd[0]).b(function(a,b){if(!b.Ya){var c=$('<div class="jarvis jcontainer metrics"></div>'),d=new D.a.h.B({h:c,title:b.title,q:b.q,id:b.id,Xh:!0});$(d).bind("metric-added",function(a,c){var d=_.find(D.f.B,function(a){return a.c==c});b.q.push(d)});$(d).bind("metric-removed",function(a,c){$(b.q).b(function(a,b){b.c==c&&(b.Ya=!0)})});$(d).bind("rename",function(a,c){b.title=c});$(d).bind("group-removed",function(){g.yd[a].Ya=!0;c.remove()});$(d).bind("metric-reorder",function(){c.find(".pickerwrapper[data-id]").b(function(a,
c){$(b.q).b(function(b,d){d.c==$(c).d("data-id")&&(d.ha=a)})})});m.find(".controls").append(c)}}),k.append(m),l=$('<div class="control-group"></div>'),l.append('<label class="control-label" for="">Dimensions</label>'),l.append('<div class="controls"></div>'),s=$('<div class="jarvis jcontainer dimensions fortable"></div>'),h=new D.a.h.w({h:s,Sb:4,A:g.A}),$(h).bind("dimension-added",function(a,b){var c=_.find(D.f.w,function(a){return a.c==b});g.A.push(c)}),$(h).bind("dimension-removed",function(a,b){$(g.A).b(function(a,
c){c.c==b&&(c.Ya=!0)})}),$(h).bind("dimension-reorder",function(){s.find(".pickerwrapper[data-id]").b(function(a,b){$(g.A).b(function(c,d){d.c==$(b).d("data-id")&&(d.ha=a)})})}),l.find(".controls").append(s),k.append(l)}D.a.n.gg.prototype.jf=function(a){D.f.ka.jf(a,{id:a.W});D.f.ka.$(null,null,null,!0);buildContentMenu_Reports();location.href="/"};
function Gc(a,b,c){$(".save-error").remove();try{$(_.filter(a.state.n.$b,function(a){return!a.Vx})).b(function(a,b){var c=_.filter(b.A,function(a){return!a.Ya}),c=_.Vc(c,function(a){return a.ha});$(c).b(function(a,b){b.ha=a})});c&&D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Saving report");var d=$(".report.editor .input_title").U();if(""==d)throw"Report name is missing.";var e=$(".report.editor .input_description").U();if(""==e)throw"Report description is missing.";var g=$("#categories").U();
if(c){-1==a.state.n.W&&D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Adding new report "'+a.state.n.title+'"');var k=D.f.ka.ye(a,a.W,"name",d),k=$.Y(k.data);a.W=k.ma;a.state.n.ma=k.ma;a.state.n.W=k.ma;D.f.ka.ye(a,a.W,"description",e);D.f.ka.ye(a,a.W,"category",g);a.state.n.c=d;a.state.n.Zd=e;a.state.n.Hb=g}if(0==_.find(a.state.n.$b,function(a){return!a.Ya}).length)throw"Reports must contain at least one tab.";$(a.state.n.$b).b(function(b,d){var e=d.title,g=d.ha,h=d.type;if(""==e)throw"Report tab name is missing.";
d.Ya&&-1<d.id?(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Deleting tab "'+d.title+'"'),D.f.ka.Xp({id:d.id})):!d.Ya&&-1>=d.id?c&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Adding new tab "'+d.title+'"'),e=D.f.ka.Np({W:a.W,name:e,type:d.type}),e=$.Y(e.data),d.id=e.ma):!d.Ya&&c&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Updating tab "'+d.title+'"'),D.f.ka.gj(d.id,"name",e),D.f.ka.gj(d.id,"ordinal",g),D.f.ka.gj(d.id,"type",h));c&&D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",
6,'Updating metric groups for tab "'+d.id+'"');if(0==_.find(d.yd,function(a){return!a.Ya}).length)throw"Report tab must contain at least one metric group.";if(!d.Ya){$(d.yd).b(function(a,b){var e=b.title;if(""==e)throw"Metric group name is missing.";b.Ya&&-1<b.id?c&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Deleting metric group "'+b.title+'"'),D.f.B.Vp({id:b.id})):!b.Ya&&-1>=b.id?c&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Adding new metric group "'+b.title+'"'),
e=D.f.B.Mp({Ua:d.id,name:e}),e=$.Y(e.data),b.id=e.ma):!b.Ya&&c&&(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Updating metric group "'+b.title+'"'),D.f.B.jq(b.id,e));if(!b.Ya){c&&D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Updating metrics for group "'+b.id+'"');if(0==_.find(b.q,function(a){return!a.Ya}).length)throw"Metric group must contain at least one metric.";$(b.q).b(function(a,d){if(d.Ya){if(c){try{"undefined"==typeof d.ha&&(d.ha=_.max(b.q,function(a){return a.ha}).ha+
1)}catch(e){d.ha=0}D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Deleting metric "'+d.c+'" for group '+b.id);D.f.B.Wp(b.id,d.Nb)}}else if(c){try{"undefined"==typeof d.ha&&(d.ha=_.max(b.q,function(a){return a.ha}).ha+1)}catch(g){d.ha=0}D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Updating metric "'+d.c+'" for group '+b.id+", ordinal: "+d.ha);D.f.B.kq(b.id,d.Nb,d.ha)}})}});if(0==_.find(d.A,function(a){return!a.Ya}).length)throw"Report tabs must contain at least one dimension.";
$(d.A).b(function(a,b){if(b.Ya){if(c){try{"undefined"==typeof b.ha&&(b.ha=_.max(d.A,function(a){return a.ha}).ha+1)}catch(e){b.ha=0}D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Deleting dimension "'+b.c+'" for tab '+d.id);D.f.ka.Yp(d.id,b.Nb,b.ha)}}else if(c){try{"undefined"==typeof b.ha&&(b.ha=_.max(d.A,function(a){return a.ha}).ha+1)}catch(g){b.ha=0}D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,'Updating dimension "'+b.c+'" for tab '+d.id+", ordinal: "+b.ha);D.f.ka.lq(d.id,
b.Nb,b.ha)}})}})}catch(l){throw Lc({message:l}),l;}if(c)try{D.f.ka.$(null,null,null,!0);buildContentMenu_Reports();var n=$(".report.editor"),h=$(".jumbotron.subhead"),m=$(".jarvis._container .jarvis.report.panel");n.remove();h.show();m.show();$(D).I("reportchange",a.W);D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Saved.")}catch(p){return}c||(D.debug.log("INFO","Jarvis.Visualisation.Report.Editor",6,"Updating layout..."),$(function(){$(window).scrollTop(0);D.a.Fi(!0)}).iu().Om(function(){setTimeout(function(){Gc(a,
b,!0)},13)}))}
function Lc(a){var b=$('<div class="alert alert-error save-error"><button type="button" class="close" data-dismiss="alert">\u00d7</button></div>');b.append('<strong>Error</strong>, we have failed to save the report due to the following issue(s):<br/><ul class="errors"></ul>');"string"===typeof a.message&&(a.message=[a.message]);$(a.message).b(function(a,d){b.find(".errors").append("<li>"+d+"</li>")});$(".report.editor .header:first-of-type").fm(b);$("html, body").T({scrollTop:0},"slow")}
D.debug.log("INFO","Report.Visualisation.Editor",6,"JS source loaded");D.ba("jarvis.visualisation");D.a.On=!1;D.a.Sm=!1;D.a.qx=[];
D.a.C=function(){if(D.qf){var a=$(".jarvis.jcontainer.metrics:not([data-uid])");0<a.length&&waitforScript("jarvis.visualisation.picker.metrics",function(){waitforScript("jarvis.visualisation.container.metrics",function(){D.a.Ds(a)})});var b=$(".jarvis.jcontainer.dimensions:not([data-uid])");0<b.length&&waitforScript("jarvis.visualisation.container.dimensions",function(){D.a.Cs(b)});var c=$(".jarvis.picker.metrics:not([data-uid])");0<c.length&&waitforScript("jarvis.visualisation.picker.metrics",function(){D.a.Fs(c)});
var d=$(".jarvis.picker.dimensions:not([data-uid])");0<d.length&&waitforScript("jarvis.visualisation.picker.dimensions",function(){D.a.Es(d)});D.a.qf();0==$(".jarvis.panel").length?(D.debug.log("INFO","Jarvis.Visualisation",4,"Searching for standalone components on page."),0<$(".jarvis.report.metricgroups").length&&(new D.a.n.kf).C(),0<$(".jarvis.report.tabs").length&&(new D.a.n.Db).C(),0<$(".jarvis.report.metricbox").length&&(new D.a.n.hg).C(),0<$(".jarvis.report.timeline").length&&(new sc).C(),
0<$(".jarvis.report.jtable").length&&(new D.a.n.sh).C(),0<$(".jarvis.dashboard.metricbox").length&&(new mc).C(),0<$(".jarvis.dashboard.pie").length&&(new oc).C(),0<$(".jarvis.dashboard.jtable").length&&(new nc).C(),0<$(".jarvis.dashboard.timeline").length&&(new kc).C(),0<$(".jarvis.realtime.geo").length&&(new Wb).C(),0<$(".jarvis.realtime.metricbox").length&&(new Ub).C(),0<$(".jarvis.realtime.startstop").length&&D.a.r.iq.C(),0<$(".jarvis.realtime.status").length&&D.a.r.ze.C(),0<$(".jarvis.realtime.table").length&&
(new Vb).C(),0<$(".jarvis.realtime.timeline").length&&(new Tb).C()):0<$(".jarvis.panel").length&&(D.debug.log("INFO","Jarvis.Visualisation",4,"Searching for panels on page."),0<$(".jarvis.dashboard.panel").length?((new D.a.ja.ud).C(null,null,!0),$(".jarvis.dashboard.panel").show()):0<$(".jarvis.report.panel").length?D.a.ap():0<$(".jarvis.realtime.panel").length&&(new D.a.r.ud).C(null,null,!0))}else D.debug.log("INFO","Dashboard.Visualisation",6,"Bootstrap is not needed.")};
waitforScript=function(a,b){setTimeout(function(){-1==D.loaded.indexOf(a)?waitforScript(a,b):b()},100)};D.a.Fs=function(a){a.b(function(a,c){var d=$(c);d.d("data-uid",Ma());new D.a.K.B({h:d,kb:"Choose a metric..."})})};D.a.Es=function(a){a.b(function(a,c){var d=$(c);d.d("data-uid",Ma());new D.a.K.w({h:d,kb:"Choose a dimension..."})})};D.a.Ds=function(a){a.b(function(a,c){var d=$(c);d.d("data-uid",Ma());new D.a.h.B({h:d})})};D.a.Cs=function(a){a.b(function(a,c){var d=$(c);d.d("data-uid",Ma());new D.a.h.w({h:d})})};
D.a.fi=0;
D.a.Fi=function(a){$(".simpleloading").show();$(".container.jarvis").Fa("resize");$(".container.jarvis").Tk(function(){D.debug.log("INFO","jarvis.visualisation",6,"container resize [2]: "+($(".content_wrapper").width()-1).toString()+"px")});$(".container.jarvis").bind("resize",function(){D.debug.log("INFO","jarvis.visualisation",6,"container resize: "+($(".content_wrapper").width()-1).toString()+"px");$(".jarvis._container");try{$(".overlay").O({opacity:0.5,width:$(".content_wrapper").width()-1+"px"})}catch(a){}});
try{$(".overlay").O({opacity:0.5,width:$(".content_wrapper").width()-1+"px"})}catch(b){}a?$(".overlay").show():$(".overlay").ly();$(".launchlink").p("disabled")};D.a.ik=function(){$(".simpleloading").P();$(".overlay").Um().P();$(".launchlink").G("disabled")};
D.a.Pu=function(){D.a.On||($("body").append('<div id="" class="simpleloading" style="display: none; ">Loading ...</div>'),$(".overlay").O({opacity:0.5,width:$(".content_wrapper").width()-1+"px"}),$(document).$w(function(){$(".jarvis._container");D.dd++;D.dd=2;"none"==$(".overlay").O("display")&&1<D.dd&&D.a.Fi();0>=D.a.fi&&(D.a.fi=setInterval(function(){0<D.dd&&"none"==$(".overlay").O("display")?D.a.Fi():0>=D.dd&&"block"==$(".overlay").O("display")&&(clearInterval(D.a.fi),D.a.ik())},500))}),$(document).ax(function(){D.dd--;
D.dd=0;0>D.dd&&(D.dd=0);0>=D.dd&&(setTimeout(function(){0>=D.dd&&("block"==$(".overlay").O("display")||"block"==$(".simpleloading").O("display"))&&(clearInterval(D.a.fi),D.a.ik())},500),D.Xb||D.bh("State change"))}),D.a.On=!0)};
D.a.Xo=function(){if(!D.a.Sm&&($("body").append('<div id="" class="simpleerror" style="display: none; ">Error.</div>'),D.qf)){var a;a='<div class="modal_error modal hide fade"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';a+="<h3>Error details</h3>";a+="</div>";a+='<div class="modal-body">';a+='<p class="errortext" style="font-weight: bold;">Error details</p>';a+='<p class="">Apologies for your inconvenience, but the system has failed to complete your request.</p>';
a+='<p class="">We have gathered the following information from your system and our server logs and with your permission would like to open a support ticket on your behalf and send the relevant information for further investigation by our engineers.</p>';a+='<div class="accordion" id="accordion2">';a+='<div class="accordion-group">';a+='<div class="accordion-heading">';a+='<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">';a+="Exception details";a+=
"</a>";a+="</div>";a+='<div id="collapseOne" class="accordion-body collapse in">';a+='<div class="accordion-inner exceptiondetails">';a+="";a+="</div>";a+="</div>";a+="</div>";a+='<div class="accordion-group">';a+='<div class="accordion-heading">';a+='<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">';a+="Client state";a+="</a>";a+="</div>";a+='<div id="collapseTwo" class="accordion-body collapse">';a+='<div class="accordion-inner ">';a+='<textarea class="clientstate" style="width: 100%;height: 100px;"></textarea>';
a+="</div>";a+="</div>";a+="</div>";a+='<div class="accordion-group">';a+='<div class="accordion-heading">';a+='<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseThree">';a+="Server log (last 50 rows)";a+="</a>";a+="</div>";a+='<div id="collapseThree" class="accordion-body collapse">';a+='<div class=" accordion-inner" >';a+='<table class="table table-striped table-condensed serverlog"><tr><th>Timestamp (server GMT)</th><th>Message</th></tr></table>';a+="</div>";
a+="</div>";a+="</div>";a+="</div>";a+='<p class="">In order to complete opening a support ticket, please click the Report button to proceed.</p>';a+="</div>";a+='<div class="modal-footer">';a+='<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>';a+='<a href="#" class="btn btn-primary btnreport">Report</a>';a+="</div>";a+="</div>";$("body").append(a);D.a.Sm=!0}};
D.a.Ei=function(a){$(D).I("jarvis-error",[a]);D.a.Xo();$(".simpleloading").P();$(".simpleerror").text("Error. Click here to review and report...");$(".simpleerror").D("click");$(".simpleerror").s("click",function(){var b=$(".modal_error");try{var c=Qb(),c=$.Y(c.data).Cz,d=$(".serverlog");d.empty();var e=$("<tr></tr>"),g=$("<th>Timetamp</th>");e.append(g);g=$("<th>Message</th>");e.append(g);d.append(e);c.reverse();$(c).b(function(a,b){var c=/\[(.*?)\]/,g=$.trim(b.split(c)[1]).split(" ")[1],c=$.trim(b.split(c)[2]);
e=$("<tr></tr>");g=$('<td class="timestamp">'+g+"</td>");e.append(g);g=$('<td class="message">'+c+"</td>");e.append(g);d.append(e)})}catch(k){console.log(k)}var l="JA Error. ";if("object"==typeof a){var n="";jQuery.b(a,function(a,b){n+="<strong>"+a+"</strong>: "+b+"<br/>"});b.find(".exceptiondetails").u(n);b.find(".errortext").u(a.Hl.substring(0,50));l+=a.Hl.substring(0,50)}else b.find(".exceptiondetails").u("Message: "+a),b.find(".errortext").u(a),l+=a.substring(0,50);b.find(".clientstate").text(JSON.stringify(D.state,
null,"\t"));$(".btnreport").D("click");$(".btnreport").s("click",function(){var a="/Engine/Tickets.aspx";D.wj&&(a=D.pp+a);a=D.hostname+a;l+="<br/><br/>\r\n\r\nClient State<hr/><br/>\r\n";l+=JSON.stringify(D.state,null,"\t");l+="<br/><br/>\r\n\r\nServer Log<hr/><br/>\r\n";$(c).b(function(a,b){var c=/\[(.*?)\]/,d=$.trim(b.split(c)[1]).split(" ")[1],c=$.trim(b.split(c)[2]);l+=""+d+": "+c+"<br/>\r\n"});var d;d=""+("<helpdesk_ticket><description>"+l+"</description>");d=d+"<subject>Exception reported from JA.</subject>"+
("<email>"+D.GB.iy+"</email>");d+="<priority>2</priority>";d+="<source>4</source>";d+="</helpdesk_ticket>";$.nj({type:"POST",async:!1,contentType:"text/xml",dataType:"text",url:a,data:d,np:function(a){xmlDoc=$.lA(a);$xml=$(xmlDoc);$title=$xml.find("display-id");b.fc("hide");$(".simpleerror").P()},error:f()})});b.fc("show")});$(".simpleerror").show();$(".jarvis._container").O("opacity","1");setTimeout(function(){$(".simpleerror").P()},15E3)};D.a.eB=f();
D.a.Uc=function(a){var b=$("body"),c=$(".jarvis._container"),d=b.find(".jarvis.report.panel"),e=b.find(".jarvis.dashboard.panel"),g=$(".jarvis.realtime.panel"),k=b.find(".jarvis.picker.datebox"),l=b.find(".panel-edit"),n=b.find(".widget-add");$(".report.editor").P();switch(a){case "report":b.find(".homepage").P();g.P();g.find(".widgets").empty();e.P();e.find(".widgets").empty();k.show();d.show();l.show();n.P();c.show();break;case "dashboard":b.find(".homepage").P();d.P();d.find(".timeline").empty();
d.find(".metricbox").empty();d.find(".jtable").empty();g.P();g.find(".widgets").empty();k.show();l.show();n.show();e.show();c.show();break;case "realtime":b.find(".homepage").P(),d.P(),d.find(".timeline").empty(),d.find(".metricbox").empty(),d.find(".jtable").empty(),e.P(),e.find(".widgets").empty(),k.P(),l.show(),n.show(),g.show(),c.show()}a=$(".jumbotron.subhead");b=$(".jarvis._container .jarvis.report.panel");a.show();b.show()};D.a.Io=!1;D.a.Fc=null;D.a.Gm=!1;D.a.yg=null;D.a.Do=!1;D.a.Eo=null;
D.a.br=!1;D.a.Uu=function(){D.a.Uc("homepage")};D.a.ap=function(a){D.a.Uc("report");D.a.yg&&D.a.yg.xf();D.a.n.L="";D.W=a;D.a.Io||(D.a.Fc=new D.a.n.ud({W:a}),D.a.Io=!0);var b=0,c=0;D.state&&(b=D.state.Ua,c=D.state.nb);if(null==b||"undefined"==typeof b)b=0;if(null==c||"undefined"==typeof c)c=0;D.a.Fc.C({W:a,Ua:b,zb:"explorer",nb:c},$(".jarvis.report.panel"),!0,!0,!0);$(D).I("setreport",D.a.Fc.W)};
D.a.Tu=function(a){D.a.Uc("dashboard");D.a.Fc&&D.a.Fc.xf();D.Hh=a;D.a.Gm||(D.a.yg=new D.a.ja.ud({ga:a}),D.a.Gm=!0);D.a.yg.C({ga:a},$(".jarvis.dashboard.panel"),!0,!0,!0);$(D).I("setdashboard",D.a.yg.ga)};D.a.Vu=function(a){D.a.Uc("realtime");D.ga=a;D.a.Do||(D.a.Eo=new D.a.r.ud({ga:a}),D.a.Do=!0);D.a.Eo.C({ga:a},$(".jarvis.realtime.panel"),!0,!0,!0)};
D.a.qf=function(){D.debug.log("INFO","jarvis.visualisation",6,"Bootstrap...");D.qf?(D.debug.log("INFO","jarvis.visualisation",6,"Bootstrapping Datebox"),D.a.K.i.C(),D.a.br=!0,D.a.Pu(),D.a.Xo(),$(D).Fa("homepage"),$(D).bind("homepage",function(){D.state={};D.a.K.i.C();D.a.Uu()}),$(D).Fa("reportchange"),$(D).bind("reportchange",function(a,b){D.state["timeline-1234"]=null;D.state["table-1234"]=null;if(D.a.Fc)try{D.a.Fc.xf()}catch(c){}D.state.Hh=null;D.state.W=null;D.state.Ua=null;D.state.nb=null;D.state.zb=
null;console.log("state",D.state);D.a.ap(b)}),$(D).Fa("dashboardchange"),$(D).bind("dashboardchange",function(a,b){D.a.Tu(b)}),$(D).Fa("realtimepanelchange"),$(D).bind("realtimepanelchange",function(a,b){D.a.Vu(b)}),$(".homepagelink").D("click"),$(".homepagelink").s("click",function(){D.state.view="homepage";D.bh("Homepage switch");$(D).I("homepage")})):D.debug.log("INFO","jarvis.visualisation",6,"Bootstrap is not needed.")};D.debug.log("INFO","Jarvis.Visualisation",6,"JS source loaded");try{var Mc=D,Nc;Nc=D.l.m(new D.f.ic,"/engine/Auth.svc/GetUser",null,null);Nc=$.Y(Nc.data);Mc.th=Nc;D.th.Zp=D.th[Object.keys(D.th)[0]];$(".loginname").Zg(D.th.Zp)}catch(Oc){console.log(Oc)}$.Zw({jB:{401:f(),500:function(){500!=xhr.status&&0==xhr.readyState||D.a.Ei({Hl:msg,Mw:url,qw:line})}}});$(window).Sy(function(){D.ji&&Sa()});""==location.hash&&(D.state.view="dashboard");
$().ou(function(){D.a.C();Sa();$(window).I("jarvis-loaded");jQuery.ub.ex=function(a,b,c){var d,e,g;return this.b(function(k,l){l=jQuery(l);d=l.wm().O({height:"auto",width:"auto"}).Dq("body");e=d.O("height");g=d.O("width");d.remove();"height"===a?l.T({height:e},b,c):"width"===a?l.T({width:g},b,c):"both"===a&&l.T({width:g,height:e},b,c)})}});
